<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Topaz: tz::gl::ResourceStorage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="tz.png"/></td>
  <td id="projectalign">
   <div id="projectname">Topaz<span id="projectnumber">&#160;3.4</span>
   </div>
   <div id="projectbrief">C++20 Graphics Engine</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classtz_1_1gl_1_1_resource_storage.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">tz::gl::ResourceStorage Class Reference<div class="ingroups"><a class="el" href="group__tz__gl2.html">Topaz Graphics Library 2 (tz::gl)</a> &raquo; <a class="el" href="group__tz__gl2__graphicsapi.html">Graphics API Specifics</a> &raquo; <a class="el" href="group__tz__gl2__graphicsapi__ogl.html">OpenGL</a> &raquo; <a class="el" href="group__tz__gl2__graphicsapi__ogl__frontend.html">OpenGL Frontend</a> &raquo; <a class="el" href="group__tz__gl2__graphicsapi__ogl__frontend__renderer.html">Renderer Implementation</a> &#124; <a class="el" href="group__tz__gl2.html">Topaz Graphics Library 2 (tz::gl)</a> &raquo; <a class="el" href="group__tz__gl2__graphicsapi.html">Graphics API Specifics</a> &raquo; <a class="el" href="group__tz__gl2__graphicsapi__vk.html">Vulkan</a> &raquo; <a class="el" href="group__tz__gl2__graphicsapi__vk__frontend.html">Vulkan Frontend</a> &raquo; <a class="el" href="group__tz__gl2__graphicsapi__vk__frontend__renderer.html">Renderer Implementation</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Copies all resource data from upon creation and handles resource and component lifetimes.  
 <a href="classtz_1_1gl_1_1_resource_storage.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="impl_2frontend_2ogl2_2renderer_8hpp_source.html">renderer.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for tz::gl::ResourceStorage:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classtz_1_1gl_1_1_resource_storage.png" usemap="#tz::gl::ResourceStorage_map" alt=""/>
  <map id="tz::gl::ResourceStorage_map" name="tz::gl::ResourceStorage_map">
<area href="classtz_1_1gl_1_1_asset_storage_common.html" alt="tz::gl::AssetStorageCommon&lt; IResource &gt;" shape="rect" coords="0,0,247,24"/>
<area href="classtz_1_1gl_1_1_asset_storage_common.html" alt="tz::gl::AssetStorageCommon&lt; IResource &gt;" shape="rect" coords="257,0,504,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab8eedf45c9147a02ee1af0ae6c7951cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#ab8eedf45c9147a02ee1af0ae6c7951cf">ResourceStorage</a> (std::span&lt; const <a class="el" href="classtz_1_1gl_1_1_i_resource.html">IResource</a> *const &gt; resources, std::span&lt; const <a class="el" href="classtz_1_1gl_1_1_i_component.html">IComponent</a> *const &gt; components)</td></tr>
<tr class="memdesc:ab8eedf45c9147a02ee1af0ae6c7951cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create storage for a set of existing resources.  <a href="classtz_1_1gl_1_1_resource_storage.html#ab8eedf45c9147a02ee1af0ae6c7951cf">More...</a><br /></td></tr>
<tr class="separator:ab8eedf45c9147a02ee1af0ae6c7951cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0524a8fb3d8fd8c1c5735e89e06f4cc7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classtz_1_1gl_1_1_i_component.html">IComponent</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#a0524a8fb3d8fd8c1c5735e89e06f4cc7">get_component</a> (<a class="el" href="classtz_1_1_handle.html">ResourceHandle</a> handle) const</td></tr>
<tr class="memdesc:a0524a8fb3d8fd8c1c5735e89e06f4cc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the component (read-only) which stores the corresponding opengl backend objects for the resource corresponding to the handle.  <a href="classtz_1_1gl_1_1_resource_storage.html#a0524a8fb3d8fd8c1c5735e89e06f4cc7">More...</a><br /></td></tr>
<tr class="separator:a0524a8fb3d8fd8c1c5735e89e06f4cc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af857b06a412725bf9e9e930ad07cce34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtz_1_1gl_1_1_i_component.html">IComponent</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#af857b06a412725bf9e9e930ad07cce34">get_component</a> (<a class="el" href="classtz_1_1_handle.html">ResourceHandle</a> handle)</td></tr>
<tr class="memdesc:af857b06a412725bf9e9e930ad07cce34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the component which stores the corresponding opengl backend objects for the resource corresponding to the handle.  <a href="classtz_1_1gl_1_1_resource_storage.html#af857b06a412725bf9e9e930ad07cce34">More...</a><br /></td></tr>
<tr class="separator:af857b06a412725bf9e9e930ad07cce34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3143c4d36dea17caa0dd161babdbdc11"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#a3143c4d36dea17caa0dd161babdbdc11">resource_count_of</a> (<a class="el" href="group__tz__gl2__res.html#gac6834632961a6223450b780b32ced684">ResourceType</a> type) const</td></tr>
<tr class="memdesc:a3143c4d36dea17caa0dd161babdbdc11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the number of resources stored of the given type.  <a href="classtz_1_1gl_1_1_resource_storage.html#a3143c4d36dea17caa0dd161babdbdc11">More...</a><br /></td></tr>
<tr class="separator:a3143c4d36dea17caa0dd161babdbdc11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ec6a817308661b6e404db1babb18a86"><td class="memItemLeft" align="right" valign="top"><a id="a3ec6a817308661b6e404db1babb18a86" name="a3ec6a817308661b6e404db1babb18a86"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>bind_buffers</b> ()</td></tr>
<tr class="memdesc:a3ec6a817308661b6e404db1babb18a86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bind all buffer resources to their expected resource ids. <br /></td></tr>
<tr class="separator:a3ec6a817308661b6e404db1babb18a86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b2bd3c377b64494f7058a0e44174e49"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#a9b2bd3c377b64494f7058a0e44174e49">bind_image_buffer</a> ()</td></tr>
<tr class="memdesc:a9b2bd3c377b64494f7058a0e44174e49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Images are converted into bindless texture handles which are then all stored within a secret bespoke SSBO (this does not count as a buffer resource however).  <a href="classtz_1_1gl_1_1_resource_storage.html#a9b2bd3c377b64494f7058a0e44174e49">More...</a><br /></td></tr>
<tr class="separator:a9b2bd3c377b64494f7058a0e44174e49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af01111f8a9e475eda5c82c3487237745"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#af01111f8a9e475eda5c82c3487237745">ResourceStorage</a> (const <a class="el" href="classtz_1_1gl_1_1_renderer_info_common.html">RendererInfoVulkan</a> &amp;info, const <a class="el" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html">vk2::LogicalDevice</a> &amp;ldev, std::size_t frame_in_flight_count)</td></tr>
<tr class="memdesc:af01111f8a9e475eda5c82c3487237745"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create storage for a set of existing resources.  <a href="classtz_1_1gl_1_1_resource_storage.html#af01111f8a9e475eda5c82c3487237745">More...</a><br /></td></tr>
<tr class="separator:af01111f8a9e475eda5c82c3487237745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0524a8fb3d8fd8c1c5735e89e06f4cc7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classtz_1_1gl_1_1_i_component.html">IComponent</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#a0524a8fb3d8fd8c1c5735e89e06f4cc7">get_component</a> (<a class="el" href="classtz_1_1_handle.html">ResourceHandle</a> handle) const</td></tr>
<tr class="memdesc:a0524a8fb3d8fd8c1c5735e89e06f4cc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the component (read-only) which stores the corresponding vulkan backend objects for the resource corresponding to the handle.  <a href="classtz_1_1gl_1_1_resource_storage.html#a0524a8fb3d8fd8c1c5735e89e06f4cc7">More...</a><br /></td></tr>
<tr class="separator:a0524a8fb3d8fd8c1c5735e89e06f4cc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af857b06a412725bf9e9e930ad07cce34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtz_1_1gl_1_1_i_component.html">IComponent</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#af857b06a412725bf9e9e930ad07cce34">get_component</a> (<a class="el" href="classtz_1_1_handle.html">ResourceHandle</a> handle)</td></tr>
<tr class="memdesc:af857b06a412725bf9e9e930ad07cce34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the component which stores the corresponding vulkan backend objects for the resource corresponding to the handle.  <a href="classtz_1_1gl_1_1_resource_storage.html#af857b06a412725bf9e9e930ad07cce34">More...</a><br /></td></tr>
<tr class="separator:af857b06a412725bf9e9e930ad07cce34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee19c3bfdae5d18bdda04f68afea3565"><td class="memItemLeft" align="right" valign="top"><a id="aee19c3bfdae5d18bdda04f68afea3565" name="aee19c3bfdae5d18bdda04f68afea3565"></a>
const <a class="el" href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout.html">vk2::DescriptorLayout</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>get_descriptor_layout</b> () const</td></tr>
<tr class="memdesc:aee19c3bfdae5d18bdda04f68afea3565"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the descriptor layout representing the shader resources used by the renderer. <br /></td></tr>
<tr class="separator:aee19c3bfdae5d18bdda04f68afea3565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9becf5414f35a43f1df800c958d66f59"><td class="memItemLeft" align="right" valign="top"><a id="a9becf5414f35a43f1df800c958d66f59" name="a9becf5414f35a43f1df800c958d66f59"></a>
std::span&lt; const <a class="el" href="classtz_1_1gl_1_1vk2_1_1_descriptor_set.html">vk2::DescriptorSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>get_descriptor_sets</b> () const</td></tr>
<tr class="memdesc:a9becf5414f35a43f1df800c958d66f59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a view into the array of descriptor sets. <br /></td></tr>
<tr class="separator:a9becf5414f35a43f1df800c958d66f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b90cf9f961f2fbd7816aa1e49b5de4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#a2b90cf9f961f2fbd7816aa1e49b5de4e">notify_image_recreated</a> (<a class="el" href="classtz_1_1_handle.html">tz::gl::ResourceHandle</a> image_resource_handle)</td></tr>
<tr class="memdesc:a2b90cf9f961f2fbd7816aa1e49b5de4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifies that an ImageComponent at the provided handle has had its underlying <a class="el" href="classtz_1_1gl_1_1vk2_1_1_image.html" title="Represents an Image owned by the Vulkan API.">vk2::Image</a> re-seated.  <a href="classtz_1_1gl_1_1_resource_storage.html#a2b90cf9f961f2fbd7816aa1e49b5de4e">More...</a><br /></td></tr>
<tr class="separator:a2b90cf9f961f2fbd7816aa1e49b5de4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37cf96b627821f52dfecb161470b186"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#af37cf96b627821f52dfecb161470b186">sync_descriptors</a> (bool write_everything)</td></tr>
<tr class="memdesc:af37cf96b627821f52dfecb161470b186"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates all relevant descriptors.  <a href="classtz_1_1gl_1_1_resource_storage.html#af37cf96b627821f52dfecb161470b186">More...</a><br /></td></tr>
<tr class="separator:af37cf96b627821f52dfecb161470b186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9dd63dc7c7a8635aa6cfc4c4b2c5c40"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#ac9dd63dc7c7a8635aa6cfc4c4b2c5c40">empty</a> () const</td></tr>
<tr class="memdesc:ac9dd63dc7c7a8635aa6cfc4c4b2c5c40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query as to whether there are any resources or not.  <a href="classtz_1_1gl_1_1_resource_storage.html#ac9dd63dc7c7a8635aa6cfc4c4b2c5c40">More...</a><br /></td></tr>
<tr class="separator:ac9dd63dc7c7a8635aa6cfc4c4b2c5c40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99fc67dff012a832a3180cccfc328be7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html#a99fc67dff012a832a3180cccfc328be7">write_padded_image_data</a> ()</td></tr>
<tr class="memdesc:a99fc67dff012a832a3180cccfc328be7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This must happen every frame.  <a href="classtz_1_1gl_1_1_resource_storage.html#a99fc67dff012a832a3180cccfc328be7">More...</a><br /></td></tr>
<tr class="separator:a99fc67dff012a832a3180cccfc328be7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Copies all resource data from upon creation and handles resource and component lifetimes. </p>
<p >Copies all resource data from a <a class="el" href="classtz_1_1gl_1_1_renderer_vulkan.html" title="Renderer implementation which heavily calls into the backend at Vulkan Backend.">RendererVulkan</a> when it is created, and copies it into its own memory so that the user doesn't need to worry about resource lifetimes.</p>
<p >Also exposes said copied resources and components to the renderer.</p>
<p >Also exposes the copied resources to the <a class="el" href="classtz_1_1gl_1_1_renderer_vulkan.html" title="Renderer implementation which heavily calls into the backend at Vulkan Backend.">RendererVulkan</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab8eedf45c9147a02ee1af0ae6c7951cf" name="ab8eedf45c9147a02ee1af0ae6c7951cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8eedf45c9147a02ee1af0ae6c7951cf">&#9670;&nbsp;</a></span>ResourceStorage() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tz::gl::ResourceStorage::ResourceStorage </td>
          <td>(</td>
          <td class="paramtype">std::span&lt; const <a class="el" href="classtz_1_1gl_1_1_i_resource.html">IResource</a> *const &gt;&#160;</td>
          <td class="paramname"><em>resources</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::span&lt; const <a class="el" href="classtz_1_1gl_1_1_i_component.html">IComponent</a> *const &gt;&#160;</td>
          <td class="paramname"><em>components</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create storage for a set of existing resources. </p>
<p >All existing ResourceHandles referencing any of the provided resources will continue to be valid when passed to the <a class="el" href="classtz_1_1gl_1_1_renderer_o_g_l.html" title="Renderer implementation which heavily calls into the backend at OpenGL Backend.">RendererOGL</a>. However, it will reference the copy of said resource which is created during construction of this object. This means users are able to and encouraged to cache their ResourceHandles when populating RendererInfoOGL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resources</td><td>A view into an array of existing resources. All of these will be copies into a separate storage, meaning the elements of the span are allowed to reach the end of their lifetime after the storage has been constructed, because they will have been cloned. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af01111f8a9e475eda5c82c3487237745" name="af01111f8a9e475eda5c82c3487237745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af01111f8a9e475eda5c82c3487237745">&#9670;&nbsp;</a></span>ResourceStorage() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tz::gl::ResourceStorage::ResourceStorage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtz_1_1gl_1_1_renderer_info_common.html">RendererInfoVulkan</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html">vk2::LogicalDevice</a> &amp;&#160;</td>
          <td class="paramname"><em>ldev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>frame_in_flight_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create storage for a set of existing resources. </p>
<p >All existing ResourceHandles referencing any of the provided resources will continue to be valid when passed to the <a class="el" href="classtz_1_1gl_1_1_renderer_vulkan.html" title="Renderer implementation which heavily calls into the backend at Vulkan Backend.">RendererVulkan</a>. However, it will reference the copy of said resource which is created during construction. This means users are able and encouraged to cache their ResourceHandles when populating RendererInfoVulkan.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resources</td><td>A view into an array of existing resources. All of these will be copied into separate store, meaning the lifetime of the elements of the span need not last beyond this constructor's execution. </td></tr>
    <tr><td class="paramname">ldev</td><td>Vulkan LogicalDevice, this will be used to handle the various components and vulkan descriptor shenanigans. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9b2bd3c377b64494f7058a0e44174e49" name="a9b2bd3c377b64494f7058a0e44174e49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b2bd3c377b64494f7058a0e44174e49">&#9670;&nbsp;</a></span>bind_image_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tz::gl::ResourceStorage::bind_image_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Images are converted into bindless texture handles which are then all stored within a secret bespoke SSBO (this does not count as a buffer resource however). </p>
<p >This binds that SSBO to the resource id equal to the list of images (this will be equal to the total number of buffer resources). </p>

</div>
</div>
<a id="ac9dd63dc7c7a8635aa6cfc4c4b2c5c40" name="ac9dd63dc7c7a8635aa6cfc4c4b2c5c40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9dd63dc7c7a8635aa6cfc4c4b2c5c40">&#9670;&nbsp;</a></span>empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tz::gl::ResourceStorage::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query as to whether there are any resources or not. </p>
<dl class="section return"><dt>Returns</dt><dd>True if there is at least one buffer or image resource, otherwise false. This includes resource references. </dd></dl>

</div>
</div>
<a id="af857b06a412725bf9e9e930ad07cce34" name="af857b06a412725bf9e9e930ad07cce34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af857b06a412725bf9e9e930ad07cce34">&#9670;&nbsp;</a></span>get_component() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtz_1_1gl_1_1_i_component.html">IComponent</a> * tz::gl::ResourceStorage::get_component </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtz_1_1_handle.html">ResourceHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the component which stores the corresponding opengl backend objects for the resource corresponding to the handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td><a class="el" href="classtz_1_1_handle.html" title="Represents a generic opaque handle.">Handle</a> whose resource's component needs to be retrieved. The handle must have referred to one of the initial resources passed to the constructor, otherwise the behaviour is undefined. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af857b06a412725bf9e9e930ad07cce34" name="af857b06a412725bf9e9e930ad07cce34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af857b06a412725bf9e9e930ad07cce34">&#9670;&nbsp;</a></span>get_component() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtz_1_1gl_1_1_i_component.html">IComponent</a> * tz::gl::ResourceStorage::get_component </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtz_1_1_handle.html">ResourceHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the component which stores the corresponding vulkan backend objects for the resource corresponding to the handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td><a class="el" href="classtz_1_1_handle.html" title="Represents a generic opaque handle.">Handle</a> whose resource's component needs to be retrieved. The handle must have referred to one of the initial resources passed to the constructor, otherwise the behaviour is undefined. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0524a8fb3d8fd8c1c5735e89e06f4cc7" name="a0524a8fb3d8fd8c1c5735e89e06f4cc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0524a8fb3d8fd8c1c5735e89e06f4cc7">&#9670;&nbsp;</a></span>get_component() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classtz_1_1gl_1_1_i_component.html">IComponent</a> * tz::gl::ResourceStorage::get_component </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtz_1_1_handle.html">ResourceHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the component (read-only) which stores the corresponding opengl backend objects for the resource corresponding to the handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td><a class="el" href="classtz_1_1_handle.html" title="Represents a generic opaque handle.">Handle</a> whose resource's component needs to be retrieved. The handle must have referred to one of the initial resources passed to the constructor, otherwise the behaviour is undefined. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0524a8fb3d8fd8c1c5735e89e06f4cc7" name="a0524a8fb3d8fd8c1c5735e89e06f4cc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0524a8fb3d8fd8c1c5735e89e06f4cc7">&#9670;&nbsp;</a></span>get_component() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classtz_1_1gl_1_1_i_component.html">IComponent</a> * tz::gl::ResourceStorage::get_component </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtz_1_1_handle.html">ResourceHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the component (read-only) which stores the corresponding vulkan backend objects for the resource corresponding to the handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td><a class="el" href="classtz_1_1_handle.html" title="Represents a generic opaque handle.">Handle</a> whose resource's component needs to be retrieved. The handle must have referred to one of the initial resources passed to the constructor, otherwise the behaviour is undefined. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2b90cf9f961f2fbd7816aa1e49b5de4e" name="a2b90cf9f961f2fbd7816aa1e49b5de4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b90cf9f961f2fbd7816aa1e49b5de4e">&#9670;&nbsp;</a></span>notify_image_recreated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tz::gl::ResourceStorage::notify_image_recreated </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtz_1_1_handle.html">tz::gl::ResourceHandle</a>&#160;</td>
          <td class="paramname"><em>image_resource_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notifies that an ImageComponent at the provided handle has had its underlying <a class="el" href="classtz_1_1gl_1_1vk2_1_1_image.html" title="Represents an Image owned by the Vulkan API.">vk2::Image</a> re-seated. </p>
<p >This recreates any necessary image views. </p>

</div>
</div>
<a id="a3143c4d36dea17caa0dd161babdbdc11" name="a3143c4d36dea17caa0dd161babdbdc11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3143c4d36dea17caa0dd161babdbdc11">&#9670;&nbsp;</a></span>resource_count_of()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t tz::gl::ResourceStorage::resource_count_of </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__tz__gl2__res.html#gac6834632961a6223450b780b32ced684">ResourceType</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the number of resources stored of the given type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type whose quantity should be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of resources matching the provided type. </dd></dl>

</div>
</div>
<a id="af37cf96b627821f52dfecb161470b186" name="af37cf96b627821f52dfecb161470b186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37cf96b627821f52dfecb161470b186">&#9670;&nbsp;</a></span>sync_descriptors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tz::gl::ResourceStorage::sync_descriptors </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>write_everything</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates all relevant descriptors. </p>
<p >If buffers are resized for example, their underlying <a class="el" href="classtz_1_1gl_1_1vk2_1_1_buffer.html" title="Represents a linear array of data which can be used for various purposes.">vk2::Buffer</a> has been re-seated and thus the descriptors need to be re-synced. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">write_everything</td><td>If true, image component views are also written. This should only need to happen during renderer construction or if an image component renderer edit is being performed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a99fc67dff012a832a3180cccfc328be7" name="a99fc67dff012a832a3180cccfc328be7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99fc67dff012a832a3180cccfc328be7">&#9670;&nbsp;</a></span>write_padded_image_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tz::gl::ResourceStorage::write_padded_image_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This must happen every frame. </p>
<p >For each dynamic image resource, pad the current data and update the mapped data. This is because <a class="el" href="classtz_1_1gl_1_1vk2_1_1_image.html" title="Represents an Image owned by the Vulkan API.">vk2::Image</a> mappings have an implementation-defined row padding, which this function is responsible for correcting. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>tz</b></li><li class="navelem"><b>gl</b></li><li class="navelem"><a class="el" href="classtz_1_1gl_1_1_resource_storage.html">ResourceStorage</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
