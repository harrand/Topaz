assert ::= func(expr : bool, errmsg : u8&) -> v0
{
	my_srcloc ::= srcloc_current();
	if(!expr)
	{
		puts("error at ");
		puts(my_srcloc.file);
		putchar(' ');
		puts(my_srcloc.function);
		putchar('(');
		putuint(my_srcloc.line);
		putchar(':');
		putuint(my_srcloc.column);
		putchar(')');
		putchar(':');
		putchar(' ');
		puts(errmsg);
		putchar(10);
		__debugbreak();
	}
};

== build ==
{
	add_source_file("src/io.psy");
	add_source_file("src/string.psy");
}
