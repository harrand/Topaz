<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Topaz: src/gl/impl/backend/vk2/command.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Topaz<span id="projectnumber">&#160;3.2</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('command_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">command.cpp</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &quot;gl/impl/backend/vk2/framebuffer.hpp&quot;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#if TZ_VULKAN</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &quot;gl/impl/backend/vk2/render_pass.hpp&quot;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &quot;gl/impl/backend/vk2/command.hpp&quot;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="keyword">namespace </span>tz::gl::vk2</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span>{</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording_1_1_render_pass_run.html#a0d3262f04167d4a6b246f93f2cda069f">    9</a></span>    <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording_1_1_render_pass_run.html#a0d3262f04167d4a6b246f93f2cda069f">CommandBufferRecording::RenderPassRun::RenderPassRun</a>(<a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html">Framebuffer</a>&amp; framebuffer, <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html">CommandBufferRecording</a>&amp; recording, <a class="code hl_class" href="classtz_1_1_vector.html">tz::Vec4</a> clear_colour):</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span>    framebuffer(&amp;framebuffer),</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>    recording(&amp;recording)</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>    {</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>        VkClearValue colour_clear{.color = {.float32 = {clear_colour[0], clear_colour[1], clear_colour[2], clear_colour[3]}}};</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>        <span class="keyword">constexpr</span> VkClearValue depth_clear{.depthStencil = {1.0f, 0}};</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>        std::vector&lt;VkClearValue&gt; clear_values(framebuffer.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html#ab44c9ebe357dff3d89030dd465ebd2c1">get_attachment_views</a>().length());</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>        <span class="keywordflow">for</span>(std::size_t i = 0; i &lt; framebuffer.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html#ab44c9ebe357dff3d89030dd465ebd2c1">get_attachment_views</a>().length(); i++)</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>        {</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>            <span class="keywordflow">switch</span>(framebuffer.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html#ab44c9ebe357dff3d89030dd465ebd2c1">get_attachment_views</a>()[i]-&gt;get_aspect())</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>            {</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>                <span class="keywordflow">case</span> ImageAspect::Colour:</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>                    clear_values[i] = colour_clear;</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>                <span class="keywordflow">case</span> ImageAspect::Depth:</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>                    clear_values[i] = depth_clear;</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>            }</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>        }</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>        VkRenderPassBeginInfo begin</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>        {</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>            .sType = VK_STRUCTURE_TYPE_RENDER_PASS_BEGIN_INFO,</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>            .pNext = <span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>            .renderPass = this-&gt;framebuffer-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html#ab59610c1f9b168a6f133232a0e6d98b9">get_pass</a>().native(),</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>            .framebuffer = this-&gt;framebuffer-&gt;native(),</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>            .renderArea =</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>            {</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>                .offset = {0, 0},</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>                .extent =</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>                {</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>                    .width = this-&gt;framebuffer-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html#aab4cfdb7324a80b83b84249bd80e2610">get_dimensions</a>()[0],</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>                    .height = this-&gt;framebuffer-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html#aab4cfdb7324a80b83b84249bd80e2610">get_dimensions</a>()[1]</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>                }</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>            },</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>            .clearValueCount = <span class="keyword">static_cast&lt;</span>std::uint32_t<span class="keyword">&gt;</span>(clear_values.size()),</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>            .pClearValues = clear_values.<a class="code hl_function" href="classtz_1_1_vector.html#a21a9c99453bdc876c9197dd3dad760f1">data</a>()</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>        };</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>        vkCmdBeginRenderPass(this-&gt;recording-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>().native(), &amp;begin, VK_SUBPASS_CONTENTS_INLINE);</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>        this-&gt;recording-&gt;register_command</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>        (<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_begin_render_pass.html">VulkanCommand::BeginRenderPass</a>{</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>            .<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_begin_render_pass.html#a0d726e5259950517b292d3a0620db647">framebuffer</a> = this-&gt;framebuffer</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>        });</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    }</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    CommandBufferRecording::RenderPassRun::~RenderPassRun()</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    {</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        vkCmdEndRenderPass(this-&gt;recording-&gt;get_command_buffer().native());</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        this-&gt;recording-&gt;register_command</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        (<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_end_render_pass.html">VulkanCommand::EndRenderPass</a>{</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>            .<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_end_render_pass.html#ac32dec8f9c51d60004dd2844a17a3692">framebuffer</a> = this-&gt;framebuffer</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>        });</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    }</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    CommandBufferRecording::CommandBufferRecording(CommandBuffer&amp; command_buffer):</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    command_buffer(&amp;command_buffer)</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    {</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        VkCommandBufferBeginInfo begin</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        {</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>            .sType = VK_STRUCTURE_TYPE_COMMAND_BUFFER_BEGIN_INFO,</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>            .pNext = <span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>            .flags = 0,</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>            .pInheritanceInfo = <span class="keyword">nullptr</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>        };</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>        VkResult res = vkBeginCommandBuffer(this-&gt;command_buffer-&gt;native(), &amp;begin);</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        <span class="keywordflow">switch</span>(res)</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        {</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>            <span class="keywordflow">case</span> VK_SUCCESS:</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>                this-&gt;command_buffer-&gt;set_recording(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>            <span class="keywordflow">case</span> VK_ERROR_OUT_OF_HOST_MEMORY:</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>                <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Failed to create CommandBufferRecording because we ran out of host memory (RAM). Please ensure that your system meets the minimum requirements.&quot;</span>);</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>            <span class="keywordflow">case</span> VK_ERROR_OUT_OF_DEVICE_MEMORY:</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>                <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Failed to create CommandBufferRecording because we ran out of device memory (VRAM). Please ensure that your system meets the minimum requirements.&quot;</span>);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>                <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Failed to create CommandBufferRecording but cannot determine why. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        }</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    }</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    CommandBufferRecording::CommandBufferRecording(CommandBufferRecording&amp;&amp; move):</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    command_buffer(nullptr)</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        *<span class="keyword">this</span> = std::move(move);</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    }</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    CommandBufferRecording::~CommandBufferRecording()</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    {</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        <span class="keywordflow">if</span>(this-&gt;command_buffer != <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        {</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>            vkEndCommandBuffer(this-&gt;command_buffer-&gt;native());</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>            this-&gt;command_buffer-&gt;set_recording(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        }</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    }</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    CommandBufferRecording&amp; CommandBufferRecording::operator=(CommandBufferRecording&amp;&amp; rhs)</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    {</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        std::swap(this-&gt;command_buffer, rhs.command_buffer);</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    }</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a8bbeeef67dcb9b04b17bf5abde907e01">  112</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a8bbeeef67dcb9b04b17bf5abde907e01">CommandBufferRecording::bind_pipeline</a>(<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_pipeline.html">VulkanCommand::BindPipeline</a> command)</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_pipeline.html#aef79d34d9a00c3a1ec32fdd643c131d8">pipeline</a> != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;BindPipeline Command contained nullptr GraphicsPipeline&quot;</span>);</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        this-&gt;register_command(command);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        vkCmdBindPipeline(this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>().native(), <span class="keyword">static_cast&lt;</span>VkPipelineBindPoint<span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_pipeline.html#a8c83b30431ae2f516946fe0e2ca20559">pipeline_context</a>), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_pipeline.html#aef79d34d9a00c3a1ec32fdd643c131d8">pipeline</a>-&gt;native());</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    }</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#acd2074bf1faa8b35502ec823cfde1abf">  120</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#acd2074bf1faa8b35502ec823cfde1abf">CommandBufferRecording::draw</a>(<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw.html">VulkanCommand::Draw</a> command)</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    {</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>        this-&gt;register_command(command);</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        vkCmdDraw(this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>().native(), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw.html#aa20ea4668944d738431db311f2a67ea5">vertex_count</a>, command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw.html#a365324b668b406ae92f340c15ecd30cb">instance_count</a>, command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw.html#a3bc0139c63d58bcbc3fada3a6ee79453">first_vertex</a>, command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw.html#a2fdd5ea4ef43f85f57e99d5c8b0258c2">first_instance</a>);</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#ac9e417b34e2a883b34ab2099a82acd54">  126</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#ac9e417b34e2a883b34ab2099a82acd54">CommandBufferRecording::bind_descriptor_sets</a>(<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html">VulkanCommand::BindDescriptorSets</a> command)</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    {</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>        this-&gt;register_command(command);</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        std::vector&lt;DescriptorSet::NativeType&gt; set_natives(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#a15c9871e29fa1822fe3179b3a584e99a">descriptor_sets</a>.length());</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        std::transform(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#a15c9871e29fa1822fe3179b3a584e99a">descriptor_sets</a>.begin(), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#a15c9871e29fa1822fe3179b3a584e99a">descriptor_sets</a>.end(), set_natives.begin(), [](<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_descriptor_set.html">DescriptorSet</a>* set){return set-&gt;native();});</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        vkCmdBindDescriptorSets(this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>().native(), <span class="keyword">static_cast&lt;</span>VkPipelineBindPoint<span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#a86f62f989223c979fc35e98b4d88bcd1">context</a>), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#ab03d3609122fe1aff4120199add3d999">pipeline_layout</a>-&gt;native(), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#a0e83b6b02e05f5a4278be3f8476df2be">first_set_id</a>, command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#a15c9871e29fa1822fe3179b3a584e99a">descriptor_sets</a>.length(), set_natives.data(), 0, <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    }</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> </div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a42ed45f3524b6bfe1c98de341b8b88de">  135</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a42ed45f3524b6bfe1c98de341b8b88de">CommandBufferRecording::buffer_copy_buffer</a>(<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html">VulkanCommand::BufferCopyBuffer</a> command)</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    {</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html#a8259921b2c071f7edf4d7e2c6e0999cb">src</a> != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;BufferCopyBuffer: Source buffer was nullptr&quot;</span>);</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html#ab25083e4d84c146bfb7cf38f5f37dc0b">dst</a> != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;BufferCopyBuffer: Destination buffer was nullptr&quot;</span>);</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html#a8259921b2c071f7edf4d7e2c6e0999cb">src</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#ac84676ea5d9d5f459cb9c385a1032729">get_usage</a>().<a class="code hl_function" href="classtz_1_1_enum_field.html#adf60f68be430993c223e091fa959e0e4">contains</a>(<a class="code hl_enumvalue" href="group__tz__gl__vk__buffer.html#gga0c6ff78fc058c3e209ba59dc1b2c02a6a8c4df84c9e73cf86122034f85efac361">BufferUsage::TransferSource</a>), <span class="stringliteral">&quot;BufferCopyBuffer: Source buffer did not contain BufferUsage::TransferSource&quot;</span>);</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html#ab25083e4d84c146bfb7cf38f5f37dc0b">dst</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#ac84676ea5d9d5f459cb9c385a1032729">get_usage</a>().<a class="code hl_function" href="classtz_1_1_enum_field.html#adf60f68be430993c223e091fa959e0e4">contains</a>(<a class="code hl_enumvalue" href="group__tz__gl__vk__buffer.html#gga0c6ff78fc058c3e209ba59dc1b2c02a6a9cecc9065ff3b79e09391fcbfb7b9ce9">BufferUsage::TransferDestination</a>), <span class="stringliteral">&quot;BufferCopyBuffer: Destination buffer did not contain BufferUsage::TransferDestination&quot;</span>);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        this-&gt;register_command(command);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        VkBufferCopy cpy</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        {</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>            .srcOffset = 0,</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>            .dstOffset = 0,</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>            .size = std::min(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html#a8259921b2c071f7edf4d7e2c6e0999cb">src</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#a64c97088f04d5773f96498281c9332f9">size</a>(), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html#ab25083e4d84c146bfb7cf38f5f37dc0b">dst</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#a64c97088f04d5773f96498281c9332f9">size</a>())</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>        };</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>        vkCmdCopyBuffer(this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>().native(), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html#a8259921b2c071f7edf4d7e2c6e0999cb">src</a>-&gt;native(), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html#ab25083e4d84c146bfb7cf38f5f37dc0b">dst</a>-&gt;native(), 1, &amp;cpy);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    }</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a245b299b9c5cf4248e7ae19c63f63a8d">  152</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a245b299b9c5cf4248e7ae19c63f63a8d">CommandBufferRecording::buffer_copy_image</a>(<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html">VulkanCommand::BufferCopyImage</a> command)</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    {</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#adc3f50815eeb1485c20706f14b8db96d">src</a> != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;BufferCopyImage: Source buffer was nullptr&quot;</span>);</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#ae77ba4232185e07315aba61908c4e58c">dst</a> != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;BufferCopyImage: Destination image was nullptr&quot;</span>);</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#adc3f50815eeb1485c20706f14b8db96d">src</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#ac84676ea5d9d5f459cb9c385a1032729">get_usage</a>().<a class="code hl_function" href="classtz_1_1_enum_field.html#adf60f68be430993c223e091fa959e0e4">contains</a>(<a class="code hl_enumvalue" href="group__tz__gl__vk__buffer.html#gga0c6ff78fc058c3e209ba59dc1b2c02a6a8c4df84c9e73cf86122034f85efac361">BufferUsage::TransferSource</a>), <span class="stringliteral">&quot;BufferCopyImage: Source buffer did not contain BufferUsage::TransferSource&quot;</span>);</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span> </div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>        <span class="comment">// So ideally we could just use command.dst-&gt;get_layout(). However, it&#39;s very possible this recording contains a previous command which will have changed that layout. We will check to make sure. If so, we use the updated layout (even though it hasn&#39;t happened yet), otherwise we just use the images current layout.</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        <a class="code hl_enumeration" href="group__tz__gl__vk__image.html#ga4ca55be3d1c101900d800a78deeb595f">ImageLayout</a> img_layout = command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#ae77ba4232185e07315aba61908c4e58c">dst</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_image.html#a245936d112b069e1e36da99391af5476">get_layout</a>();</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code hl_typedef" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command.html#a0645efe44466b3314eace8272ffbf549">VulkanCommand::Variant</a>&amp; previous_command : this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>().get_recorded_commands())</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        {</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>            std::visit([&amp;img_layout, &amp;command](<span class="keyword">auto</span>&amp;&amp; arg)</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>            {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>                <span class="keyword">using</span> T = std::decay_t&lt;<span class="keyword">decltype</span>(arg)&gt;;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>                <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(std::is_same_v&lt;T, VulkanCommand::TransitionImageLayout&gt;)</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>                {</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>                    <span class="comment">// If the image layout will have been transitioned, then use the updated layout.</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>                    <span class="keywordflow">if</span>(arg.image == command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#ae77ba4232185e07315aba61908c4e58c">dst</a>)</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>                    {</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>                        img_layout = arg.target_layout;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>                    }</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>                }</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(std::is_same_v&lt;T, VulkanCommand::EndRenderPass&gt;)</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                {</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>                    <span class="comment">// If some render pass has since ended, the layout may have changed if it was an attachment.</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                    <span class="keyword">auto</span> get_framebuffer_attachment_layout = [&amp;arg](std::size_t attachment_idx)</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>                    {</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>                        <span class="keywordflow">return</span> arg.framebuffer-&gt;get_pass().get_info().attachments[attachment_idx].final_layout;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>                    };</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>                    <span class="comment">// We end a framebuffer, which has some number of attachments. Firstly we check if any of them are this image. If it is, we query the render pass to find out what the layout was meant to be.</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>                    <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1_basic_list.html">tz::BasicList&lt;ImageView*&gt;</a>&amp; framebuffer_attachments = arg.framebuffer-&gt;get_attachment_views();</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>                    <span class="keyword">auto</span> iter = std::find_if(framebuffer_attachments.<a class="code hl_function" href="classtz_1_1_basic_list.html#a2e7b98d23d56f9370c54aabd4f402c4f">begin</a>(), framebuffer_attachments.<a class="code hl_function" href="classtz_1_1_basic_list.html#ada63442e7add7f1a66e06295f42947a9">end</a>(),</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>                    [&amp;command](<a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_image_view.html">ImageView</a>* <span class="keyword">const</span> &amp; view_ptr)-&gt;bool</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>                    {</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>                        return &amp;view_ptr-&gt;get_image() == command.dst;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>                    });</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>                    <span class="keywordflow">if</span>(iter != framebuffer_attachments.<a class="code hl_function" href="classtz_1_1_basic_list.html#ada63442e7add7f1a66e06295f42947a9">end</a>())</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>                    {</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>                        std::size_t attachment_idx = std::distance(framebuffer_attachments.<a class="code hl_function" href="classtz_1_1_basic_list.html#a2e7b98d23d56f9370c54aabd4f402c4f">begin</a>(), iter);</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>                        <span class="comment">// Now find out which layout that is.</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>                        img_layout = get_framebuffer_attachment_layout(attachment_idx);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>                    }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>                }</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>            }, previous_command);</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        }</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(img_layout == <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595fa9cecc9065ff3b79e09391fcbfb7b9ce9">ImageLayout::TransferDestination</a>, <span class="stringliteral">&quot;BufferCopyImage:: Destination image was not in TransferDestination ImageLayout, so it cannot be an, erm, transfer destination.&quot;</span>);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>        this-&gt;register_command(command);</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <a class="code hl_class" href="classtz_1_1_vector.html">tz::Vec2ui</a> img_dims = command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#ae77ba4232185e07315aba61908c4e58c">dst</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_image.html#adbf0f890ba7447627ae6c9b2bb797f2e">get_dimensions</a>();</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        VkBufferImageCopy cpy</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>        {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>            .bufferOffset = 0,</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            .bufferRowLength = 0,</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            .bufferImageHeight = 0,</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>            .imageSubresource =</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>            {</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>                .aspectMask = <span class="keyword">static_cast&lt;</span>VkImageAspectFlags<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="group__tz__gl__vk__graphics__pipeline__render__pass.html#ga93db24e9eb1cffe51979bd8a141ddc77">ImageAspectFlag</a><span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#a6e202dd142f2048d57785500b0764373">image_aspects</a>)),</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>                .mipLevel = 0,</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>                .baseArrayLayer = 0,</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>                .layerCount = 1</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>            },</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>            .imageOffset = VkOffset3D{.x = 0, .y = 0, .z = 0},</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>            .imageExtent = VkExtent3D{.width = img_dims[0], .height = img_dims[1], .depth = 1}</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>        };</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>        vkCmdCopyBufferToImage(this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>().native(), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#adc3f50815eeb1485c20706f14b8db96d">src</a>-&gt;native(), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#ae77ba4232185e07315aba61908c4e58c">dst</a>-&gt;native(), <span class="keyword">static_cast&lt;</span>VkImageLayout<span class="keyword">&gt;</span>(img_layout), 1, &amp;cpy);</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    }</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span> </div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#aa015012eda3e9de92f3a5adbaff798bd">  219</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#aa015012eda3e9de92f3a5adbaff798bd">CommandBufferRecording::bind_buffer</a>(<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_buffer.html">VulkanCommand::BindBuffer</a> command)</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_buffer.html#a39c702b7de862996bb627b65c485ffbd">buffer</a> != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;BindBuffer contained nullptr Buffer. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        Buffer::NativeType buf_native = command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_buffer.html#a39c702b7de862996bb627b65c485ffbd">buffer</a>-&gt;native();</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        VkDeviceSize offsets[] = {0};</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        <span class="keywordflow">if</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_buffer.html#a39c702b7de862996bb627b65c485ffbd">buffer</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#ac84676ea5d9d5f459cb9c385a1032729">get_usage</a>().<a class="code hl_function" href="classtz_1_1_enum_field.html#adf60f68be430993c223e091fa959e0e4">contains</a>(<a class="code hl_enumvalue" href="group__tz__gl__vk__buffer.html#gga0c6ff78fc058c3e209ba59dc1b2c02a6a10461f19cdb5aadba2fc9986be6400bd">BufferUsage::VertexBuffer</a>))</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>        {</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>            vkCmdBindVertexBuffers(this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>().native(), 0, 1, &amp;buf_native, offsets);</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        }</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_buffer.html#a39c702b7de862996bb627b65c485ffbd">buffer</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#ac84676ea5d9d5f459cb9c385a1032729">get_usage</a>().<a class="code hl_function" href="classtz_1_1_enum_field.html#adf60f68be430993c223e091fa959e0e4">contains</a>(<a class="code hl_enumvalue" href="group__tz__gl__vk__buffer.html#gga0c6ff78fc058c3e209ba59dc1b2c02a6a7c3895116254ff0417e58b6286de27c0">BufferUsage::IndexBuffer</a>))</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        {</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>            vkCmdBindIndexBuffer(this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>().native(), buf_native, 0, VK_INDEX_TYPE_UINT32);</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        }</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        {</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;BindBuffer contained a Buffer that was not a VertexBuffer nor IndexBuffer. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        }</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        this-&gt;register_command(command);</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    }</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    <span class="keywordtype">void</span> CommandBufferRecording::transition_image_layout(<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html">VulkanCommand::TransitionImageLayout</a> command)</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    {</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a1e8990d656299ed2c114569299dccc2c">image</a> != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;TransitionImageLayout contained nullptr Image&quot;</span>);</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        <span class="comment">// Given a list of mip-levels/array layers X:</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>        <span class="comment">// X.begin() -&gt; X.end() must be sequential with no gaps.</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>        <span class="comment">// i.e {-1, 0, 1, 2, 3} is fine {-1, 1, 2, 3} is not, neither is {-1, 2, 3, 0, 1}</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        <span class="comment">// Assert that neither of these are the case.</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>        <span class="keyword">auto</span> is_ascending_with_no_gaps_ui32 = [](<span class="keyword">auto</span> begin, <span class="keyword">auto</span> end)-&gt;<span class="keywordtype">bool</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>        {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>            std::vector&lt;std::uint32_t&gt; iota_version(std::distance(begin, end));</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>            std::iota(iota_version.begin(), iota_version.end(), *begin);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>            <span class="keywordflow">return</span> std::equal(begin, end, iota_version.begin());</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        };</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> </div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(is_ascending_with_no_gaps_ui32(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#ad3b165303278ffd2d8da71e26f53219b">affected_mip_levels</a>.<a class="code hl_function" href="classtz_1_1_basic_list.html#a2e7b98d23d56f9370c54aabd4f402c4f">begin</a>(), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#ad3b165303278ffd2d8da71e26f53219b">affected_mip_levels</a>.<a class="code hl_function" href="classtz_1_1_basic_list.html#ada63442e7add7f1a66e06295f42947a9">end</a>()), <span class="stringliteral">&quot;TransitionImageLayout contained list of affected mip levels of size %zu. However, the elements were not &#39;sequential without gaps&#39;.&quot;</span>, command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#ad3b165303278ffd2d8da71e26f53219b">affected_mip_levels</a>.<a class="code hl_function" href="classtz_1_1_basic_list.html#ace3c8c7e3f63908e3560e4822f057117">length</a>());</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(is_ascending_with_no_gaps_ui32(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#aeaac71f2af5dc6deb49315ceedd90b66">affected_layers</a>.<a class="code hl_function" href="classtz_1_1_basic_list.html#a2e7b98d23d56f9370c54aabd4f402c4f">begin</a>(), command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#aeaac71f2af5dc6deb49315ceedd90b66">affected_layers</a>.<a class="code hl_function" href="classtz_1_1_basic_list.html#ada63442e7add7f1a66e06295f42947a9">end</a>()), <span class="stringliteral">&quot;TransitionImageLayout contained list of affected array layers of size %zu. However, the elements were not &#39;sequential without gaps&#39;.&quot;</span>, command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#aeaac71f2af5dc6deb49315ceedd90b66">affected_layers</a>.<a class="code hl_function" href="classtz_1_1_basic_list.html#ace3c8c7e3f63908e3560e4822f057117">length</a>());</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span> </div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        VkImageSubresourceRange img_subres_range</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        {</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            .aspectMask = <span class="keyword">static_cast&lt;</span>VkImageAspectFlags<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="group__tz__gl__vk__graphics__pipeline__render__pass.html#ga93db24e9eb1cffe51979bd8a141ddc77">ImageAspectFlag</a><span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a222df56b11ad097bb6f2db067220b636">image_aspects</a>)),</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>            .baseMipLevel = command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#ad3b165303278ffd2d8da71e26f53219b">affected_mip_levels</a>.<a class="code hl_function" href="classtz_1_1_basic_list.html#a6d0097df502af3ed4e5b2ce760e759c2">front</a>(),</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>            .levelCount = <span class="keyword">static_cast&lt;</span>std::uint32_t<span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#ad3b165303278ffd2d8da71e26f53219b">affected_mip_levels</a>.<a class="code hl_function" href="classtz_1_1_basic_list.html#ace3c8c7e3f63908e3560e4822f057117">length</a>()),</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            .baseArrayLayer = command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#aeaac71f2af5dc6deb49315ceedd90b66">affected_layers</a>.<a class="code hl_function" href="classtz_1_1_basic_list.html#a6d0097df502af3ed4e5b2ce760e759c2">front</a>(),</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            .layerCount = <span class="keyword">static_cast&lt;</span>std::uint32_t<span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#aeaac71f2af5dc6deb49315ceedd90b66">affected_layers</a>.<a class="code hl_function" href="classtz_1_1_basic_list.html#ace3c8c7e3f63908e3560e4822f057117">length</a>())</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        };</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        this-&gt;register_command(command);</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        VkImageMemoryBarrier barrier</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>        {</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>            .sType = VK_STRUCTURE_TYPE_IMAGE_MEMORY_BARRIER,</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>            .pNext = <span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>            .srcAccessMask = <span class="keyword">static_cast&lt;</span>VkAccessFlags<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="group__tz__gl__vk__graphics__pipeline__render__pass.html#gaa5dd0142a36cd59d14dff54eed67c3df">AccessFlag</a><span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a16a08625b895a4a444b66e53a5a23410">source_access</a>)),</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>            .dstAccessMask = <span class="keyword">static_cast&lt;</span>VkAccessFlags<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="group__tz__gl__vk__graphics__pipeline__render__pass.html#gaa5dd0142a36cd59d14dff54eed67c3df">AccessFlag</a><span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a71a41f1c921b44f196c2b62e6fcc86e7">destination_access</a>)),</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>            .oldLayout = <span class="keyword">static_cast&lt;</span>VkImageLayout<span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a1e8990d656299ed2c114569299dccc2c">image</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_image.html#a245936d112b069e1e36da99391af5476">get_layout</a>()),</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>            .newLayout = <span class="keyword">static_cast&lt;</span>VkImageLayout<span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a8094be6bc811b9a3b58e1277bc2cd303">target_layout</a>),</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>            .srcQueueFamilyIndex = VK_QUEUE_FAMILY_IGNORED,</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>            .dstQueueFamilyIndex = VK_QUEUE_FAMILY_IGNORED,</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>            .image = command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a1e8990d656299ed2c114569299dccc2c">image</a>-&gt;native(),</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>            .subresourceRange = img_subres_range</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        };</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        vkCmdPipelineBarrier(this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>().native(), <span class="keyword">static_cast&lt;</span>VkPipelineStageFlags<span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a51d5bddfc6bee5894166f297d44def18">source_stage</a>), <span class="keyword">static_cast&lt;</span>VkPipelineStageFlags<span class="keyword">&gt;</span>(command.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#aa80a64c77476bf86fe4c7af2c2523119">destination_stage</a>), 0, 0, <span class="keyword">nullptr</span>, 0, <span class="keyword">nullptr</span>, 1, &amp;barrier);</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    }</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span> </div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">  284</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html">CommandBuffer</a>&amp; <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">CommandBufferRecording::get_command_buffer</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(this-&gt;command_buffer != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;CommandBufferRecording had nullptr CommandBuffer. Please submit a bug report&quot;</span>);</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        <span class="keywordflow">return</span> *this-&gt;command_buffer;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    }</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span> </div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html">CommandBuffer</a>&amp; <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">CommandBufferRecording::get_command_buffer</a>()</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>    {</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(this-&gt;command_buffer != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;CommandBufferRecording had nullptr CommandBuffer. Please submit a bug report&quot;</span>);</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        <span class="keywordflow">return</span> *this-&gt;command_buffer;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    }</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span> </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    <span class="keywordtype">void</span> CommandBufferRecording::register_command(<a class="code hl_typedef" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command.html#a0645efe44466b3314eace8272ffbf549">VulkanCommand::Variant</a> command)</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    {</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        CommandBuffer&amp; buf = this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">get_command_buffer</a>();</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(buf.is_recording(), <span class="stringliteral">&quot;CommandBufferRecording tried to register a command, but the CommandBuffer isn&#39;t actually recording. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        buf.add_command(command);</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    }</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#a123b44fb90533da0c9285a7dd1f7fe52">  303</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html">LogicalDevice</a>&amp; <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#a123b44fb90533da0c9285a7dd1f7fe52">CommandBuffer::get_device</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        <span class="keywordflow">return</span> this-&gt;owner_pool-&gt;get_device();</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    }</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span> </div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#ac914c5d21dc2fc919375b27fc1fc78f0">  308</a></span>    <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html">CommandBufferRecording</a> <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#ac914c5d21dc2fc919375b27fc1fc78f0">CommandBuffer::record</a>()</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    {</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(!this-&gt;recording, <span class="stringliteral">&quot;CommandBuffer already being recorded&quot;</span>);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        this-&gt;recorded_commands.clear();</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        <span class="keywordflow">return</span> {*<span class="keyword">this</span>};</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    }</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#a721538a81ab301429e1eea581ca9a012">  315</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#a721538a81ab301429e1eea581ca9a012">CommandBuffer::is_recording</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        <span class="keywordflow">return</span> this-&gt;recording;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#a67c7bfe9c4368600d35d8b8484b06972">  320</a></span>    std::size_t <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#a67c7bfe9c4368600d35d8b8484b06972">CommandBuffer::command_count</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        <span class="keywordflow">return</span> this-&gt;recorded_commands.size();</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    }</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span> </div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    std::span&lt;const VulkanCommand::Variant&gt; CommandBuffer::get_recorded_commands()<span class="keyword"> const</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        <span class="keywordflow">return</span> this-&gt;recorded_commands;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    }</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    CommandBuffer::NativeType CommandBuffer::native()<span class="keyword"> const</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        <span class="keywordflow">return</span> this-&gt;command_buffer;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    }</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span> </div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    <span class="keywordtype">void</span> CommandBuffer::set_recording(<span class="keywordtype">bool</span> recording)</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        this-&gt;recording = recording;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    }</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span> </div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <span class="keywordtype">void</span> CommandBuffer::add_command(<a class="code hl_typedef" href="structtz_1_1gl_1_1vk2_1_1_vulkan_command.html#a0645efe44466b3314eace8272ffbf549">VulkanCommand::Variant</a> command)</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>        this-&gt;recorded_commands.push_back(command);</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    }</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    CommandBuffer::CommandBuffer(<span class="keyword">const</span> CommandPool&amp; owner_pool, CommandBuffer::NativeType native):</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    command_buffer(native),</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    owner_pool(&amp;owner_pool),</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    recording(false)</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    {</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    }</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span> </div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno"><a class="line" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#acff115e3d6b614f7cd176afcf1f430a5">  353</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#acff115e3d6b614f7cd176afcf1f430a5">CommandPool::AllocationResult::success</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        <span class="keywordflow">return</span> this-&gt;<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#a1faad41ec78d1f46edab28ffa5111be2">type</a> == CommandPool::AllocationResult::AllocationResultType::Success;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    }</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span> </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    CommandPool::CommandPool(<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_command_pool_info.html">CommandPoolInfo</a> info):</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    pool(VK_NULL_HANDLE),</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    info(info)</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        VkCommandPoolCreateInfo create</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        {</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>            .sType = VK_STRUCTURE_TYPE_COMMAND_POOL_CREATE_INFO,</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>            .pNext = <span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>            .flags = <span class="keyword">static_cast&lt;</span>VkCommandPoolCreateFlags<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span>CommandPoolFlag<span class="keyword">&gt;</span>(info.flags)),</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            .queueFamilyIndex = this-&gt;info.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_command_pool_info.html#ad61f2476a6a318a6c77e147c43b84e8c">queue</a>-&gt;get_info().queue_family_idx</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        };</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span> </div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        VkResult res = vkCreateCommandPool(this-&gt;get_device().native(), &amp;create, <span class="keyword">nullptr</span>, &amp;this-&gt;pool);</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="keywordflow">switch</span>(res)</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>        {</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>            <span class="keywordflow">case</span> VK_SUCCESS:</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>                <span class="comment">// do nothing</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            <span class="keywordflow">case</span> VK_ERROR_OUT_OF_HOST_MEMORY:</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>                <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Failed to create CommandPool because we ran out of host memory (RAM). Please ensure that your system meets the minimum requirements.&quot;</span>);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>            <span class="keywordflow">case</span> VK_ERROR_OUT_OF_DEVICE_MEMORY:</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>                <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Failed to create CommandPool because we ran out of device memory (VRAM). Please ensure that your system meets the minimum requirements.&quot;</span>);</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>                <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Failed to create CommandPool but cannot determine why. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    }</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span> </div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    CommandPool::CommandPool(CommandPool&amp;&amp; move):</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    pool(VK_NULL_HANDLE),</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    info()</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    {</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>        *<span class="keyword">this</span> = std::move(move);</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    }</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    CommandPool::~CommandPool()</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    {</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        <span class="keywordflow">if</span>(this-&gt;pool != VK_NULL_HANDLE)</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        {</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>            vkDestroyCommandPool(this-&gt;get_device().native(), this-&gt;pool, <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>            this-&gt;pool = VK_NULL_HANDLE;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>        }</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    }</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span> </div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    CommandPool&amp; CommandPool::operator=(CommandPool&amp;&amp; rhs)</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    {</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        std::swap(this-&gt;pool, rhs.pool);</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        std::swap(this-&gt;info, rhs.info);</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    }</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span> </div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <span class="keyword">const</span> LogicalDevice&amp; CommandPool::get_device()<span class="keyword"> const</span></div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        <span class="keywordflow">return</span> this-&gt;info.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_command_pool_info.html#ad61f2476a6a318a6c77e147c43b84e8c">queue</a>-&gt;get_device();</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    }</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span> </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1vk2_1_1_command_pool.html#a791dba923c7069be7b684d58c62017fe">  416</a></span>    <a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html">CommandPool::AllocationResult</a> <a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_pool.html#a791dba923c7069be7b684d58c62017fe">CommandPool::allocate_buffers</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation.html">Allocation</a>&amp; alloc)</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    {</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        VkCommandBufferAllocateInfo create</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        {</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>            .sType = VK_STRUCTURE_TYPE_COMMAND_BUFFER_ALLOCATE_INFO,</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>            .pNext = <span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>            .commandPool = this-&gt;pool,</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            .level = VK_COMMAND_BUFFER_LEVEL_PRIMARY,</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>            .commandBufferCount = alloc.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation.html#ab94d776ad949320f02660f68b6e73da9">buffer_count</a></div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        };</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span> </div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>        std::vector&lt;CommandBuffer::NativeType&gt; cmd_buf_natives(alloc.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation.html#ab94d776ad949320f02660f68b6e73da9">buffer_count</a>);</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>        VkResult res = vkAllocateCommandBuffers(this-&gt;get_device().native(), &amp;create, cmd_buf_natives.data());</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        <a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html">CommandPool::AllocationResult</a> alloc_res;</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        <span class="keywordflow">switch</span>(res)</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        {</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>            <span class="keywordflow">case</span> VK_SUCCESS:</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>                alloc_res.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#a1faad41ec78d1f46edab28ffa5111be2">type</a> = CommandPool::AllocationResult::AllocationResultType::Success;</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>                <span class="keywordflow">for</span>(CommandBuffer::NativeType cmd_buf_native : cmd_buf_natives)</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>                {</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>                    alloc_res.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#a94d0ec11da42430225b873b63079c996">buffers</a>.add({*<span class="keyword">this</span>, cmd_buf_native});</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>                }</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>                alloc_res.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#a1faad41ec78d1f46edab28ffa5111be2">type</a> = CommandPool::AllocationResult::AllocationResultType::FatalError;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        }</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span> </div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>        <span class="keywordflow">return</span> alloc_res;</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    }</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span> </div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    CommandPool::NativeType CommandPool::native()<span class="keyword"> const</span></div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        <span class="keywordflow">return</span> this-&gt;pool;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    }</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span> </div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>}</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span> </div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span><span class="preprocessor">#endif </span><span class="comment">// TZ_VULKAN</span></div>
<div class="ttc" id="aclasstz_1_1_basic_list_html"><div class="ttname"><a href="classtz_1_1_basic_list.html">tz::BasicList</a></div><div class="ttdoc">Custom list, feature subset of std::vector.</div><div class="ttdef"><b>Definition:</b> <a href="basic__list_8hpp_source.html#l00020">basic_list.hpp:21</a></div></div>
<div class="ttc" id="aclasstz_1_1_basic_list_html_a2e7b98d23d56f9370c54aabd4f402c4f"><div class="ttname"><a href="classtz_1_1_basic_list.html#a2e7b98d23d56f9370c54aabd4f402c4f">tz::BasicList::begin</a></div><div class="ttdeci">Iterator begin()</div><div class="ttdoc">Retrieve an iterator to the beginning of the list.</div><div class="ttdef"><b>Definition:</b> <a href="basic__list_8hpp_source.html#l00143">basic_list.hpp:143</a></div></div>
<div class="ttc" id="aclasstz_1_1_basic_list_html_a6d0097df502af3ed4e5b2ce760e759c2"><div class="ttname"><a href="classtz_1_1_basic_list.html#a6d0097df502af3ed4e5b2ce760e759c2">tz::BasicList::front</a></div><div class="ttdeci">T &amp; front()</div><div class="ttdoc">Retrieve the first elements of the list.</div><div class="ttdef"><b>Definition:</b> <a href="basic__list_8hpp_source.html#l00052">basic_list.hpp:52</a></div></div>
<div class="ttc" id="aclasstz_1_1_basic_list_html_ace3c8c7e3f63908e3560e4822f057117"><div class="ttname"><a href="classtz_1_1_basic_list.html#ace3c8c7e3f63908e3560e4822f057117">tz::BasicList::length</a></div><div class="ttdeci">auto length() const</div><div class="ttdoc">Retrive the number of elements in the list.</div><div class="ttdef"><b>Definition:</b> <a href="basic__list_8hpp_source.html#l00175">basic_list.hpp:175</a></div></div>
<div class="ttc" id="aclasstz_1_1_basic_list_html_ada63442e7add7f1a66e06295f42947a9"><div class="ttname"><a href="classtz_1_1_basic_list.html#ada63442e7add7f1a66e06295f42947a9">tz::BasicList::end</a></div><div class="ttdeci">Iterator end()</div><div class="ttdoc">Retrieve an iterator to the end of the list.</div><div class="ttdef"><b>Definition:</b> <a href="basic__list_8hpp_source.html#l00151">basic_list.hpp:151</a></div></div>
<div class="ttc" id="aclasstz_1_1_enum_field_html_adf60f68be430993c223e091fa959e0e4"><div class="ttname"><a href="classtz_1_1_enum_field.html#adf60f68be430993c223e091fa959e0e4">tz::EnumField::contains</a></div><div class="ttdeci">bool contains(E type) const</div><div class="ttdoc">Query as to whether the field contains the given value.</div><div class="ttdef"><b>Definition:</b> <a href="enum__field_8inl_source.html#l00016">enum_field.inl:16</a></div></div>
<div class="ttc" id="aclasstz_1_1_vector_html"><div class="ttname"><a href="classtz_1_1_vector.html">tz::Vector&lt; float, 4 &gt;</a></div></div>
<div class="ttc" id="aclasstz_1_1_vector_html_a21a9c99453bdc876c9197dd3dad760f1"><div class="ttname"><a href="classtz_1_1_vector.html#a21a9c99453bdc876c9197dd3dad760f1">tz::Vector::data</a></div><div class="ttdeci">std::span&lt; const T &gt; data() const</div><div class="ttdoc">Retrieve a pointer to the vector data.</div><div class="ttdef"><b>Definition:</b> <a href="vector_8inl_source.html#l00115">vector.inl:115</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_buffer_html_a64c97088f04d5773f96498281c9332f9"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_buffer.html#a64c97088f04d5773f96498281c9332f9">tz::gl::vk2::Buffer::size</a></div><div class="ttdeci">std::size_t size() const</div><div class="ttdoc">Retrieve the size, in bytes, of the buffer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2buffer_8cpp_source.html#l00156">buffer.cpp:156</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_buffer_html_ac84676ea5d9d5f459cb9c385a1032729"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_buffer.html#ac84676ea5d9d5f459cb9c385a1032729">tz::gl::vk2::Buffer::get_usage</a></div><div class="ttdeci">BufferUsageField get_usage() const</div><div class="ttdoc">Retrieve all usages of this buffer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2buffer_8cpp_source.html#l00112">buffer.cpp:112</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html">tz::gl::vk2::CommandBuffer</a></div><div class="ttdoc">Represents storage for vulkan commands, such as draw calls, binds, transfers etc.....</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00265">command.hpp:266</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_html_a123b44fb90533da0c9285a7dd1f7fe52"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#a123b44fb90533da0c9285a7dd1f7fe52">tz::gl::vk2::CommandBuffer::get_device</a></div><div class="ttdeci">const LogicalDevice &amp; get_device() const</div><div class="ttdoc">CommandBuffers are allocated from a CommandPool.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00303">command.cpp:303</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_html_a67c7bfe9c4368600d35d8b8484b06972"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#a67c7bfe9c4368600d35d8b8484b06972">tz::gl::vk2::CommandBuffer::command_count</a></div><div class="ttdeci">std::size_t command_count() const</div><div class="ttdoc">Retrieve the number of commands recorded into the buffer.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00320">command.cpp:320</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_html_a721538a81ab301429e1eea581ca9a012"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#a721538a81ab301429e1eea581ca9a012">tz::gl::vk2::CommandBuffer::is_recording</a></div><div class="ttdeci">bool is_recording() const</div><div class="ttdoc">Query as to whether this CommandBuffer is currently recording.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00315">command.cpp:315</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_html_ac914c5d21dc2fc919375b27fc1fc78f0"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer.html#ac914c5d21dc2fc919375b27fc1fc78f0">tz::gl::vk2::CommandBuffer::record</a></div><div class="ttdeci">CommandBufferRecording record()</div><div class="ttdoc">Begin recording the CommandBuffer.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00308">command.cpp:308</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_1_1_render_pass_run_html_a0d3262f04167d4a6b246f93f2cda069f"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording_1_1_render_pass_run.html#a0d3262f04167d4a6b246f93f2cda069f">tz::gl::vk2::CommandBufferRecording::RenderPassRun::RenderPassRun</a></div><div class="ttdeci">RenderPassRun(Framebuffer &amp;framebuffer, CommandBufferRecording &amp;recording, tz::Vec4 clear_colour={0.0f, 0.0f, 0.0f, 1.0f})</div><div class="ttdoc">Record the beginning of the RenderPass sourcing the provided Framebuffer.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00009">command.cpp:9</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html">tz::gl::vk2::CommandBufferRecording</a></div><div class="ttdoc">Represents the full duration of the recording process of an existing CommandBuffer.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00176">command.hpp:177</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_a245b299b9c5cf4248e7ae19c63f63a8d"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a245b299b9c5cf4248e7ae19c63f63a8d">tz::gl::vk2::CommandBufferRecording::buffer_copy_image</a></div><div class="ttdeci">void buffer_copy_image(VulkanCommand::BufferCopyImage command)</div><div class="ttdoc">Copy data from one Buffer to an Image.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00152">command.cpp:152</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_a42ed45f3524b6bfe1c98de341b8b88de"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a42ed45f3524b6bfe1c98de341b8b88de">tz::gl::vk2::CommandBufferRecording::buffer_copy_buffer</a></div><div class="ttdeci">void buffer_copy_buffer(VulkanCommand::BufferCopyBuffer command)</div><div class="ttdoc">Copy data from one Buffer to another.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00135">command.cpp:135</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_a6678f3d4ee65c534f273547942dbc208"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a6678f3d4ee65c534f273547942dbc208">tz::gl::vk2::CommandBufferRecording::get_command_buffer</a></div><div class="ttdeci">const CommandBuffer &amp; get_command_buffer() const</div><div class="ttdoc">Retrieve the CommandBuffer that is currently being recorded.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00284">command.cpp:284</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_a8bbeeef67dcb9b04b17bf5abde907e01"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a8bbeeef67dcb9b04b17bf5abde907e01">tz::gl::vk2::CommandBufferRecording::bind_pipeline</a></div><div class="ttdeci">void bind_pipeline(VulkanCommand::BindPipeline command)</div><div class="ttdoc">Bind an existing GraphicsPipeline to some context.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00112">command.cpp:112</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_aa015012eda3e9de92f3a5adbaff798bd"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#aa015012eda3e9de92f3a5adbaff798bd">tz::gl::vk2::CommandBufferRecording::bind_buffer</a></div><div class="ttdeci">void bind_buffer(VulkanCommand::BindBuffer command)</div><div class="ttdoc">Bind a Buffer.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00219">command.cpp:219</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_ac9e417b34e2a883b34ab2099a82acd54"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#ac9e417b34e2a883b34ab2099a82acd54">tz::gl::vk2::CommandBufferRecording::bind_descriptor_sets</a></div><div class="ttdeci">void bind_descriptor_sets(VulkanCommand::BindDescriptorSets command)</div><div class="ttdoc">Bind a list of DescriptorSet.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00126">command.cpp:126</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_acd2074bf1faa8b35502ec823cfde1abf"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#acd2074bf1faa8b35502ec823cfde1abf">tz::gl::vk2::CommandBufferRecording::draw</a></div><div class="ttdeci">void draw(VulkanCommand::Draw draw)</div><div class="ttdoc">Perform a non-instanced draw.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00120">command.cpp:120</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_pool_html_a791dba923c7069be7b684d58c62017fe"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_pool.html#a791dba923c7069be7b684d58c62017fe">tz::gl::vk2::CommandPool::allocate_buffers</a></div><div class="ttdeci">AllocationResult allocate_buffers(const Allocation &amp;alloc)</div><div class="ttdoc">Allocate some CommandBuffers.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00416">command.cpp:416</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_set_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_set.html">tz::gl::vk2::DescriptorSet</a></div><div class="ttdoc">Represents a set of one or more descriptors.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8hpp_source.html#l00223">descriptors.hpp:224</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_framebuffer_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html">tz::gl::vk2::Framebuffer</a></div><div class="ttdoc">Represents a render target for a RenderPass.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2framebuffer_8hpp_source.html#l00031">framebuffer.hpp:32</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_framebuffer_html_aab4cfdb7324a80b83b84249bd80e2610"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html#aab4cfdb7324a80b83b84249bd80e2610">tz::gl::vk2::Framebuffer::get_dimensions</a></div><div class="ttdeci">tz::Vec2ui get_dimensions() const</div><div class="ttdoc">Retrieve the width and height of the framebuffer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2framebuffer_8cpp_source.html#l00084">framebuffer.cpp:84</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_framebuffer_html_ab44c9ebe357dff3d89030dd465ebd2c1"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html#ab44c9ebe357dff3d89030dd465ebd2c1">tz::gl::vk2::Framebuffer::get_attachment_views</a></div><div class="ttdeci">tz::BasicList&lt; const ImageView * &gt; get_attachment_views() const</div><div class="ttdoc">Retrieve a list of imageviews corresponding to each attachment.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2framebuffer_8cpp_source.html#l00100">framebuffer.cpp:100</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_framebuffer_html_ab59610c1f9b168a6f133232a0e6d98b9"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_framebuffer.html#ab59610c1f9b168a6f133232a0e6d98b9">tz::gl::vk2::Framebuffer::get_pass</a></div><div class="ttdeci">const RenderPass &amp; get_pass() const</div><div class="ttdoc">Retrieve the RenderPass that this Framebuffer expects to act as a target for.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2framebuffer_8cpp_source.html#l00089">framebuffer.cpp:89</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_image_html_a245936d112b069e1e36da99391af5476"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_image.html#a245936d112b069e1e36da99391af5476">tz::gl::vk2::Image::get_layout</a></div><div class="ttdeci">ImageLayout get_layout() const</div><div class="ttdoc">Retrieve the current layout of the image.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2image_8cpp_source.html#l00168">image.cpp:168</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_image_html_adbf0f890ba7447627ae6c9b2bb797f2e"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_image.html#adbf0f890ba7447627ae6c9b2bb797f2e">tz::gl::vk2::Image::get_dimensions</a></div><div class="ttdeci">Vec2ui get_dimensions() const</div><div class="ttdoc">Retrieve the dimensions of the image.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2image_8cpp_source.html#l00173">image.cpp:173</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_image_view_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_image_view.html">tz::gl::vk2::ImageView</a></div><div class="ttdef"><b>Definition:</b> <a href="image__view_8hpp_source.html#l00023">image_view.hpp:24</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_logical_device_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_logical_device.html">tz::gl::vk2::LogicalDevice</a></div><div class="ttdoc">Logical interface to an existing PhysicalDevice.</div><div class="ttdef"><b>Definition:</b> <a href="logical__device_8hpp_source.html#l00092">logical_device.hpp:93</a></div></div>
<div class="ttc" id="agroup__tz__core_html_ga1c23fd5abac5ba889b9b62885e1d692f"><div class="ttname"><a href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a></div><div class="ttdeci">#define tz_error(msg,...)</div><div class="ttdoc">Causes a debug-only runtime error.</div><div class="ttdef"><b>Definition:</b> <a href="assert_8hpp_source.html#l00045">assert.hpp:45</a></div></div>
<div class="ttc" id="agroup__tz__core_html_ga3cd9aafb91fe073ccf575281a4ed7acd"><div class="ttname"><a href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a></div><div class="ttdeci">#define tz_assert(eval, msg,...)</div><div class="ttdoc">Debug-only assert on some condition.</div><div class="ttdef"><b>Definition:</b> <a href="assert_8hpp_source.html#l00057">assert.hpp:57</a></div></div>
<div class="ttc" id="agroup__tz__gl__vk__buffer_html_gga0c6ff78fc058c3e209ba59dc1b2c02a6a10461f19cdb5aadba2fc9986be6400bd"><div class="ttname"><a href="group__tz__gl__vk__buffer.html#gga0c6ff78fc058c3e209ba59dc1b2c02a6a10461f19cdb5aadba2fc9986be6400bd">tz::gl::vk2::BufferUsage::VertexBuffer</a></div><div class="ttdeci">@ VertexBuffer</div></div>
<div class="ttc" id="agroup__tz__gl__vk__buffer_html_gga0c6ff78fc058c3e209ba59dc1b2c02a6a7c3895116254ff0417e58b6286de27c0"><div class="ttname"><a href="group__tz__gl__vk__buffer.html#gga0c6ff78fc058c3e209ba59dc1b2c02a6a7c3895116254ff0417e58b6286de27c0">tz::gl::vk2::BufferUsage::IndexBuffer</a></div><div class="ttdeci">@ IndexBuffer</div></div>
<div class="ttc" id="agroup__tz__gl__vk__buffer_html_gga0c6ff78fc058c3e209ba59dc1b2c02a6a8c4df84c9e73cf86122034f85efac361"><div class="ttname"><a href="group__tz__gl__vk__buffer.html#gga0c6ff78fc058c3e209ba59dc1b2c02a6a8c4df84c9e73cf86122034f85efac361">tz::gl::vk2::BufferUsage::TransferSource</a></div><div class="ttdeci">@ TransferSource</div></div>
<div class="ttc" id="agroup__tz__gl__vk__buffer_html_gga0c6ff78fc058c3e209ba59dc1b2c02a6a9cecc9065ff3b79e09391fcbfb7b9ce9"><div class="ttname"><a href="group__tz__gl__vk__buffer.html#gga0c6ff78fc058c3e209ba59dc1b2c02a6a9cecc9065ff3b79e09391fcbfb7b9ce9">tz::gl::vk2::BufferUsage::TransferDestination</a></div><div class="ttdeci">@ TransferDestination</div></div>
<div class="ttc" id="agroup__tz__gl__vk__graphics__pipeline__render__pass_html_ga93db24e9eb1cffe51979bd8a141ddc77"><div class="ttname"><a href="group__tz__gl__vk__graphics__pipeline__render__pass.html#ga93db24e9eb1cffe51979bd8a141ddc77">tz::gl::vk2::ImageAspectFlag</a></div><div class="ttdeci">ImageAspectFlag</div><div class="ttdoc">Specifies which aspects of the image are included within a view.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8hpp_source.html#l00049">render_pass.hpp:50</a></div></div>
<div class="ttc" id="agroup__tz__gl__vk__graphics__pipeline__render__pass_html_gaa5dd0142a36cd59d14dff54eed67c3df"><div class="ttname"><a href="group__tz__gl__vk__graphics__pipeline__render__pass.html#gaa5dd0142a36cd59d14dff54eed67c3df">tz::gl::vk2::AccessFlag</a></div><div class="ttdeci">AccessFlag</div><div class="ttdoc">Specifies specific events during which a memory dependency takes place.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8hpp_source.html#l00062">render_pass.hpp:63</a></div></div>
<div class="ttc" id="agroup__tz__gl__vk__image_html_ga4ca55be3d1c101900d800a78deeb595f"><div class="ttname"><a href="group__tz__gl__vk__image.html#ga4ca55be3d1c101900d800a78deeb595f">tz::gl::vk2::ImageLayout</a></div><div class="ttdeci">ImageLayout</div><div class="ttdoc">Images are always in a layout.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2image_8hpp_source.html#l00017">image.hpp:18</a></div></div>
<div class="ttc" id="agroup__tz__gl__vk__image_html_gga4ca55be3d1c101900d800a78deeb595fa9cecc9065ff3b79e09391fcbfb7b9ce9"><div class="ttname"><a href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595fa9cecc9065ff3b79e09391fcbfb7b9ce9">tz::gl::vk2::ImageLayout::TransferDestination</a></div><div class="ttdeci">@ TransferDestination</div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation.html">tz::gl::vk2::CommandPool::Allocation</a></div><div class="ttdoc">Specifies information about an allocation of a CommandBuffer or many.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00316">command.hpp:317</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_html_ab94d776ad949320f02660f68b6e73da9"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation.html#ab94d776ad949320f02660f68b6e73da9">tz::gl::vk2::CommandPool::Allocation::buffer_count</a></div><div class="ttdeci">std::uint32_t buffer_count</div><div class="ttdoc">Number of CommandBuffers to create.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00319">command.hpp:319</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html">tz::gl::vk2::CommandPool::AllocationResult</a></div><div class="ttdoc">Contains information about the result of a pool allocation.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00325">command.hpp:326</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result_html_a1faad41ec78d1f46edab28ffa5111be2"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#a1faad41ec78d1f46edab28ffa5111be2">tz::gl::vk2::CommandPool::AllocationResult::type</a></div><div class="ttdeci">AllocationResultType type</div><div class="ttdoc">Result description for this specific allocation.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00340">command.hpp:340</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result_html_a94d0ec11da42430225b873b63079c996"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#a94d0ec11da42430225b873b63079c996">tz::gl::vk2::CommandPool::AllocationResult::buffers</a></div><div class="ttdeci">tz::BasicList&lt; CommandBuffer &gt; buffers</div><div class="ttdoc">List of newly-allocated buffers.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00338">command.hpp:338</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result_html_acff115e3d6b614f7cd176afcf1f430a5"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#acff115e3d6b614f7cd176afcf1f430a5">tz::gl::vk2::CommandPool::AllocationResult::success</a></div><div class="ttdeci">bool success() const</div><div class="ttdoc">Query as to whether the allocation was successful or not.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00353">command.cpp:353</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_command_pool_info_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_command_pool_info.html">tz::gl::vk2::CommandPoolInfo</a></div><div class="ttdoc">Specifies creation flags for a CommandPool.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00162">command.hpp:163</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_command_pool_info_html_ad61f2476a6a318a6c77e147c43b84e8c"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_command_pool_info.html#ad61f2476a6a318a6c77e147c43b84e8c">tz::gl::vk2::CommandPoolInfo::queue</a></div><div class="ttdeci">const hardware::Queue * queue</div><div class="ttdoc">Specifies which hardware queue is expected to act as the executor for the CommandPool's buffers.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00165">command.hpp:165</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_begin_render_pass_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_begin_render_pass.html">tz::gl::vk2::VulkanCommand::BeginRenderPass</a></div><div class="ttdoc">Record a beginning of some RenderPass.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00067">command.hpp:68</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_begin_render_pass_html_a0d726e5259950517b292d3a0620db647"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_begin_render_pass.html#a0d726e5259950517b292d3a0620db647">tz::gl::vk2::VulkanCommand::BeginRenderPass::framebuffer</a></div><div class="ttdeci">Framebuffer * framebuffer</div><div class="ttdoc">Framebuffer containing the RenderPass.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00070">command.hpp:70</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_buffer_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_buffer.html">tz::gl::vk2::VulkanCommand::BindBuffer</a></div><div class="ttdoc">Bind a vertex or index Buffer.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00113">command.hpp:114</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_buffer_html_a39c702b7de862996bb627b65c485ffbd"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_buffer.html#a39c702b7de862996bb627b65c485ffbd">tz::gl::vk2::VulkanCommand::BindBuffer::buffer</a></div><div class="ttdeci">const Buffer * buffer</div><div class="ttdoc">Buffer to bind, usage must contain one of BufferUsage::VertexBuffer or BufferUsage::IndexBuffer.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00116">command.hpp:116</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html">tz::gl::vk2::VulkanCommand::BindDescriptorSets</a></div><div class="ttdoc">Record a bind of one of more DescriptorSet See CommandBufferRecording::bind_descriptor_sets for usage...</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00051">command.hpp:52</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets_html_a0e83b6b02e05f5a4278be3f8476df2be"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#a0e83b6b02e05f5a4278be3f8476df2be">tz::gl::vk2::VulkanCommand::BindDescriptorSets::first_set_id</a></div><div class="ttdeci">std::uint32_t first_set_id</div><div class="ttdoc">The operation causes the sets [first_set_id, first_set_id + descriptor_sets.length() + 1] to refer to...</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00060">command.hpp:60</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets_html_a15c9871e29fa1822fe3179b3a584e99a"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#a15c9871e29fa1822fe3179b3a584e99a">tz::gl::vk2::VulkanCommand::BindDescriptorSets::descriptor_sets</a></div><div class="ttdeci">const tz::BasicList&lt; const DescriptorSet * &gt; descriptor_sets</div><div class="ttdoc">List of DescriptorSet to bind.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00058">command.hpp:58</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets_html_a86f62f989223c979fc35e98b4d88bcd1"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#a86f62f989223c979fc35e98b4d88bcd1">tz::gl::vk2::VulkanCommand::BindDescriptorSets::context</a></div><div class="ttdeci">PipelineContext context</div><div class="ttdoc">Pipeline bind point.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00056">command.hpp:56</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets_html_ab03d3609122fe1aff4120199add3d999"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_descriptor_sets.html#ab03d3609122fe1aff4120199add3d999">tz::gl::vk2::VulkanCommand::BindDescriptorSets::pipeline_layout</a></div><div class="ttdeci">const PipelineLayout * pipeline_layout</div><div class="ttdoc">PipelineLayout representing the list of layouts matching each provided set.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00054">command.hpp:54</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_pipeline_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_pipeline.html">tz::gl::vk2::VulkanCommand::BindPipeline</a></div><div class="ttdoc">Record a bind of a GraphicsPipeline.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00039">command.hpp:40</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_pipeline_html_a8c83b30431ae2f516946fe0e2ca20559"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_pipeline.html#a8c83b30431ae2f516946fe0e2ca20559">tz::gl::vk2::VulkanCommand::BindPipeline::pipeline_context</a></div><div class="ttdeci">PipelineContext pipeline_context</div><div class="ttdoc">Specify the pipeline context to bind to. Binding to one context does not disturb existing binds to ot...</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00044">command.hpp:44</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_pipeline_html_aef79d34d9a00c3a1ec32fdd643c131d8"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_bind_pipeline.html#aef79d34d9a00c3a1ec32fdd643c131d8">tz::gl::vk2::VulkanCommand::BindPipeline::pipeline</a></div><div class="ttdeci">const GraphicsPipeline * pipeline</div><div class="ttdoc">Pipeline to be bound. Must not be null.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00042">command.hpp:42</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html">tz::gl::vk2::VulkanCommand::BufferCopyBuffer</a></div><div class="ttdoc">Record a copy from one Buffer to another.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00088">command.hpp:89</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer_html_a8259921b2c071f7edf4d7e2c6e0999cb"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html#a8259921b2c071f7edf4d7e2c6e0999cb">tz::gl::vk2::VulkanCommand::BufferCopyBuffer::src</a></div><div class="ttdeci">const Buffer * src</div><div class="ttdoc">Buffer to copy data from. Must not be null.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00091">command.hpp:91</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer_html_ab25083e4d84c146bfb7cf38f5f37dc0b"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_buffer.html#ab25083e4d84c146bfb7cf38f5f37dc0b">tz::gl::vk2::VulkanCommand::BufferCopyBuffer::dst</a></div><div class="ttdeci">Buffer * dst</div><div class="ttdoc">Buffer to copy to. Must not be null.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00093">command.hpp:93</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html">tz::gl::vk2::VulkanCommand::BufferCopyImage</a></div><div class="ttdoc">Record a copy from one Buffer to an Image.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00101">command.hpp:102</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image_html_a6e202dd142f2048d57785500b0764373"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#a6e202dd142f2048d57785500b0764373">tz::gl::vk2::VulkanCommand::BufferCopyImage::image_aspects</a></div><div class="ttdeci">ImageAspectFlags image_aspects</div><div class="ttdoc">Aspect of image in this context.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00108">command.hpp:108</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image_html_adc3f50815eeb1485c20706f14b8db96d"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#adc3f50815eeb1485c20706f14b8db96d">tz::gl::vk2::VulkanCommand::BufferCopyImage::src</a></div><div class="ttdeci">const Buffer * src</div><div class="ttdoc">Buffer to copy data from. Must not be null.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00104">command.hpp:104</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image_html_ae77ba4232185e07315aba61908c4e58c"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_buffer_copy_image.html#ae77ba4232185e07315aba61908c4e58c">tz::gl::vk2::VulkanCommand::BufferCopyImage::dst</a></div><div class="ttdeci">Image * dst</div><div class="ttdoc">Buffer to copy to. Must not be null.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00106">command.hpp:106</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw.html">tz::gl::vk2::VulkanCommand::Draw</a></div><div class="ttdoc">Record a non-indexed draw.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00023">command.hpp:24</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw_html_a2fdd5ea4ef43f85f57e99d5c8b0258c2"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw.html#a2fdd5ea4ef43f85f57e99d5c8b0258c2">tz::gl::vk2::VulkanCommand::Draw::first_instance</a></div><div class="ttdeci">std::uint32_t first_instance</div><div class="ttdoc">Instance ID of the first instance to draw (Default 0).</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00032">command.hpp:32</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw_html_a365324b668b406ae92f340c15ecd30cb"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw.html#a365324b668b406ae92f340c15ecd30cb">tz::gl::vk2::VulkanCommand::Draw::instance_count</a></div><div class="ttdeci">std::uint32_t instance_count</div><div class="ttdoc">Number of instances to draw (Default 1).</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00028">command.hpp:28</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw_html_a3bc0139c63d58bcbc3fada3a6ee79453"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw.html#a3bc0139c63d58bcbc3fada3a6ee79453">tz::gl::vk2::VulkanCommand::Draw::first_vertex</a></div><div class="ttdeci">std::uint32_t first_vertex</div><div class="ttdoc">Index of the first vertex to draw (Default 0).</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00030">command.hpp:30</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw_html_aa20ea4668944d738431db311f2a67ea5"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_draw.html#aa20ea4668944d738431db311f2a67ea5">tz::gl::vk2::VulkanCommand::Draw::vertex_count</a></div><div class="ttdeci">std::uint32_t vertex_count</div><div class="ttdoc">Number of vertices to draw.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00026">command.hpp:26</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_end_render_pass_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_end_render_pass.html">tz::gl::vk2::VulkanCommand::EndRenderPass</a></div><div class="ttdoc">Record the ending of some RenderPass.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00077">command.hpp:78</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_end_render_pass_html_ac32dec8f9c51d60004dd2844a17a3692"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_end_render_pass.html#ac32dec8f9c51d60004dd2844a17a3692">tz::gl::vk2::VulkanCommand::EndRenderPass::framebuffer</a></div><div class="ttdeci">Framebuffer * framebuffer</div><div class="ttdoc">Framebuffer containing the RenderPass.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00080">command.hpp:80</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html">tz::gl::vk2::VulkanCommand::TransitionImageLayout</a></div><div class="ttdoc">Transition an image layout via recording a pipeline barrier into the CommandBuffer.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00125">command.hpp:126</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout_html_a16a08625b895a4a444b66e53a5a23410"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a16a08625b895a4a444b66e53a5a23410">tz::gl::vk2::VulkanCommand::TransitionImageLayout::source_access</a></div><div class="ttdeci">AccessFlagField source_access</div><div class="ttdoc">All preceeding operations within the recorded CommandBuffer that satisfy an access method specified h...</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00133">command.hpp:133</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout_html_a1e8990d656299ed2c114569299dccc2c"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a1e8990d656299ed2c114569299dccc2c">tz::gl::vk2::VulkanCommand::TransitionImageLayout::image</a></div><div class="ttdeci">Image * image</div><div class="ttdoc">Image to transition.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00128">command.hpp:128</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout_html_a222df56b11ad097bb6f2db067220b636"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a222df56b11ad097bb6f2db067220b636">tz::gl::vk2::VulkanCommand::TransitionImageLayout::image_aspects</a></div><div class="ttdeci">ImageAspectFlags image_aspects</div><div class="ttdoc">Aspect of image in this context.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00141">command.hpp:141</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout_html_a51d5bddfc6bee5894166f297d44def18"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a51d5bddfc6bee5894166f297d44def18">tz::gl::vk2::VulkanCommand::TransitionImageLayout::source_stage</a></div><div class="ttdeci">PipelineStage source_stage</div><div class="ttdoc">Stage that the barrier blocks after.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00137">command.hpp:137</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout_html_a71a41f1c921b44f196c2b62e6fcc86e7"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a71a41f1c921b44f196c2b62e6fcc86e7">tz::gl::vk2::VulkanCommand::TransitionImageLayout::destination_access</a></div><div class="ttdeci">AccessFlagField destination_access</div><div class="ttdoc">All succeding operations within the recorded CommandBuffer that satisfy an access method specified he...</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00135">command.hpp:135</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout_html_a8094be6bc811b9a3b58e1277bc2cd303"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#a8094be6bc811b9a3b58e1277bc2cd303">tz::gl::vk2::VulkanCommand::TransitionImageLayout::target_layout</a></div><div class="ttdeci">ImageLayout target_layout</div><div class="ttdoc">Desired ImageLayout of image after the command has finished execution.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00130">command.hpp:130</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout_html_aa80a64c77476bf86fe4c7af2c2523119"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#aa80a64c77476bf86fe4c7af2c2523119">tz::gl::vk2::VulkanCommand::TransitionImageLayout::destination_stage</a></div><div class="ttdeci">PipelineStage destination_stage</div><div class="ttdoc">Stage that the barrier blocks before.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00139">command.hpp:139</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout_html_ad3b165303278ffd2d8da71e26f53219b"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#ad3b165303278ffd2d8da71e26f53219b">tz::gl::vk2::VulkanCommand::TransitionImageLayout::affected_mip_levels</a></div><div class="ttdeci">tz::BasicList&lt; std::uint32_t &gt; affected_mip_levels</div><div class="ttdoc">List of affected mip levels. Must be in ascending-order and with no gaps. E.g {0, 1,...</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00144">command.hpp:144</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout_html_aeaac71f2af5dc6deb49315ceedd90b66"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command_1_1_transition_image_layout.html#aeaac71f2af5dc6deb49315ceedd90b66">tz::gl::vk2::VulkanCommand::TransitionImageLayout::affected_layers</a></div><div class="ttdeci">tz::BasicList&lt; std::uint32_t &gt; affected_layers</div><div class="ttdoc">List of affected array layers. Must be in ascending-order and with no gaps. E.g {0,...</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00146">command.hpp:146</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_vulkan_command_html_a0645efe44466b3314eace8272ffbf549"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_vulkan_command.html#a0645efe44466b3314eace8272ffbf549">tz::gl::vk2::VulkanCommand::Variant</a></div><div class="ttdeci">std::variant&lt; Draw, BindPipeline, BindDescriptorSets, BeginRenderPass, EndRenderPass, BufferCopyBuffer, BufferCopyImage, BindBuffer, TransitionImageLayout &gt; Variant</div><div class="ttdoc">Variant type which has alternatives for every single possible recordable command type.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00150">command.hpp:150</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_22ef2c5f6712ba0a0b99c741bcfb15fe.html">gl</a></li><li class="navelem"><a class="el" href="dir_294d689e10da81f00c081b036a1431d9.html">impl</a></li><li class="navelem"><a class="el" href="dir_f1e396d78ce7c2379251e63a766e1a72.html">backend</a></li><li class="navelem"><a class="el" href="dir_0b7f26d7b2839feebc272b1e805dca31.html">vk2</a></li><li class="navelem"><b>command.cpp</b></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
