<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Topaz: src/gl/impl/frontend/vk2/renderer.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Topaz<span id="projectnumber">&#160;3.2</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('vk2_2renderer_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">renderer.cpp</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#if TZ_VULKAN</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#include &quot;gl/impl/backend/vk2/tz_vulkan.hpp&quot;</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &quot;core/profiling/zone.hpp&quot;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &quot;gl/declare/image_format.hpp&quot;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;gl/impl/backend/vk2/fixed_function.hpp&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &quot;gl/impl/backend/vk2/gpu_mem.hpp&quot;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &quot;gl/impl/backend/vk2/descriptors.hpp&quot;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &quot;gl/impl/backend/vk2/image_view.hpp&quot;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;gl/impl/frontend/vk2/renderer.hpp&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;gl/impl/frontend/vk2/component.hpp&quot;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;gl/output.hpp&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="keyword">namespace </span>tz::gl</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>{</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>    <span class="keyword">using namespace </span>tz::gl;</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">//--------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_resource_storage.html#a61c0e3e7b1b6dd6eb3ced5543baa7805">   18</a></span>    <a class="code hl_function" href="classtz_1_1gl_1_1_resource_storage.html#a1f73d126642a7fc8c2f0734d49e0e097">ResourceStorage::ResourceStorage</a>(std::span&lt;const IResource* const&gt; resources, <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html">vk2::LogicalDevice</a>&amp; ldev, std::size_t frame_in_flight_count):</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>    <a class="code hl_class" href="classtz_1_1gl_1_1_asset_storage_common.html">AssetStorageCommon</a>&lt;<a class="code hl_class" href="classtz_1_1gl_1_1_i_resource.html">IResource</a>&gt;(resources),</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>    components(),</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>    image_component_views(),</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>    basic_sampler(vk2::SamplerInfo</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    {</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>        .device = &amp;ldev,</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>        .min_filter = vk2::LookupFilter::Nearest,</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>        .mag_filter = vk2::LookupFilter::Nearest,</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>        .mipmap_mode = vk2::MipLookupFilter::Nearest,</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>        .address_mode_u = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga8d6daa8ff20537f40f5e1145342c2d4da74556551231333c36debc3d373261134">vk2::SamplerAddressMode::ClampToEdge</a>,</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>        .address_mode_v = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga8d6daa8ff20537f40f5e1145342c2d4da74556551231333c36debc3d373261134">vk2::SamplerAddressMode::ClampToEdge</a>,</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>        .address_mode_w = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga8d6daa8ff20537f40f5e1145342c2d4da74556551231333c36debc3d373261134">vk2::SamplerAddressMode::ClampToEdge</a>,</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    }),</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    descriptor_layout(vk2::DescriptorLayout::null()),</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    descriptor_pool(vk2::DescriptorPool::null()),</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    descriptors(),</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    frame_in_flight_count(frame_in_flight_count)</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    {</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan ResourceStorage Create&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>        std::vector&lt;bool&gt; buffer_id_to_variable_access;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>        <span class="keywordflow">for</span>(std::size_t i = 0; i &lt; this-&gt;count(); i++)</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>        {</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>            <a class="code hl_class" href="classtz_1_1gl_1_1_i_resource.html">IResource</a>* res = this-&gt;<a class="code hl_function" href="group__tz__gl__vk.html#ga6b2997a4d85a7a421f621c046553eb9e">get</a>(<span class="keyword">static_cast&lt;</span>tz::HandleValue<span class="keyword">&gt;</span>(i));</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>            <span class="keywordflow">switch</span>(res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a37e79891f0c1e275cc8e52e5964dee00">get_type</a>())</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>            {</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggac6834632961a6223450b780b32ced684a7e62bc342f41c946868f0ea6f0b712d8">ResourceType::Buffer</a>:</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>                    this-&gt;components.push_back(std::make_unique&lt;BufferComponentVulkan&gt;(*res, ldev));</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>                    <span class="keywordflow">if</span>(res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a30140461ed037030d6c549fed9353fe9">get_access</a>() == <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaa423193eec104eaf530d2ff93fea39656">ResourceAccess::DynamicFixed</a> || res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a30140461ed037030d6c549fed9353fe9">get_access</a>() == <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaa21f8913440ad1edc3ddaa47d14b54811">ResourceAccess::DynamicVariable</a>)</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>                    {</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>                        <span class="comment">// Tell the resource to use the buffer&#39;s data. Also copy whatever we had before.</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>                        std::span&lt;const std::byte&gt; initial_data = res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a9c27891c1f4be84fb4ec9d5f9c0fa469">data</a>();</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>                        std::span&lt;std::byte&gt; buffer_byte_data = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classtz_1_1gl_1_1_buffer_component_vulkan.html">BufferComponentVulkan</a>*<span class="keyword">&gt;</span>(this-&gt;components.back().get())-&gt;vk_get_buffer().map_as&lt;std::byte&gt;();</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>                        <a class="code hl_function" href="group__tz__gl__ogl2__buffers.html#gadc71f031030e7f584e43416c367717fc">std::copy</a>(initial_data.begin(), initial_data.end(), buffer_byte_data.begin());</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>                        res-&gt;set_mapped_data(buffer_byte_data);</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>                    }</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>                    buffer_id_to_variable_access.push_back(res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a30140461ed037030d6c549fed9353fe9">get_access</a>() == <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaa21f8913440ad1edc3ddaa47d14b54811">ResourceAccess::DynamicVariable</a>);</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggac6834632961a6223450b780b32ced684abe53a0541a6d36f6ecb879fa2c584b08">ResourceType::Image</a>:</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>                    this-&gt;components.push_back(std::make_unique&lt;ImageComponentVulkan&gt;(*res, ldev));</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>                    <span class="keywordflow">if</span>(res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a30140461ed037030d6c549fed9353fe9">get_access</a>() == <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaa423193eec104eaf530d2ff93fea39656">ResourceAccess::DynamicFixed</a> || res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a30140461ed037030d6c549fed9353fe9">get_access</a>() == <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaa21f8913440ad1edc3ddaa47d14b54811">ResourceAccess::DynamicVariable</a>)</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>                    {</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>                        std::span&lt;const std::byte&gt; initial_data = res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a9c27891c1f4be84fb4ec9d5f9c0fa469">data</a>();</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>                        <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_image.html">vk2::Image</a>&amp; underlying_image = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classtz_1_1gl_1_1_image_component_vulkan.html">ImageComponentVulkan</a>*<span class="keyword">&gt;</span>(this-&gt;components.back().get())-&gt;vk_get_image();</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>                        std::span&lt;std::byte&gt; image_data = {<span class="keyword">reinterpret_cast&lt;</span>std::byte*<span class="keyword">&gt;</span>(underlying_image.map()), initial_data.size_bytes()};</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>                        <span class="comment">//tz_assert(initial_data.size_bytes() == image_data.size_bytes(), &quot;ImageResource data span length disagrees with the vulkan backend image&#39;s mapped data span. Resource says %zu bytes, vk2::Image says %zu bytes&quot;, initial_data.size_bytes(), image_data.size_bytes());</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>                        <a class="code hl_function" href="group__tz__gl__ogl2__buffers.html#gadc71f031030e7f584e43416c367717fc">std::copy</a>(initial_data.begin(), initial_data.end(), image_data.begin());</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>                        res-&gt;set_mapped_data(image_data);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>                    }</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>                    <span class="comment">// If we&#39;re an image, we need to create an image view too.</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>                    {</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>                        <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_image.html">vk2::Image</a>&amp; result_image = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classtz_1_1gl_1_1_image_component_vulkan.html">ImageComponentVulkan</a>*<span class="keyword">&gt;</span>(this-&gt;components.back().get())-&gt;vk_get_image();</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>                        this-&gt;image_component_views.emplace_back</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>                            (<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_image_view_info.html">vk2::ImageViewInfo</a>{</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>                                .image = &amp;result_image,</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>                                .aspect = vk2::ImageAspect::Colour</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>                             });</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>                    }</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>                    <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Unrecognised ResourceType. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>            }</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        }</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        std::size_t buffer_count = this-&gt;resource_count_of(<a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggac6834632961a6223450b780b32ced684a7e62bc342f41c946868f0ea6f0b712d8">ResourceType::Buffer</a>);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <span class="comment">// So buffer_id_to_variable_access stores a bool for each buffer (in-order). True if the access is variable, false otherwise. However, if any buffer at all is variable, we will unfortunately try to write to them all in sync_descriptors.</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        <span class="comment">// Until we fix sync_descriptors to be a little less cavalier, we must add the descriptor-indexing flags and take the perf loss if there are *any* variable-sized buffer resources at all.</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        {</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>            <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout_builder.html">vk2::DescriptorLayoutBuilder</a> lbuilder;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>            lbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout_builder.html#a8718cf9f569caf8dac4d4a08741925d0">set_device</a>(ldev);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>            <span class="comment">// Each buffer gets their own binding id.</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>            <span class="keywordflow">for</span>(std::size_t i = 0; i &lt; buffer_count; i++)</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>            {</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>                <span class="comment">// TODO: Only add the necessary flags to the buffers with variable access instead of all of them if any have it. Dependent on changes to sync_descriptors.</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>                <a class="code hl_class" href="classtz_1_1_enum_field.html">vk2::DescriptorFlags</a> desc_flags;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>                <span class="keywordflow">if</span>(std::any_of(buffer_id_to_variable_access.begin(), buffer_id_to_variable_access.end(),</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>                [](<span class="keywordtype">bool</span> b){return b;}))</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>                {</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>                    desc_flags = </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>                    {</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>                        <a class="code hl_enumvalue" href="group__tz__gl__vk__descriptors.html#ggaf15b5e240b6c64c9dad040171f553123a4b8308424b6fb4b70803778cfc461015">vk2::DescriptorFlag::UpdateAfterBind</a>,</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>                        <a class="code hl_enumvalue" href="group__tz__gl__vk__descriptors.html#ggaf15b5e240b6c64c9dad040171f553123a74985606c2a8d95e3aa784b1f882ba44">vk2::DescriptorFlag::UpdateUnusedWhilePending</a></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>                    };</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>                }</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>                lbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout_builder.html#a35bee4b07c0c343b53520a5f9c693691">with_binding</a></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>                ({</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>                    .type = vk2::DescriptorType::StorageBuffer,</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>                    .count = 1,</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>                    .flags = desc_flags</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>                });</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>            }</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>            <span class="comment">// And one giant descriptor array for all textures. If there aren&#39;t any image resources though, we won&#39;t bother.</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>            <span class="keywordflow">if</span>(this-&gt;resource_count_of(<a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggac6834632961a6223450b780b32ced684abe53a0541a6d36f6ecb879fa2c584b08">ResourceType::Image</a>))</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>            {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                lbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout_builder.html#a35bee4b07c0c343b53520a5f9c693691">with_binding</a></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                ({</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                    .type = vk2::DescriptorType::ImageWithSampler,</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>                    .count = <span class="keyword">static_cast&lt;</span>std::uint32_t<span class="keyword">&gt;</span>(this-&gt;image_component_views.size()),</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>                    .flags = {<a class="code hl_enumvalue" href="group__tz__gl__vk__descriptors.html#ggaf15b5e240b6c64c9dad040171f553123a16d008687eb1211c484cfc25158d727d">vk2::DescriptorFlag::PartiallyBound</a>}</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                });</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>            }</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>            this-&gt;descriptor_layout = lbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout_builder.html#a255b1e89de7ebac50241ccef4f995aba">build</a>();</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>        }</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        <span class="comment">// If we have no resources at all, then we completely skip creating pools and sets.</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>        <span class="keywordflow">if</span>(this-&gt;count() == 0)</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        {</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>        }</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        <span class="comment">// Create pool limits. Enough for all of our resources. However, if we don&#39;t have any of a specific resource, we shouldn&#39;t add a limit at all for it (zero-size limits are not allowed).</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        <span class="keyword">decltype</span>(std::declval&lt;vk2::DescriptorPoolInfo::PoolLimits&gt;().limits) limits;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="keywordflow">if</span>(buffer_count &gt; 0)</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        {</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>            limits[vk2::DescriptorType::StorageBuffer] = buffer_count * this-&gt;frame_in_flight_count;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        }</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="keywordflow">if</span>(!this-&gt;image_component_views.empty())</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        {</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>            limits[vk2::DescriptorType::ImageWithSampler] = this-&gt;image_component_views.size() * this-&gt;frame_in_flight_count;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        }</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        this-&gt;descriptor_pool = </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        {<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_info.html">vk2::DescriptorPoolInfo</a>{</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>            .<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_info.html#aa6f231bec37b767f12357542a86a99f6">limits</a> =</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>            {</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>                .<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_info_1_1_pool_limits.html#ab40cdfd71afa53843549b7d15a00487f">limits</a> = limits,</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>                .max_sets = <span class="keyword">static_cast&lt;</span>std::uint32_t<span class="keyword">&gt;</span>(this-&gt;frame_in_flight_count),</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>                .supports_update_after_bind = <span class="keyword">true</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>            },</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>            .logical_device = &amp;ldev</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>        }};</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        {</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>            <a class="code hl_class" href="classtz_1_1_basic_list.html">tz::BasicList&lt;const vk2::DescriptorLayout*&gt;</a> alloc_layout_list;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>            <span class="keywordflow">for</span>(std::size_t i = 0; i &lt; this-&gt;frame_in_flight_count; i++)</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>            {</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>                alloc_layout_list.<a class="code hl_function" href="classtz_1_1_basic_list.html#a5393f48f92124e56c6ba68418396c069">add</a>(&amp;this-&gt;descriptor_layout);</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>            }</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>            this-&gt;descriptors = this-&gt;descriptor_pool.allocate_sets</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>            ({</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                .set_layouts = std::move(alloc_layout_list)</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>            });</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        };</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(this-&gt;descriptors.success(), <span class="stringliteral">&quot;Descriptor Pool allocation failed. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>        this-&gt;sync_descriptors(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    }</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <a class="code hl_function" href="classtz_1_1gl_1_1_resource_storage.html#a1f73d126642a7fc8c2f0734d49e0e097">ResourceStorage::ResourceStorage</a>(<a class="code hl_class" href="classtz_1_1gl_1_1_resource_storage.html">ResourceStorage</a>&amp;&amp; move):</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <a class="code hl_class" href="classtz_1_1gl_1_1_asset_storage_common.html">AssetStorageCommon</a>&lt;<a class="code hl_class" href="classtz_1_1gl_1_1_i_resource.html">IResource</a>&gt;(static_cast&lt;<a class="code hl_class" href="classtz_1_1gl_1_1_asset_storage_common.html">AssetStorageCommon</a>&lt;<a class="code hl_class" href="classtz_1_1gl_1_1_i_resource.html">IResource</a>&gt;&amp;&amp;&gt;(move)),</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    components(std::move(move.components)),</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    image_component_views(std::move(move.image_component_views)),</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    basic_sampler(std::move(move.basic_sampler)),</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    descriptor_layout(std::move(move.descriptor_layout)),</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    descriptor_pool(std::move(move.descriptor_pool)),</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    descriptors(std::move(move.descriptors)),</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    frame_in_flight_count(move.frame_in_flight_count)</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    {</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; set : this-&gt;descriptors.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_allocation_result.html#a9447ec7a1213edb2943a983e8f01068b">sets</a>)</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        {</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>            set.set_layout(this-&gt;descriptor_layout);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>        }</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    }</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <a class="code hl_class" href="classtz_1_1gl_1_1_resource_storage.html">ResourceStorage</a>&amp; ResourceStorage::operator=(<a class="code hl_class" href="classtz_1_1gl_1_1_resource_storage.html">ResourceStorage</a>&amp;&amp; rhs)</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        std::swap(this-&gt;components, rhs.components);</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        std::swap(this-&gt;image_component_views, rhs.image_component_views);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        std::swap(this-&gt;basic_sampler, rhs.basic_sampler);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        std::swap(this-&gt;descriptor_layout, rhs.descriptor_layout);</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        std::swap(this-&gt;descriptor_pool, rhs.descriptor_pool);</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        std::swap(this-&gt;descriptors, rhs.descriptors);</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        std::swap(this-&gt;frame_in_flight_count, rhs.frame_in_flight_count);</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; set : this-&gt;descriptors.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_allocation_result.html#a9447ec7a1213edb2943a983e8f01068b">sets</a>)</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        {</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>            set.set_layout(this-&gt;descriptor_layout);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    }</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1_i_component.html">IComponent</a>* <a class="code hl_function" href="classtz_1_1gl_1_1_resource_storage.html#a0524a8fb3d8fd8c1c5735e89e06f4cc7">ResourceStorage::get_component</a>(<a class="code hl_class" href="classtz_1_1_handle.html">ResourceHandle</a> handle)<span class="keyword"> const</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <span class="keywordflow">return</span> this-&gt;components[<span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span>tz::HandleValue<span class="keyword">&gt;</span>(handle))].get();</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    }</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <a class="code hl_class" href="classtz_1_1gl_1_1_i_component.html">IComponent</a>* <a class="code hl_function" href="classtz_1_1gl_1_1_resource_storage.html#a0524a8fb3d8fd8c1c5735e89e06f4cc7">ResourceStorage::get_component</a>(<a class="code hl_class" href="classtz_1_1_handle.html">ResourceHandle</a> handle)</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    {</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>        <span class="keywordflow">return</span> this-&gt;components[<span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span>tz::HandleValue<span class="keyword">&gt;</span>(handle))].get();</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    }</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_resource_storage.html#aee19c3bfdae5d18bdda04f68afea3565">  208</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout.html">vk2::DescriptorLayout</a>&amp; <a class="code hl_function" href="classtz_1_1gl_1_1_resource_storage.html#aee19c3bfdae5d18bdda04f68afea3565">ResourceStorage::get_descriptor_layout</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>        <span class="keywordflow">return</span> this-&gt;descriptor_layout;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    }</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_resource_storage.html#a9becf5414f35a43f1df800c958d66f59">  213</a></span>    std::span&lt;const vk2::DescriptorSet&gt; <a class="code hl_function" href="classtz_1_1gl_1_1_resource_storage.html#a9becf5414f35a43f1df800c958d66f59">ResourceStorage::get_descriptor_sets</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>        <span class="keywordflow">return</span> this-&gt;descriptors.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_allocation_result.html#a9447ec7a1213edb2943a983e8f01068b">sets</a>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    }</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    std::size_t <a class="code hl_function" href="classtz_1_1gl_1_1_resource_storage.html#a3143c4d36dea17caa0dd161babdbdc11">ResourceStorage::resource_count_of</a>(<a class="code hl_enumeration" href="group__tz__gl2__res.html#gac6834632961a6223450b780b32ced684">ResourceType</a> type)<span class="keyword"> const</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        <span class="keywordflow">return</span> std::count_if(this-&gt;components.begin(), this-&gt;components.end(),</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        [type](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; component_ptr)</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        {</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>            return component_ptr-&gt;get_resource()-&gt;get_type() == type;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        });</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    }</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <span class="keywordtype">void</span> ResourceStorage::sync_descriptors(<span class="keywordtype">bool</span> write_everything)</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan ResourceStorage Descriptor Sync&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        std::vector&lt;vk2::Buffer*&gt; buffers;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; component_ptr : this-&gt;components)</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>            <span class="keywordflow">if</span>(component_ptr-&gt;get_resource()-&gt;get_type() == <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggac6834632961a6223450b780b32ced684a7e62bc342f41c946868f0ea6f0b712d8">ResourceType::Buffer</a>)</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            {</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>                buffers.push_back(&amp;<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classtz_1_1gl_1_1_buffer_component_vulkan.html">BufferComponentVulkan</a>*<span class="keyword">&gt;</span>(component_ptr.get())-&gt;vk_get_buffer());</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>            }</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        }</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span> </div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        <span class="comment">// Now write the initial resources into their descriptors.</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_update_request.html">vk2::DescriptorPool::UpdateRequest</a> update = this-&gt;descriptor_pool.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_descriptor_pool.html#aa4ca5a9b707fa4a15e150105e7ce7d44">make_update_request</a>();</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>        <span class="comment">// For each set, make the same edits.</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>        <span class="keywordflow">for</span>(std::size_t i = 0 ; i &lt; this-&gt;frame_in_flight_count; i++)</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        {</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>            <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_descriptor_set.html">vk2::DescriptorSet</a>&amp; set = this-&gt;descriptors.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_allocation_result.html#a9447ec7a1213edb2943a983e8f01068b">sets</a>[i];</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>            <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_descriptor_set_1_1_edit_request.html">vk2::DescriptorSet::EditRequest</a> set_edit = set.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_descriptor_set.html#aad4dfda61c3b097013b675089501ddcb">make_edit_request</a>();</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>            <span class="comment">// Now update each binding corresponding to a buffer resource.</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>            <span class="keywordflow">for</span>(std::size_t j = 0; j &lt; buffers.size(); j++)</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>            {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                set_edit.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_descriptor_set_1_1_edit_request.html#af6639d543f2c4a73fca182ca2209c5c5">set_buffer</a>(j,</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                {</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                    .buffer = buffers[j],</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                    .buffer_offset = 0,</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>                    .buffer_write_size = buffers[j]-&gt;size()</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>                });</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            }</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            <span class="comment">// And finally the binding corresponding to the texture resource descriptor array</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>            <span class="comment">// Note, we only do this if we&#39;re writing to everything (we should only ever do this once because the image resources are not update-after-bind-bit!</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            <span class="keywordflow">if</span>(write_everything)</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            {</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                <span class="keywordflow">for</span>(std::size_t j = 0; j &lt; this-&gt;image_component_views.size(); j++)</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                {</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>                    set_edit.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_descriptor_set_1_1_edit_request.html#a668978b923a9ae87def22035f27e86e8">set_image</a>(buffers.size(),</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>                    {</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>                        .sampler = &amp;this-&gt;basic_sampler,</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                        .image_view = &amp;this-&gt;image_component_views[j]</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                    }, j);</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                }</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            }</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>            update.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_update_request.html#a9eadabf90c16c3d2cc228868752da65a">add_set_edit</a>(set_edit);</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        }</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        this-&gt;descriptor_pool.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_descriptor_pool.html#a4b369fb5533bf5c1faccde6b2e4065fb">update_sets</a>(update);</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    }</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span> </div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="keywordtype">bool</span> ResourceStorage::empty()<span class="keyword"> const</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        <span class="keywordflow">return</span> this-&gt;count() == 0;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    }</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    <span class="keywordtype">void</span> ResourceStorage::write_padded_image_data()</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    {</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; component_ptr : this-&gt;components)</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        {</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>            <a class="code hl_class" href="classtz_1_1gl_1_1_i_resource.html">IResource</a>* res = component_ptr-&gt;get_resource();</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>            <span class="keywordflow">if</span>(res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a37e79891f0c1e275cc8e52e5964dee00">get_type</a>() == <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggac6834632961a6223450b780b32ced684abe53a0541a6d36f6ecb879fa2c584b08">ResourceType::Image</a> &amp;&amp; res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a30140461ed037030d6c549fed9353fe9">get_access</a>() != <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaab6808d7d17fa4d376d212668279ef514">ResourceAccess::StaticFixed</a>)</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>            {</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>                <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_image.html">vk2::Image</a>&amp; img = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="classtz_1_1gl_1_1_image_component_vulkan.html">ImageComponentVulkan</a>*<span class="keyword">&gt;</span>(component_ptr.get())-&gt;vk_get_image();</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>                <span class="comment">// If it&#39;s dynamic in any way, the user might have written changes.</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>                <span class="comment">// The user writes image data assuming the rows are tightly-packed, but this is not at all guaranteed (infact its highly unlikely). We will correct the written data each time.</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>                std::span&lt;std::byte&gt; d = res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a9c27891c1f4be84fb4ec9d5f9c0fa469">data</a>();</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>                <span class="comment">// How many rows do we have?</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>                std::size_t num_rows = img.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_image.html#adbf0f890ba7447627ae6c9b2bb797f2e">get_dimensions</a>()[1];</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>                std::size_t row_pitch = img.get_linear_row_length();</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>                <span class="comment">// Find out how many bytes the resource data takes up per row.</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>                std::size_t resource_row_pitch = d.size_bytes() / num_rows;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>                <span class="keywordflow">if</span>(row_pitch == resource_row_pitch)</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>                {</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>                    <span class="comment">// Image row data really is tightly packed.</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>                }</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>                <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(row_pitch &gt; resource_row_pitch, <span class="stringliteral">&quot;Linear CPU vk2::Image row data is negatively-padded? Assuming ImageResource data is tightly-packed, it uses %zu bytes per row, but the actual image uses %zu? It should be using more, not less!&quot;</span>, resource_row_pitch, row_pitch);</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>                <span class="comment">/*</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span><span class="comment">                    // Consider the image resource data for a 3x3 image, there are 2 extra padding bytes which we want to fix.</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span><span class="comment">                    // The next row needs to start X padding bytes later.</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span><span class="comment">                    xxx**</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span><span class="comment">                    xxx**</span></div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span><span class="comment">                    xxx**</span></div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span><span class="comment">                    // Whereas what we have rn is:</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="comment">                    xxxxx</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span><span class="comment">                    xxxx*</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span><span class="comment">                    *****</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span><span class="comment">                 */</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>                std::vector&lt;char&gt; buffer;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                buffer.resize(row_pitch * num_rows, <span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                <span class="keywordflow">for</span>(std::size_t row_id = 0; row_id &lt; num_rows; row_id++)</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                {</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                    <span class="comment">// Copy each row.</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>                    <span class="comment">// We need a separate temp buffer to work with. Remember that the resource data and the mapped image data are actually the same thing!</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>                    std::memcpy(buffer.data() + (row_id * row_pitch), d.data() + (row_id * resource_row_pitch), row_pitch);</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>                }</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>                <span class="comment">// Finally, copy the whole buffer into the actual image data.</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>                std::memcpy(d.data(), buffer.data(), row_pitch * num_rows);</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>            }</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        }</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    }</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span><span class="comment">//--------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_output_manager.html#a02e0ff28afcedc90e5dbf326a8d3b7c6">  328</a></span>    <a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#ab54b9fbb26dbd8d10617b81ebe02e84b">OutputManager::OutputManager</a>(<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1_i_output.html">IOutput</a>* output, std::span&lt;vk2::Image&gt; window_buffer_images, <span class="keywordtype">bool</span> create_depth_images, <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html">vk2::LogicalDevice</a>&amp; ldev):</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    output(output),</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    ldev(&amp;ldev),</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    window_buffer_images(window_buffer_images),</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    window_buffer_depth_images(),</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    output_imageviews(),</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    render_pass(vk2::RenderPass::null()),</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    output_framebuffers()</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan OutputManager Create&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        this-&gt;create_output_resources(this-&gt;window_buffer_images, create_depth_images);</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    <a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#ab54b9fbb26dbd8d10617b81ebe02e84b">OutputManager::OutputManager</a>(<a class="code hl_class" href="classtz_1_1gl_1_1_output_manager.html">OutputManager</a>&amp;&amp; move):</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    output(move.output),</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    ldev(move.ldev),</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    window_buffer_images(std::move(move.window_buffer_images)),</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    window_buffer_depth_images(std::move(move.window_buffer_depth_images)),</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    output_imageviews(std::move(move.output_imageviews)),</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    output_depth_imageviews(std::move(move.output_depth_imageviews)),</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    render_pass(std::move(move.render_pass)),</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    output_framebuffers(std::move(move.output_framebuffers))</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    {</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; fb : this-&gt;output_framebuffers)</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        {</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>            fb.set_render_pass(this-&gt;render_pass);</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        }</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    }</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span> </div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <a class="code hl_class" href="classtz_1_1gl_1_1_output_manager.html">OutputManager</a>&amp; OutputManager::operator=(<a class="code hl_class" href="classtz_1_1gl_1_1_output_manager.html">OutputManager</a>&amp;&amp; rhs)</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    {</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        std::swap(this-&gt;output, rhs.output);</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        std::swap(this-&gt;ldev, rhs.ldev);</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        std::swap(this-&gt;window_buffer_images, rhs.window_buffer_images);</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        std::swap(this-&gt;window_buffer_depth_images, rhs.window_buffer_depth_images);</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        std::swap(this-&gt;output_imageviews, rhs.output_imageviews);</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        std::swap(this-&gt;output_depth_imageviews, rhs.output_depth_imageviews);</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        std::swap(this-&gt;render_pass, rhs.render_pass);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        std::swap(this-&gt;output_framebuffers, rhs.output_framebuffers);</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; fb : this-&gt;output_framebuffers)</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            fb.set_render_pass(this-&gt;render_pass);</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        }</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    }</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span> </div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_output_manager.html#ae06512762e0d178d753339b7bb5640a7">  374</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_render_pass.html">vk2::RenderPass</a>&amp; <a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#ae06512762e0d178d753339b7bb5640a7">OutputManager::get_render_pass</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        <span class="keywordflow">return</span> this-&gt;render_pass;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span> </div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_output_manager.html#a329f2c6f01274e8e7e2ee0d843180f11">  379</a></span>    std::span&lt;vk2::Image&gt; <a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#a329f2c6f01274e8e7e2ee0d843180f11">OutputManager::get_output_images</a>()</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    {</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        <span class="keywordflow">if</span>(this-&gt;output == <span class="keyword">nullptr</span> || this-&gt;output-&gt;get_target() == OutputTarget::Window)</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        {</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>            <span class="comment">// We&#39;re rendering into a window (which may be headless). The Device contained the swapchain images (or the offline headless images). Simply return those.</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>            <span class="keywordflow">return</span> this-&gt;window_buffer_images;</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(this-&gt;output-&gt;get_target() == OutputTarget::OffscreenImage)</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>            <span class="comment">// We have been provided an ImageOutput which will contain an ImageComponentVulkan. We need to retrieve that image and return a span covering it.</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>            <span class="comment">// TODO: Support multiple-render-targets.</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>            <a class="code hl_class" href="classtz_1_1gl_1_1_image_output.html">ImageOutput</a>&amp; out = <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classtz_1_1gl_1_1_image_output.html">ImageOutput</a>&amp;<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="classtz_1_1gl_1_1_image_output.html">ImageOutput</a>&amp;<span class="keyword">&gt;</span>(*this-&gt;output));</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>            <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_image.html">vk2::Image</a>&amp; output_image = out.get_component().vk_get_image();</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>            <span class="keywordflow">return</span> {&amp;output_image, 1};</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        }</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>            <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Unrecognised OutputTarget. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>            <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        }</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    }</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_output_manager.html#a9c63508e58a76c0ea35b331710305eea">  401</a></span>    std::span&lt;const vk2::Framebuffer&gt; <a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#a9c63508e58a76c0ea35b331710305eea">OutputManager::get_output_framebuffers</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        <span class="keywordflow">return</span> this-&gt;output_framebuffers;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    }</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_output_manager.html#ab4aa066e406ff01bbd113df2fecb0a25">  406</a></span>    std::span&lt;vk2::Framebuffer&gt; <a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#a9c63508e58a76c0ea35b331710305eea">OutputManager::get_output_framebuffers</a>()</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    {</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        <span class="keywordflow">return</span> this-&gt;output_framebuffers;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    }</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span> </div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_output_manager.html#aa3868005d4452edaecf7662f0c5abca1">  411</a></span>    <a class="code hl_class" href="classtz_1_1_vector.html">tz::Vec2ui</a> <a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#aa3868005d4452edaecf7662f0c5abca1">OutputManager::get_output_dimensions</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(!this-&gt;output_imageviews.empty(), <span class="stringliteral">&quot;OutputManager had no output views, so impossible to retrieve viewport dimensions. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        <span class="keywordflow">return</span> this-&gt;output_imageviews.front().get_image().get_dimensions();</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    }</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    </div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <span class="keywordtype">bool</span> OutputManager::has_depth_images()<span class="keyword"> const</span></div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        <span class="keywordflow">return</span> !this-&gt;window_buffer_depth_images.empty();</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span> </div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="keywordtype">void</span> OutputManager::create_output_resources(std::span&lt;vk2::Image&gt; window_buffer_images, <span class="keywordtype">bool</span> create_depth_images)</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    {</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan OutputManager (Output Resources Creation)&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        this-&gt;window_buffer_images = window_buffer_images;</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        this-&gt;window_buffer_depth_images.clear();</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>        this-&gt;output_imageviews.clear();</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        this-&gt;output_depth_imageviews.clear();</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>        this-&gt;output_framebuffers.clear();</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span> </div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(!this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#a329f2c6f01274e8e7e2ee0d843180f11">get_output_images</a>().empty(), <span class="stringliteral">&quot;RendererVulkan OutputManager was not given any output images. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        this-&gt;window_buffer_depth_images.reserve(this-&gt;window_buffer_images.size());</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        this-&gt;output_depth_imageviews.reserve(this-&gt;window_buffer_images.size());</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_image.html">vk2::Image</a>&amp; window_buffer_image : this-&gt;window_buffer_images)</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        {</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>            <span class="comment">// If we need depth images for depth testing, we&#39;ll create them based off of the existing output images we are provided from the Device.</span></div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>            <span class="keywordflow">if</span>(create_depth_images)</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>            {</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>                this-&gt;window_buffer_depth_images.push_back</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>                (<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_image_info.html">vk2::ImageInfo</a>{</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>                    .<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_image_info.html#afe7f9ff33dc26c2ace59e95993fbe513">device</a> = this-&gt;ldev,</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>                    .format = vk2::ImageFormat::Depth32_SFloat,</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>                    .dimensions = window_buffer_image.get_dimensions(),</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>                    .usage = {<a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga6ecb2d248a682aac08d93f4a7078161ea652fd1408b3de263e32147770a48931e">vk2::ImageUsage::DepthStencilAttachment</a>},</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>                    .residency = vk2::MemoryResidency::GPU</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                });</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>            }</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>            {</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                <span class="comment">// Otherwise, just create empty ones and don&#39;t bother using them.</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>                this-&gt;window_buffer_depth_images.push_back(vk2::Image::null());</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>            }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        }</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        <span class="keywordflow">for</span>(std::size_t i = 0; i &lt; this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#a329f2c6f01274e8e7e2ee0d843180f11">get_output_images</a>().size(); i++)</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        {</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>            <span class="comment">// We need to pass image views around in various places within the vulkan api. We create them here.</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>            this-&gt;output_imageviews.push_back</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>            (<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_image_view_info.html">vk2::ImageViewInfo</a>{</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>                .image = &amp;this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#a329f2c6f01274e8e7e2ee0d843180f11">get_output_images</a>()[i],</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>                .aspect = vk2::ImageAspect::Colour</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>            });</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>            <span class="comment">// If we made depth images earlier, create views for them too.</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>            <span class="keywordflow">if</span>(create_depth_images)</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>            {</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>                this-&gt;output_depth_imageviews.push_back</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>                (<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_image_view_info.html">vk2::ImageViewInfo</a>{</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>                    .image = &amp;this-&gt;window_buffer_depth_images[i],</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>                    .aspect = vk2::ImageAspect::Depth</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>                });</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>            }</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>            {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>                this-&gt;output_depth_imageviews.push_back(vk2::ImageView::null());</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>            }</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        }</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span> </div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(std::equal(this-&gt;output_imageviews.begin(), this-&gt;output_imageviews.end(), this-&gt;output_imageviews.begin(), [](<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_image_view.html">vk2::ImageView</a>&amp; a, <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_image_view.html">vk2::ImageView</a>&amp; b){return a.get_image().get_format() == b.get_image().get_format();}), <span class="stringliteral">&quot;Detected that not every output image in a RendererVulkan has the same format. This is not permitted as RenderPasses would not be compatible. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span> </div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        <span class="comment">// Now create an ultra-basic renderpass.</span></div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>        <span class="comment">// We&#39;re matching the ImageFormat of the provided output image.</span></div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>        <a class="code hl_enumeration" href="group__tz__gl__vk__image.html#ga4ca55be3d1c101900d800a78deeb595f">vk2::ImageLayout</a> final_layout;</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>        <span class="keywordflow">if</span>(this-&gt;output == <span class="keyword">nullptr</span> || this-&gt;output-&gt;get_target() == OutputTarget::Window)</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>        {</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>            final_layout = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595fadd058df87f5c88e3285a28ad7406a3c6">vk2::ImageLayout::Present</a>;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>        }</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(this-&gt;output-&gt;get_target() == OutputTarget::OffscreenImage)</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>        {</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            final_layout = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595fa19c3378429e6e0fce64ea1de4290a6d5">vk2::ImageLayout::ColourAttachment</a>;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        }</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>        {</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>            final_layout = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595faec0fc0100c4fc1ce4eea230c3dc10360">vk2::ImageLayout::Undefined</a>;</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>            <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Unknown RendererOutputType. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>        }</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span> </div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_render_pass_builder.html">vk2::RenderPassBuilder</a> rbuilder;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        rbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_render_pass_builder.html#ab5db592cbee7e8e81892b8c46eaa1909">set_device</a>(*this-&gt;ldev);</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        rbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_render_pass_builder.html#aacae02f036f07e6f321ac35420819ffe">with_attachment</a></div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        ({</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>            .format = this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_output_manager.html#a329f2c6f01274e8e7e2ee0d843180f11">get_output_images</a>().front().get_format(),</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>            .colour_depth_store = <a class="code hl_enumvalue" href="group__tz__gl__vk__graphics__pipeline__render__pass.html#ggab92f36711ba7bb90caf0e4a39748ed7dafdb0c388de01d545017cdf9ccf00eb72">vk2::StoreOp::Store</a>,</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>            .initial_layout = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595faec0fc0100c4fc1ce4eea230c3dc10360">vk2::ImageLayout::Undefined</a>,</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>            .final_layout = final_layout</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        });</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        <span class="keywordflow">if</span>(create_depth_images)</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        {</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>            rbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_render_pass_builder.html#aacae02f036f07e6f321ac35420819ffe">with_attachment</a></div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>            ({</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>                .format = this-&gt;window_buffer_depth_images.front().get_format(),</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>                .colour_depth_store = <a class="code hl_enumvalue" href="group__tz__gl__vk__graphics__pipeline__render__pass.html#ggab92f36711ba7bb90caf0e4a39748ed7da60a3629ef6a8f991f45d7a85f2458544">vk2::StoreOp::DontCare</a>,</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>                .initial_layout = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595faec0fc0100c4fc1ce4eea230c3dc10360">vk2::ImageLayout::Undefined</a>,</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>                .final_layout = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595fa652fd1408b3de263e32147770a48931e">vk2::ImageLayout::DepthStencilAttachment</a></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            });</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span> </div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_subpass_builder.html">vk2::SubpassBuilder</a> sbuilder;</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        sbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_subpass_builder.html#aea69c768e6d657c9e4e25102c0031dec">set_pipeline_context</a>(vk2::PipelineContext::Graphics);</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        sbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_subpass_builder.html#ae944eb1b322cc08eb4a9f7105cdab265">with_colour_attachment</a></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>        ({</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>            .attachment_idx = 0,</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>            .current_layout = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595fa19c3378429e6e0fce64ea1de4290a6d5">vk2::ImageLayout::ColourAttachment</a></div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>        });</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        <span class="keywordflow">if</span>(create_depth_images)</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>        {</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>            sbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_subpass_builder.html#af3b5e86fed158d329db4b084556eab85">with_depth_stencil_attachment</a></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>            ({</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>                .attachment_idx = 1,</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>                .current_layout = <a class="code hl_enumvalue" href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595fa652fd1408b3de263e32147770a48931e">vk2::ImageLayout::DepthStencilAttachment</a></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>            });</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>        }</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span> </div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>        this-&gt;render_pass = rbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_render_pass_builder.html#a2d7d398247571d6314e727923d8f7160">with_subpass</a>(sbuilder.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_subpass_builder.html#a2f4293bd1783d6dd12a94126622d5f36">build</a>()).build();</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span> </div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        <span class="keywordflow">for</span>(std::size_t i = 0; i &lt; this-&gt;output_imageviews.size(); i++)</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>        {</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>            <a class="code hl_class" href="classtz_1_1_vector.html">tz::Vec2ui</a> dims = this-&gt;output_imageviews[i].get_image().get_dimensions();</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>            <a class="code hl_class" href="classtz_1_1_basic_list.html">tz::BasicList&lt;vk2::ImageView*&gt;</a> attachments{&amp;this-&gt;output_imageviews[i]};</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>            <span class="keywordflow">if</span>(create_depth_images)</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>            {</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>                attachments.add(&amp;this-&gt;output_depth_imageviews[i]);</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>            }</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>            this-&gt;output_framebuffers.push_back</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>            (<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_framebuffer_info.html">vk2::FramebufferInfo</a>{</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>                .<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_framebuffer_info.html#ad7c9e83c24d89ff033a20bb08e07de8c">render_pass</a> = &amp;this-&gt;render_pass,</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>                .attachments = attachments,</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>                .dimensions = dims</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>            });</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        }</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    }</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span><span class="comment">//--------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span> </div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_graphics_pipeline_manager.html#ac1af9a276ec4d78aa302429e4e710abf">  554</a></span>    <a class="code hl_function" href="classtz_1_1gl_1_1_graphics_pipeline_manager.html#ac1af9a276ec4d78aa302429e4e710abf">GraphicsPipelineManager::GraphicsPipelineManager</a></div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    (</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>        <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1_shader_info.html">ShaderInfo</a>&amp; sinfo,</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>        <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout.html">vk2::DescriptorLayout</a>&amp; dlayout,</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>        <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_render_pass.html">vk2::RenderPass</a>&amp; render_pass,</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>        std::size_t frame_in_flight_count,</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>        <a class="code hl_class" href="classtz_1_1_vector.html">tz::Vec2ui</a> viewport_dimensions,</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        <span class="keywordtype">bool</span> depth_testing_enabled,</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        <span class="keywordtype">bool</span> alpha_blending_enabled</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    ):</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    shader(this-&gt;make_shader(dlayout.get_device(), sinfo)),</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    pipeline_layout(this-&gt;make_pipeline_layout(dlayout, frame_in_flight_count)),</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    graphics_pipeline(this-&gt;make_graphics_pipeline(viewport_dimensions, depth_testing_enabled, alpha_blending_enabled, render_pass)),</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    depth_testing_enabled(depth_testing_enabled)</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    {</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <span class="comment">// TODO: Implement vk2::LogicalDevice equality operator</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        <span class="comment">//tz_assert(dlayout.get_device() == render_pass.get_device(), &quot;&quot;);</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    }</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span> </div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <a class="code hl_function" href="classtz_1_1gl_1_1_graphics_pipeline_manager.html#ac1af9a276ec4d78aa302429e4e710abf">GraphicsPipelineManager::GraphicsPipelineManager</a>(<a class="code hl_class" href="classtz_1_1gl_1_1_graphics_pipeline_manager.html">GraphicsPipelineManager</a>&amp;&amp; move):</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    shader(std::move(move.shader)),</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    pipeline_layout(std::move(move.pipeline_layout)),</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    graphics_pipeline(std::move(move.graphics_pipeline)),</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    depth_testing_enabled(move.depth_testing_enabled)</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    {</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>        this-&gt;graphics_pipeline.set_layout(this-&gt;pipeline_layout);</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    }</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span> </div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    <a class="code hl_class" href="classtz_1_1gl_1_1_graphics_pipeline_manager.html">GraphicsPipelineManager</a>&amp; GraphicsPipelineManager::operator=(<a class="code hl_class" href="classtz_1_1gl_1_1_graphics_pipeline_manager.html">GraphicsPipelineManager</a>&amp;&amp; rhs)</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    {</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>        std::swap(this-&gt;shader, rhs.shader);</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>        std::swap(this-&gt;pipeline_layout, rhs.pipeline_layout);</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>        std::swap(this-&gt;graphics_pipeline, rhs.graphics_pipeline);</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>        std::swap(this-&gt;depth_testing_enabled, rhs.depth_testing_enabled);</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        this-&gt;graphics_pipeline.set_layout(this-&gt;pipeline_layout);</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span> </div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    }</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span> </div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_graphics_pipeline_manager.html#afd7746e0716cd251682e7d9f262d8913">  593</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_graphics_pipeline.html">vk2::GraphicsPipeline</a>&amp; <a class="code hl_function" href="classtz_1_1gl_1_1_graphics_pipeline_manager.html#afd7746e0716cd251682e7d9f262d8913">GraphicsPipelineManager::get_pipeline</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        <span class="keywordflow">return</span> this-&gt;graphics_pipeline;</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    }</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span> </div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    <span class="keywordtype">void</span> GraphicsPipelineManager::recreate(<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_render_pass.html">vk2::RenderPass</a>&amp; new_render_pass, <a class="code hl_class" href="classtz_1_1_vector.html">tz::Vec2ui</a> new_viewport_dimensions)</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    {</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan GraphicsPipelineManager Recreate&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>        this-&gt;graphics_pipeline =</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>        {{</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>            .shaders = this-&gt;shader.native_data(),</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>            .state = <a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_pipeline_state.html">vk2::PipelineState</a></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>            {</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>                .viewport = vk2::create_basic_viewport(<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classtz_1_1_vector.html">tz::Vec2</a><span class="keyword">&gt;</span>(new_viewport_dimensions)),</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>                .depth_stencil =</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>                {</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>                    .depth_testing = this-&gt;depth_testing_enabled,</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>                    .depth_writes = this-&gt;depth_testing_enabled</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>                }</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>            },</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>            .pipeline_layout = &amp;this-&gt;pipeline_layout,</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>            .render_pass = &amp;new_render_pass,</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>            .device = &amp;new_render_pass.get_device()</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>         }};</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    }</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span> </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_shader.html">vk2::Shader</a> GraphicsPipelineManager::make_shader(<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html">vk2::LogicalDevice</a>&amp; ldev, <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1_shader_info.html">ShaderInfo</a>&amp; sinfo)<span class="keyword"> const</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan GraphicsPipelineManager (Shader Create)&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(!sinfo.has_shader(ShaderStage::Compute), <span class="stringliteral">&quot;Compute Shaders are not yet implemented.&quot;</span>);</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>        std::vector&lt;char&gt; vtx_src, frg_src, cmp_src;</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>        <a class="code hl_class" href="classtz_1_1_basic_list.html">tz::BasicList&lt;vk2::ShaderModuleInfo&gt;</a> modules;</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>        <span class="keywordflow">if</span>(sinfo.has_shader(ShaderStage::Compute))</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>        {</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>            <span class="comment">// Compute, we only care about the compute shader.</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>            {</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>                std::string_view compute_source = sinfo.get_shader(ShaderStage::Compute);</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>                cmp_src.resize(compute_source.length());</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>                <a class="code hl_function" href="group__tz__gl__ogl2__buffers.html#gadc71f031030e7f584e43416c367717fc">std::copy</a>(compute_source.begin(), compute_source.end(), cmp_src.begin());</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>            }</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>            modules =</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>            {</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>                {</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>                    .device = &amp;ldev,</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>                    .type = vk2::ShaderType::Compute,</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>                    .code = cmp_src</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>                }</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>            };</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>        }</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>        {</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>            <span class="comment">// Graphics, must contain a Vertex and Fragment shader.</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>            <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(sinfo.has_shader(ShaderStage::Vertex), <span class="stringliteral">&quot;ShaderInfo must contain a non-empty vertex shader if no compute shader is present.&quot;</span>);</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>            <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(sinfo.has_shader(ShaderStage::Fragment), <span class="stringliteral">&quot;ShaderInfo must contain a non-empty fragment shader if no compute shader is present.&quot;</span>);</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>            {</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>                std::string_view vertex_source = sinfo.get_shader(ShaderStage::Vertex);</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>                vtx_src.resize(vertex_source.length());</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>                <a class="code hl_function" href="group__tz__gl__ogl2__buffers.html#gadc71f031030e7f584e43416c367717fc">std::copy</a>(vertex_source.begin(), vertex_source.end(), vtx_src.begin());</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span> </div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>                std::string_view fragment_source = sinfo.get_shader(ShaderStage::Fragment);</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>                frg_src.resize(fragment_source.length());</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>                <a class="code hl_function" href="group__tz__gl__ogl2__buffers.html#gadc71f031030e7f584e43416c367717fc">std::copy</a>(fragment_source.begin(), fragment_source.end(), frg_src.begin());</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>            }</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>            modules = </div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>            {</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>                {</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>                    .device = &amp;ldev,</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>                    .type = vk2::ShaderType::Vertex,</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>                    .code = vtx_src</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>                },</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>                {</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>                    .device = &amp;ldev,</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>                    .type = vk2::ShaderType::Fragment,</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>                    .code = frg_src</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                }</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>            };</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>        }</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>        <span class="keywordflow">return</span></div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>        {{</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>            .device = &amp;ldev,</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>            .modules = modules</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        }};</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>    }</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span> </div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_pipeline_layout.html">vk2::PipelineLayout</a> GraphicsPipelineManager::make_pipeline_layout(<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout.html">vk2::DescriptorLayout</a>&amp; dlayout, std::size_t frame_in_flight_count)<span class="keyword"> const</span></div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>        std::vector&lt;const vk2::DescriptorLayout*&gt; layout_ptrs(frame_in_flight_count, &amp;dlayout);</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        <span class="keywordflow">return</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>        {{</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>            .descriptor_layouts = std::move(layout_ptrs),</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>            .logical_device = &amp;dlayout.get_device()</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>        }};</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    }</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span> </div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>    <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_graphics_pipeline.html">vk2::GraphicsPipeline</a> GraphicsPipelineManager::make_graphics_pipeline(<a class="code hl_class" href="classtz_1_1_vector.html">tz::Vec2ui</a> viewport_dimensions, <span class="keywordtype">bool</span> depth_testing_enabled, <span class="keywordtype">bool</span> alpha_blending_enabled, <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_render_pass.html">vk2::RenderPass</a>&amp; render_pass)<span class="keyword"> const</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>        <a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_graphics_pipeline_info.html">vk2::GraphicsPipelineInfo</a> gpinfo;</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>        gpinfo.shaders = this-&gt;shader.native_data();</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>        gpinfo.state.viewport = vk2::create_basic_viewport(<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classtz_1_1_vector.html">tz::Vec2</a><span class="keyword">&gt;</span>(viewport_dimensions));</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>        gpinfo.state.depth_stencil =</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>        {</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>            .<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_depth_stencil_state.html#a6e3b509c9f2df1bd154f1e0f8b42ef41">depth_testing</a> = depth_testing_enabled,</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>            .depth_writes = depth_testing_enabled</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>        };</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span> </div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>        gpinfo.state.colour_blend =</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>        {</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>            .attachment_states = alpha_blending_enabled ? <a class="code hl_class" href="classtz_1_1_basic_list.html">tz::BasicList&lt;vk2::ColourBlendState::AttachmentState&gt;</a>{vk2::ColourBlendState::alpha_blending()} : <a class="code hl_class" href="classtz_1_1_basic_list.html">tz::BasicList&lt;vk2::ColourBlendState::AttachmentState&gt;</a>{vk2::ColourBlendState::no_blending()},</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>            .logical_operator = VK_LOGIC_OP_COPY</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>        };</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>        gpinfo.pipeline_layout = &amp;this-&gt;pipeline_layout;</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>        gpinfo.render_pass = &amp;render_pass;</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        gpinfo.device = &amp;render_pass.get_device();</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span> </div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>        <span class="keywordflow">return</span> {gpinfo};</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    }</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span><span class="comment">//--------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span> </div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_command_processor.html#ab8cdf2464510579fe77d64cd437028be">  712</a></span>    <a class="code hl_function" href="classtz_1_1gl_1_1_command_processor.html#ab8cdf2464510579fe77d64cd437028be">CommandProcessor::CommandProcessor</a>(<a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html">vk2::LogicalDevice</a>&amp; ldev, std::size_t frame_in_flight_count, OutputTarget output_target, std::span&lt;vk2::Framebuffer&gt; output_framebuffers):</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    requires_present(output_target == OutputTarget::<a class="code hl_class" href="classtz_1_1_window.html">Window</a>),</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    graphics_queue(ldev.get_hardware_queue</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    ({</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>        .field = {vk2::QueueFamilyType::Graphics},</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>        .present_support = this-&gt;requires_present</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    })),</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    command_pool</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    ({</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        .queue = this-&gt;graphics_queue,</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>        .flags = {vk2::CommandPoolFlag::Reusable}</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>    }),</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    commands(this-&gt;command_pool.allocate_buffers</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>    ({</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>        .buffer_count = static_cast&lt;std::uint32_t&gt;(frame_in_flight_count + 1)</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    })),</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    frame_in_flight_count(frame_in_flight_count),</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    image_semaphores(),</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    render_work_semaphores(),</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    in_flight_fences(),</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    images_in_flight(this-&gt;frame_in_flight_count, <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    {</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(output_framebuffers.size() == this-&gt;frame_in_flight_count, <span class="stringliteral">&quot;Provided incorrect number of output framebuffers. We must have enough framebuffers for each frame we have in flight. Provided %zu framebuffers, but need %zu because that&#39;s how many frames we have in flight.&quot;</span>, output_framebuffers.size(), this-&gt;frame_in_flight_count);</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(this-&gt;commands.success(), <span class="stringliteral">&quot;Failed to allocate from CommandPool&quot;</span>);</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        <span class="keywordflow">for</span>(std::size_t i = 0; i &lt; this-&gt;frame_in_flight_count; i++)</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>        {</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>            this-&gt;image_semaphores.emplace_back(ldev);</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>            this-&gt;render_work_semaphores.emplace_back(ldev);</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>            this-&gt;in_flight_fences.emplace_back</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>            (<a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1_fence_info.html">vk2::FenceInfo</a>{</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>                .<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_fence_info.html#a18b3aa2916e1759baf8ec26eacacba2c">device</a> = &amp;ldev,</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>                .initially_signalled = <span class="keyword">true</span></div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>            });</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>        }</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    }</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span> </div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_command_processor.html#a332f26f09b8abae2ca30c0a94e117c56">  748</a></span>    std::span&lt;const vk2::CommandBuffer&gt; <a class="code hl_function" href="classtz_1_1gl_1_1_command_processor.html#a332f26f09b8abae2ca30c0a94e117c56">CommandProcessor::get_render_command_buffers</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>        <span class="keywordflow">return</span> {this-&gt;commands.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#a94d0ec11da42430225b873b63079c996">buffers</a>.begin(), this-&gt;frame_in_flight_count};</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>    }</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span> </div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_command_processor.html#abc77e902f90be1a450e0f9183f05950c">  753</a></span>    std::span&lt;vk2::CommandBuffer&gt; <a class="code hl_function" href="classtz_1_1gl_1_1_command_processor.html#a332f26f09b8abae2ca30c0a94e117c56">CommandProcessor::get_render_command_buffers</a>()</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>    {</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>        <span class="keywordflow">return</span> {this-&gt;commands.<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#a94d0ec11da42430225b873b63079c996">buffers</a>.begin(), this-&gt;frame_in_flight_count};</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>    }</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span> </div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_command_processor.html#ad03bad20c91da8d9b203901b08cae4da">  758</a></span>    <a class="code hl_struct" href="structtz_1_1gl_1_1_command_processor_1_1_render_work_submit_result.html">CommandProcessor::RenderWorkSubmitResult</a> <a class="code hl_function" href="classtz_1_1gl_1_1_command_processor.html#ad03bad20c91da8d9b203901b08cae4da">CommandProcessor::do_render_work</a>(<a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_swapchain.html">vk2::Swapchain</a>* maybe_swapchain)</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>    {</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan CommandProcessor (Do Render Work)&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>        <span class="keywordflow">if</span>(this-&gt;requires_present)</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        {</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>            <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(maybe_swapchain != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;Trying to do render work with presentation, but no Swapchain provided. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>            <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_swapchain.html">vk2::Swapchain</a>&amp; swapchain = *maybe_swapchain;</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>            <span class="comment">// Submit &amp; Present</span></div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>            this-&gt;in_flight_fences[this-&gt;current_frame].wait_until_signalled();</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>            this-&gt;output_image_index = swapchain.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_swapchain.html#a96bd4cf27464216c5294b65c939ae525">acquire_image</a></div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>            ({</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>                .signal_semaphore = &amp;this-&gt;image_semaphores[current_frame]</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>            }).image_index;</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span> </div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>            <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_fence.html">vk2::Fence</a>*&amp; target_image = this-&gt;images_in_flight[this-&gt;output_image_index];</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>            <span class="keywordflow">if</span>(target_image != <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>            {</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>                target_image-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_fence.html#a89b2a5c13856021cc045c2223d4d9539">wait_until_signalled</a>();</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>            }</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>            target_image = &amp;this-&gt;in_flight_fences[this-&gt;output_image_index];</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span> </div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>            this-&gt;in_flight_fences[this-&gt;current_frame].unsignal();</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>            this-&gt;graphics_queue-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1hardware_1_1_queue.html#a8a26295a1157308783f3606ddd47922e">submit</a></div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>            ({</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>                .command_buffers = {&amp;this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_command_processor.html#a332f26f09b8abae2ca30c0a94e117c56">get_render_command_buffers</a>()[this-&gt;output_image_index]},</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>                .waits =</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>                {</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>                    <a class="code hl_struct" href="structtz_1_1gl_1_1vk2_1_1hardware_1_1_queue_1_1_submit_info_1_1_wait_info.html">vk2::hardware::Queue::SubmitInfo::WaitInfo</a></div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>                    {</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>                        .<a class="code hl_variable" href="structtz_1_1gl_1_1vk2_1_1hardware_1_1_queue_1_1_submit_info_1_1_wait_info.html#a0a4757e6b992ea078cad8039d08ec587">wait_semaphore</a> = &amp;this-&gt;image_semaphores[this-&gt;current_frame],</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>                        .wait_stage = <a class="code hl_enumvalue" href="group__tz__gl__vk__graphics__pipeline.html#ggaa581c5a329a76e48f41ca02bd263251aaec356eeffd7d26280475eadca9140604">vk2::PipelineStage::ColourAttachmentOutput</a></div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>                    }</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>                },</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>                .signal_semaphores = {&amp;this-&gt;render_work_semaphores[this-&gt;current_frame]},</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>                .execution_complete_fence = &amp;this-&gt;in_flight_fences[this-&gt;current_frame]</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>            });</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span> </div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>            <a class="code hl_struct" href="structtz_1_1gl_1_1_command_processor_1_1_render_work_submit_result.html">CommandProcessor::RenderWorkSubmitResult</a> result;</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span> </div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>            result.present = this-&gt;graphics_queue-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1hardware_1_1_queue.html#aa4f3d7a351fe699cd90ea6457c64caee">present</a></div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>            ({</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>                .wait_semaphores = {&amp;this-&gt;render_work_semaphores[this-&gt;current_frame]},</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>                .swapchain = maybe_swapchain,</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>                .swapchain_image_index = this-&gt;output_image_index</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>            });</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>            this-&gt;current_frame = (this-&gt;current_frame + 1) % this-&gt;frame_in_flight_count;</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>            <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>        }</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        {</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>            <span class="comment">// Headlessly</span></div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>            <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Headless rendering not yet implemented.&quot;</span>);</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>            <span class="keywordflow">return</span> {.present = <a class="code hl_enumvalue" href="classtz_1_1gl_1_1vk2_1_1hardware_1_1_queue.html#a85b458bfb664176d140abf3b6b627e67aca1a7c2d3dbabec931605566d7db0117">vk2::hardware::Queue::PresentResult::Fail_FatalError</a>};</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        }</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    }</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span> </div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>    <span class="keywordtype">void</span> CommandProcessor::wait_pending_commands_complete()</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>    {</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan CommandProcessor (Waiting on commands to complete)&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_fence.html">vk2::Fence</a>&amp; fence : this-&gt;in_flight_fences)</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        {</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>            fence.wait_until_signalled();</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        }</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>    }</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span> </div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span><span class="comment">//--------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span> </div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_renderer_vulkan.html#af33af3704e58ef0587f4823682723d55">  825</a></span>    <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#af33af3704e58ef0587f4823682723d55">RendererVulkan::RendererVulkan</a>(<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1_renderer_info_common.html">RendererInfoVulkan</a>&amp; info, <span class="keyword">const</span> <a class="code hl_struct" href="structtz_1_1gl_1_1_renderer_device_info_vulkan.html">RendererDeviceInfoVulkan</a>&amp; device_info):</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    ldev(device_info.device),</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>    resources(info.get_resources(), *this-&gt;ldev, this-&gt;get_frame_in_flight_count(device_info)),</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    output(info.get_output(), device_info.output_images, !info.get_options().contains(<a class="code hl_enumeration" href="group__tz__gl2__renderer.html#ga3f915e283a9998c54f738b2735c206ce">RendererOption</a>::<a class="code hl_enumvalue" href="group__tz__gl2__renderer.html#gga3f915e283a9998c54f738b2735c206ceaae6026b17332e73cf67e9d0461759d00">NoDepthTesting</a>), *this-&gt;ldev),</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    pipeline(info.shader(), this-&gt;resources.get_descriptor_layout(), this-&gt;output.get_render_pass(), this-&gt;get_frame_in_flight_count(device_info), output.get_output_dimensions(), !info.get_options().contains(<a class="code hl_enumeration" href="group__tz__gl2__renderer.html#ga3f915e283a9998c54f738b2735c206ce">RendererOption</a>::<a class="code hl_enumvalue" href="group__tz__gl2__renderer.html#gga3f915e283a9998c54f738b2735c206ceaae6026b17332e73cf67e9d0461759d00">NoDepthTesting</a>), info.get_options().contains(<a class="code hl_enumeration" href="group__tz__gl2__renderer.html#ga3f915e283a9998c54f738b2735c206ce">RendererOption</a>::<a class="code hl_enumvalue" href="group__tz__gl2__renderer.html#gga3f915e283a9998c54f738b2735c206cea8bb7dc17a08b6afa19cc4c18c6334eee">AlphaBlending</a>)),</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>    command(*this-&gt;ldev, this-&gt;get_frame_in_flight_count(device_info), info.get_output() != nullptr ? info.get_output()-&gt;get_target() : OutputTarget::<a class="code hl_class" href="classtz_1_1_window.html">Window</a>, this-&gt;output.get_output_framebuffers()),</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>    maybe_swapchain(device_info.maybe_swapchain),</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>    options(info.get_options()),</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>    clear_colour(info.get_clear_colour())</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>    {</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan Create&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>        <span class="comment">// If we&#39;re not headless, we should register a callback for our lifetime.</span></div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>        <span class="keywordflow">if</span>(info.get_output() == <span class="keyword">nullptr</span> || info.get_output()-&gt;get_target() == OutputTarget::Window)</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        {</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>            this-&gt;device_resize_callback = device_info.<a class="code hl_variable" href="structtz_1_1gl_1_1_renderer_device_info_vulkan.html#a82ca49ea66db14a2b0e53d1a81fa042a">resize_callback</a>;</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>            this-&gt;window_resize_callback = this-&gt;device_resize_callback-&gt;<a class="code hl_function" href="classtz_1_1_callback.html#a9d053c8675bb946ab7aaf10e54e4170b">add_callback</a>([<span class="keyword">this</span>](<a class="code hl_struct" href="structtz_1_1gl_1_1_renderer_resize_info_vulkan.html">RendererResizeInfoVulkan</a> resize_info){this-&gt;handle_resize(resize_info);});</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>        }</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span> </div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>        this-&gt;setup_static_resources();</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>        this-&gt;setup_render_commands();</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>    }</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span> </div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>    <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#af33af3704e58ef0587f4823682723d55">RendererVulkan::RendererVulkan</a>(<a class="code hl_class" href="classtz_1_1gl_1_1_renderer_vulkan.html">RendererVulkan</a>&amp;&amp; move):</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>    ldev(move.ldev),</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    resources(std::move(move.resources)),</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>    output(std::move(move.output)),</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    pipeline(std::move(move.pipeline)),</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    command(std::move(move.command)),</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    maybe_swapchain(move.maybe_swapchain),</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    options(move.options),</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    clear_colour(move.clear_colour),</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    tri_count(move.tri_count),</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>    device_resize_callback(move.device_resize_callback),</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    window_resize_callback(move.window_resize_callback)</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    {</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>        this-&gt;device_resize_callback-&gt;<a class="code hl_function" href="classtz_1_1_callback.html#ab11b08a5ecee3a49c619aa18187cb6e8">remove_callback</a>(move.window_resize_callback);</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        this-&gt;device_resize_callback-&gt;<a class="code hl_function" href="classtz_1_1_callback.html#ab11b08a5ecee3a49c619aa18187cb6e8">remove_callback</a>(this-&gt;window_resize_callback);</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>        this-&gt;window_resize_callback = this-&gt;device_resize_callback-&gt;<a class="code hl_function" href="classtz_1_1_callback.html#a9d053c8675bb946ab7aaf10e54e4170b">add_callback</a>([<span class="keyword">this</span>](<a class="code hl_struct" href="structtz_1_1gl_1_1_renderer_resize_info_vulkan.html">RendererResizeInfoVulkan</a> resize_info){this-&gt;handle_resize(resize_info);});</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>    }</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span> </div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>    RendererVulkan::~RendererVulkan()</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    {</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>        <span class="keywordflow">if</span>(this-&gt;device_resize_callback != <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>        {</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>            this-&gt;device_resize_callback-&gt;<a class="code hl_function" href="classtz_1_1_callback.html#ab11b08a5ecee3a49c619aa18187cb6e8">remove_callback</a>(this-&gt;window_resize_callback);</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>            this-&gt;window_resize_callback = <a class="code hl_variable" href="group__tz__core__utility.html#gac7ea0910b66986864e3463748d8bd94a">tz::nullhand</a>;</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>        }</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>        this-&gt;ldev-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html#a467dc1131247e4bb9e97e5274e860bc7">wait_until_idle</a>();</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>    }</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span> </div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>    <a class="code hl_class" href="classtz_1_1gl_1_1_renderer_vulkan.html">RendererVulkan</a>&amp; RendererVulkan::operator=(<a class="code hl_class" href="classtz_1_1gl_1_1_renderer_vulkan.html">RendererVulkan</a>&amp;&amp; rhs)</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>    {</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>        std::swap(this-&gt;ldev, rhs.ldev);</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        std::swap(this-&gt;resources, rhs.resources);</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        std::swap(this-&gt;output, rhs.output);</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>        std::swap(this-&gt;pipeline, rhs.pipeline);</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>        std::swap(this-&gt;command, rhs.command);</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>        std::swap(this-&gt;maybe_swapchain, rhs.maybe_swapchain);</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>        std::swap(this-&gt;options, rhs.options);</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>        std::swap(this-&gt;clear_colour, rhs.clear_colour);</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        std::swap(this-&gt;tri_count, rhs.tri_count);</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>        std::swap(this-&gt;device_resize_callback, rhs.device_resize_callback);</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        std::swap(this-&gt;window_resize_callback, rhs.window_resize_callback);</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        this-&gt;device_resize_callback-&gt;<a class="code hl_function" href="classtz_1_1_callback.html#ab11b08a5ecee3a49c619aa18187cb6e8">remove_callback</a>(rhs.window_resize_callback);</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        this-&gt;device_resize_callback-&gt;<a class="code hl_function" href="classtz_1_1_callback.html#ab11b08a5ecee3a49c619aa18187cb6e8">remove_callback</a>(this-&gt;window_resize_callback);</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>        this-&gt;window_resize_callback = this-&gt;device_resize_callback-&gt;<a class="code hl_function" href="classtz_1_1_callback.html#a9d053c8675bb946ab7aaf10e54e4170b">add_callback</a>([<span class="keyword">this</span>](<a class="code hl_struct" href="structtz_1_1gl_1_1_renderer_resize_info_vulkan.html">RendererResizeInfoVulkan</a> resize_info){this-&gt;handle_resize(resize_info);});</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>    }</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span> </div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_renderer_vulkan.html#a4812c8aac2fe6dae638d8f61c9c6e1fb">  894</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#a4812c8aac2fe6dae638d8f61c9c6e1fb">RendererVulkan::resource_count</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>        <span class="keywordflow">return</span> this-&gt;resources.count();</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>    }</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span> </div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_renderer_vulkan.html#ac425ea8feccd0b4a9614f47fa251ca59">  899</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1_i_resource.html">IResource</a>* <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#ac425ea8feccd0b4a9614f47fa251ca59">RendererVulkan::get_resource</a>(<a class="code hl_class" href="classtz_1_1_handle.html">ResourceHandle</a> handle)<span class="keyword"> const</span></div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>        <span class="keywordflow">return</span> this-&gt;resources.get(handle);</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>    }</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span> </div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_renderer_vulkan.html#a504aa09578f889a7c66a83ff86d3034f">  904</a></span>    <a class="code hl_class" href="classtz_1_1gl_1_1_i_resource.html">IResource</a>* <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#ac425ea8feccd0b4a9614f47fa251ca59">RendererVulkan::get_resource</a>(<a class="code hl_class" href="classtz_1_1_handle.html">ResourceHandle</a> handle)</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>    {</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>        <span class="keywordflow">return</span> this-&gt;resources.get(handle);</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>    }</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span> </div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_renderer_vulkan.html#a5c356fc12c93eb44cc40f5e0676e4626">  909</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1_i_component.html">IComponent</a>* <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#a5c356fc12c93eb44cc40f5e0676e4626">RendererVulkan::get_component</a>(<a class="code hl_class" href="classtz_1_1_handle.html">ResourceHandle</a> handle)<span class="keyword"> const</span></div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        <span class="keywordflow">return</span> this-&gt;resources.<a class="code hl_function" href="classtz_1_1gl_1_1_resource_storage.html#a0524a8fb3d8fd8c1c5735e89e06f4cc7">get_component</a>(handle);</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>    }</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span> </div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_renderer_vulkan.html#aafde2a8cc827f99e13fc61791b6c7d6b">  914</a></span>    <a class="code hl_class" href="classtz_1_1gl_1_1_i_component.html">IComponent</a>* <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#a5c356fc12c93eb44cc40f5e0676e4626">RendererVulkan::get_component</a>(<a class="code hl_class" href="classtz_1_1_handle.html">ResourceHandle</a> handle)</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>    {</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>        <span class="keywordflow">return</span> this-&gt;resources.<a class="code hl_function" href="classtz_1_1gl_1_1_resource_storage.html#a0524a8fb3d8fd8c1c5735e89e06f4cc7">get_component</a>(handle);</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>    }</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span> </div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_renderer_vulkan.html#a610cf9bae85091c03bd5b919b9ba113f">  919</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1_enum_field.html">RendererOptions</a>&amp; <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#a610cf9bae85091c03bd5b919b9ba113f">RendererVulkan::get_options</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        <span class="keywordflow">return</span> this-&gt;options;</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>    }</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span> </div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_renderer_vulkan.html#ae865429cebe32bd6aab0c63b75d97f08">  924</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#ae865429cebe32bd6aab0c63b75d97f08">RendererVulkan::render</a>()</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>    {</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan Render&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>        this-&gt;resources.write_padded_image_data();</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>        <a class="code hl_struct" href="structtz_1_1gl_1_1_command_processor_1_1_render_work_submit_result.html">CommandProcessor::RenderWorkSubmitResult</a> result = this-&gt;command.<a class="code hl_function" href="classtz_1_1gl_1_1_command_processor.html#ad03bad20c91da8d9b203901b08cae4da">do_render_work</a>(this-&gt;maybe_swapchain);</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        <span class="keywordflow">switch</span>(result.present)</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>        {</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classtz_1_1gl_1_1vk2_1_1hardware_1_1_queue.html#a85b458bfb664176d140abf3b6b627e67a2debf81c3d7e76f030f7d7577971f530">vk2::hardware::Queue::PresentResult::Success_Suboptimal</a>:</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>            [[fallthrough]];</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classtz_1_1gl_1_1vk2_1_1hardware_1_1_queue.html#a85b458bfb664176d140abf3b6b627e67a505a83f220c02df2f85c3810cd9ceb38">vk2::hardware::Queue::PresentResult::Success</a>:</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span> </div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>                <span class="comment">// TODO: this-&gt;handle_resize();</span></div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>                <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Presentation Failed. You probably tried to resize/minimise the window, but support for this on Vulkan is not yet implemented.&quot;</span>);</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>        }</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>    }</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span> </div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_renderer_vulkan.html#aca759d82373f617453912e4a438dbc8b">  943</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#ae865429cebe32bd6aab0c63b75d97f08">RendererVulkan::render</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tri_count)</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>    {</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        <span class="keywordflow">if</span>(this-&gt;tri_count != tri_count)</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>        {</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>            this-&gt;tri_count = tri_count;</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>            this-&gt;command.wait_pending_commands_complete();</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>            this-&gt;setup_render_commands();</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        }</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>        this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#ae865429cebe32bd6aab0c63b75d97f08">render</a>();</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>    }</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span> </div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno"><a class="line" href="classtz_1_1gl_1_1_renderer_vulkan.html#ac7d7ab5df374b27cf96175033e3add99">  954</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#ac7d7ab5df374b27cf96175033e3add99">RendererVulkan::edit</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structtz_1_1gl_1_1_renderer_edit_request.html">RendererEditRequest</a>&amp; edit_request)</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>    {</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan Edit&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        <span class="keywordflow">if</span>(edit_request.<a class="code hl_variable" href="structtz_1_1gl_1_1_renderer_edit_request.html#a1cd98819434d9cc853c7729a2c3aad83">component_edits</a>.empty())</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>        {</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>        }</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>        <span class="comment">// We have buffer/image components we need to edit.</span></div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>        <span class="comment">// Firstly make sure all render work is done, then we need to update the resource storage and then write new descriptors for resized resources.</span></div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>        this-&gt;command.wait_pending_commands_complete();</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>        <span class="comment">// Now, if we resized any static resources we&#39;re going to have to run scratch commands again.</span></div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>        <span class="keywordtype">bool</span> resized_static_resources = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> RendererComponentEditRequest&amp; component_edit : edit_request.<a class="code hl_variable" href="structtz_1_1gl_1_1_renderer_edit_request.html#a1cd98819434d9cc853c7729a2c3aad83">component_edits</a>)</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>        {</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>            std::visit(</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>            [<span class="keyword">this</span>](<span class="keyword">auto</span>&amp;&amp; arg)</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>            {</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>                <span class="keyword">using</span> T = std::decay_t&lt;<span class="keyword">decltype</span>(arg)&gt;;</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>                <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(std::is_same_v&lt;T, RendererBufferComponentEditRequest&gt;)</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>                {</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>                    <span class="comment">// We need to create a new buffer with the correct size, and swap it with the old one (which can now die because we&#39;re not rendering anymore).</span></div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>                    <span class="comment">// If it&#39;s a dynamic resource, we need to unmap the BufferResource from it though.</span></div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>                    <span class="keyword">auto</span> buf_comp = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classtz_1_1gl_1_1_buffer_component_vulkan.html">BufferComponentVulkan</a>*<span class="keyword">&gt;</span>(this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#a5c356fc12c93eb44cc40f5e0676e4626">get_component</a>(arg.buffer_handle));</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>                    <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(buf_comp-&gt;get_resource()-&gt;get_access() == <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaa21f8913440ad1edc3ddaa47d14b54811">ResourceAccess::DynamicVariable</a>, <span class="stringliteral">&quot;Detected attempted resize of buffer resource (id %zu), but it ResourceAccess is not DynamicVariable. This means it is a fixed-size resource, so attempting to resize it is invalid.&quot;</span>, <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span>tz::HandleValue<span class="keyword">&gt;</span>(arg.buffer_handle)));</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>                    <span class="comment">// Make new buffer.</span></div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>                    <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_buffer.html">vk2::Buffer</a>&amp; buf = buf_comp-&gt;vk_get_buffer();</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                    <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_buffer.html">vk2::Buffer</a> resized_copy</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>                    {{</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                        .device = &amp;buf.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#ad3210893be0901d09f53d94648362b9b">get_device</a>(),</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>                        .size_bytes = arg.size,</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>                        .usage = buf.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#ac84676ea5d9d5f459cb9c385a1032729">get_usage</a>(),</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>                        .residency = buf.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#a410043be11f04c500704a8fb0956d5cc">get_residency</a>()</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>                    }};</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>                    <span class="comment">// Swap them. If we&#39;re dynamic, we move the data over now, otherwise we will sort that later when we setup static resources again.</span></div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>                    <span class="keywordflow">if</span>(buf_comp-&gt;get_resource()-&gt;get_access() == <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaa423193eec104eaf530d2ff93fea39656">ResourceAccess::DynamicFixed</a> || buf_comp-&gt;get_resource()-&gt;get_access() == <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaa21f8913440ad1edc3ddaa47d14b54811">ResourceAccess::DynamicVariable</a>)</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>                    {</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>                        <span class="comment">// Unmap resource from previous buffer component, and instead map it to this one. But first we want to copy over the old data.</span></div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>                        std::span&lt;const std::byte&gt; old_data = buf.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_buffer.html#a238ec50ea5cc40a351e1ebe487ce86db">map_as</a>&lt;<span class="keyword">const</span> std::byte&gt;();</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>                        std::span&lt;std::byte&gt; new_data = resized_copy.map_as&lt;std::byte&gt;();</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>                        std::size_t byte_copy_length = std::min(old_data.size_bytes(), new_data.size_bytes());</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>                        <span class="keyword">auto</span> old_data_end = old_data.begin() + byte_copy_length;</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>                        <span class="comment">// do the copy.</span></div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>                        <a class="code hl_function" href="group__tz__gl__ogl2__buffers.html#gadc71f031030e7f584e43416c367717fc">std::copy</a>(old_data.begin(), old_data_end, new_data.begin());</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>                        <span class="comment">// Now remap the resource to the new component. Then we can swap.</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>                        buf_comp-&gt;get_resource()-&gt;set_mapped_data(new_data);</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>                    }</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>                    <span class="comment">// Swap the buffers, old one can now die. Remember if we&#39;re static the data can&#39;t change, so the initial resource data is still correct so we don&#39;t have to do anything.</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>                    std::swap(buf, resized_copy);</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>                    <span class="comment">// Now update all descriptors.</span></div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>                    this-&gt;resources.sync_descriptors(<span class="keyword">false</span>);</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>                }</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(std::is_same_v&lt;T, RendererImageComponentEditRequest&gt;)</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>                {</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>                    <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Resizing images is not yet implemented&quot;</span>);</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>                }</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>                {</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>                    <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Unsupported Variant Type&quot;</span>);</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>                }</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            }, component_edit);</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>        }</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>        <span class="keywordflow">if</span>(resized_static_resources)</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>        {</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>            this-&gt;setup_static_resources();</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>        }</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>    }</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span> </div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>    <span class="keywordtype">void</span> RendererVulkan::setup_static_resources()</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    {</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan Setup Static Resources&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>        <span class="comment">// Create staging buffers for each buffer and texture resource, and then fill the data with the resource data.</span></div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>        std::vector&lt;BufferComponentVulkan*&gt; buffer_components;</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>        std::vector&lt;ImageComponentVulkan*&gt; image_components;</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>        <span class="keywordflow">for</span>(std::size_t i = 0; i &lt; this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#a4812c8aac2fe6dae638d8f61c9c6e1fb">resource_count</a>(); i++)</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>        {</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>            <a class="code hl_class" href="classtz_1_1gl_1_1_i_component.html">IComponent</a>* icomp = this-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_renderer_vulkan.html#a5c356fc12c93eb44cc40f5e0676e4626">get_component</a>(<span class="keyword">static_cast&lt;</span>tz::HandleValue<span class="keyword">&gt;</span>(i));</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>            <span class="keywordflow">switch</span>(icomp-&gt;get_resource()-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a37e79891f0c1e275cc8e52e5964dee00">get_type</a>())</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>            {</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggac6834632961a6223450b780b32ced684a7e62bc342f41c946868f0ea6f0b712d8">ResourceType::Buffer</a>:</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>                    buffer_components.push_back(<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classtz_1_1gl_1_1_buffer_component_vulkan.html">BufferComponentVulkan</a>*<span class="keyword">&gt;</span>(icomp));</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__tz__gl2__res.html#ggac6834632961a6223450b780b32ced684abe53a0541a6d36f6ecb879fa2c584b08">ResourceType::Image</a>:</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>                    image_components.push_back(<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classtz_1_1gl_1_1_image_component_vulkan.html">ImageComponentVulkan</a>*<span class="keyword">&gt;</span>(icomp));</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>                    <a class="code hl_define" href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a>(<span class="stringliteral">&quot;Unknown ResourceType.&quot;</span>);</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>            }</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>        }</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span> </div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>        <span class="comment">// Staging buffers.</span></div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        std::vector&lt;vk2::Buffer&gt; staging_buffers;</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>        staging_buffers.reserve(buffer_components.size());</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>        std::vector&lt;vk2::Buffer&gt; staging_image_buffers;</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>        staging_image_buffers.reserve(image_components.size());</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>        <span class="comment">// Fill buffers with resource data.</span></div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>        std::transform(buffer_components.begin(), buffer_components.end(), std::back_inserter(staging_buffers),</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>        [](<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1_buffer_component_vulkan.html">BufferComponentVulkan</a>* buf)-&gt;vk2::Buffer</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>        {</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>            return</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>            {{</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>                .device = &amp;buf-&gt;vk_get_buffer().get_device(),</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>                .size_bytes = buf-&gt;size(),</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>                .usage = {vk2::BufferUsage::TransferSource},</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>                .residency = vk2::MemoryResidency::CPU</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>            }};</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>        });</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>        <span class="comment">// Same with images.</span></div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>        std::transform(image_components.begin(), image_components.end(), std::back_inserter(staging_image_buffers),</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>        [](<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1_image_component_vulkan.html">ImageComponentVulkan</a>* img)-&gt;vk2::Buffer</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>        {</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>            return</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>            {{</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>                .device = &amp;img-&gt;vk_get_image().get_device(),</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>                .size_bytes = tz::gl::pixel_size_bytes(img-&gt;get_format()) * img-&gt;get_dimensions()[0] * img-&gt;get_dimensions()[1],</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>                .usage = {vk2::BufferUsage::TransferSource},</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>                .residency = vk2::MemoryResidency::CPU</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>            }};</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>        });</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>        this-&gt;command.do_scratch_operations([&amp;staging_buffers, &amp;staging_image_buffers, &amp;buffer_components, &amp;image_components](<a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html">vk2::CommandBufferRecording</a>&amp; recording)</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        {</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>            <span class="comment">// Finally, upload data for static resources.</span></div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>            <span class="keywordflow">for</span>(std::size_t i = 0; i &lt; buffer_components.size(); i++)</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>            {</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>                <a class="code hl_class" href="classtz_1_1gl_1_1_i_resource.html">IResource</a>* res = buffer_components[i]-&gt;get_resource();</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>                <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a37e79891f0c1e275cc8e52e5964dee00">get_type</a>() == ResourceType::Buffer, <span class="stringliteral">&quot;Expected ResourceType of buffer, but is not a buffer. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>                <span class="keywordflow">if</span>(res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a30140461ed037030d6c549fed9353fe9">get_access</a>() != ResourceAccess::StaticFixed)</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>                {</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>                }</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span> </div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>                <span class="comment">// Now simply write the data straight in.</span></div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>                {</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>                    <span class="keywordtype">void</span>* ptr = staging_buffers[i].map();</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>                    std::memcpy(ptr, res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a9c27891c1f4be84fb4ec9d5f9c0fa469">data</a>().data(), res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a9c27891c1f4be84fb4ec9d5f9c0fa469">data</a>().size_bytes());</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>                    staging_buffers[i].unmap();</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>                }</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span> </div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>                <span class="comment">// Record the command to transfer to the buffer resource.</span></div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>                recording.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a42ed45f3524b6bfe1c98de341b8b88de">buffer_copy_buffer</a></div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>                ({</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>                    .src = &amp;staging_buffers[i],</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                    .dst = &amp;buffer_components[i]-&gt;vk_get_buffer()</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                });</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>            }</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>            <span class="keywordflow">for</span>(std::size_t i = 0; i &lt; image_components.size(); i++)</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>            {</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>                <a class="code hl_class" href="classtz_1_1gl_1_1_i_resource.html">IResource</a>* res = image_components[i]-&gt;get_resource();</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>                <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a37e79891f0c1e275cc8e52e5964dee00">get_type</a>() == ResourceType::Image, <span class="stringliteral">&quot;Expected ResourceType of Texture, but is not a texture. Please submit a bug report.&quot;</span>);</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>                <span class="keywordflow">if</span>(res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a30140461ed037030d6c549fed9353fe9">get_access</a>() != ResourceAccess::StaticFixed)</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>                {</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>                }</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>                <span class="comment">// Now simply write the data straight in.</span></div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>                {</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>                    <span class="keywordtype">void</span>* ptr = staging_image_buffers[i].map();</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>                    std::memcpy(ptr, res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a9c27891c1f4be84fb4ec9d5f9c0fa469">data</a>().data(), res-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1_i_resource.html#a9c27891c1f4be84fb4ec9d5f9c0fa469">data</a>().size_bytes());</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>                    staging_image_buffers[i].unmap();</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>                }</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>                <span class="comment">// Record the command to transfer to the texture resource.</span></div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>                <span class="comment">// Image will initially be in undefined layout. We need to:</span></div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>                <span class="comment">// - Transition the texture component to TransferDestination</span></div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>                <span class="comment">// - Transfer from the staging texture buffer</span></div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>                <span class="comment">// - Transition the texture component to ShaderResource so it can be used in the shader.</span></div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>                recording.transition_image_layout</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>                ({</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>                    .image = &amp;image_components[i]-&gt;vk_get_image(),</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>                    .target_layout = vk2::ImageLayout::TransferDestination,</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>                    .source_access = {vk2::AccessFlag::None},</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>                    .destination_access = {vk2::AccessFlag::TransferOperationWrite},</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>                    .source_stage = vk2::PipelineStage::Top,</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>                    .destination_stage = vk2::PipelineStage::TransferCommands,</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>                    .image_aspects = {vk2::ImageAspectFlag::Colour}</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>                });</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>                recording.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a245b299b9c5cf4248e7ae19c63f63a8d">buffer_copy_image</a></div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>                ({</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>                    .src = &amp;staging_image_buffers[i],</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>                    .dst = &amp;image_components[i]-&gt;vk_get_image(),</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>                    .image_aspects = {vk2::ImageAspectFlag::Colour}</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>                });</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>                recording.transition_image_layout</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>                ({</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>                    .image = &amp;image_components[i]-&gt;vk_get_image(),</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>                    .target_layout = vk2::ImageLayout::ShaderResource,</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>                    .source_access = {vk2::AccessFlag::TransferOperationWrite},</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>                    .destination_access = {vk2::AccessFlag::ShaderResourceRead},</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>                    .source_stage = vk2::PipelineStage::TransferCommands,</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>                    .destination_stage = vk2::PipelineStage::FragmentShader,</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>                    .image_aspects = {vk2::ImageAspectFlag::Colour}</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>                });</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>            }</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>        });</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>    }</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span> </div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>    <span class="keywordtype">void</span> RendererVulkan::setup_render_commands()</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>    {</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan Setup Render Commands&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>        this-&gt;command.set_rendering_commands([<span class="keyword">this</span>](<a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html">vk2::CommandBufferRecording</a>&amp; recording, std::size_t framebuffer_id)</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>        {</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>            <a class="code hl_define" href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a>(framebuffer_id &lt; this-&gt;output.get_output_framebuffers().size(), <span class="stringliteral">&quot;Attempted to retrieve output framebuffer at index %zu, but there are only %zu framebuffers available. Please submit a bug report.&quot;</span>, framebuffer_id, this-&gt;output.get_output_framebuffers().size());</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>            <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording_1_1_render_pass_run.html">vk2::CommandBufferRecording::RenderPassRun</a> run{this-&gt;output.get_output_framebuffers()[framebuffer_id], recording, this-&gt;clear_colour};</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>            recording.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a8bbeeef67dcb9b04b17bf5abde907e01">bind_pipeline</a></div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>            ({</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>                .pipeline = &amp;this-&gt;pipeline.get_pipeline(),</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>                .pipeline_context = vk2::PipelineContext::Graphics</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>            });</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>            <a class="code hl_class" href="classtz_1_1_basic_list.html">tz::BasicList&lt;const vk2::DescriptorSet*&gt;</a> sets;</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>            <span class="keywordflow">if</span>(!this-&gt;resources.empty())</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>            {</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>                std::span&lt;const vk2::DescriptorSet&gt; resource_sets = this-&gt;resources.get_descriptor_sets();</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>                sets.<a class="code hl_function" href="classtz_1_1_basic_list.html#a96f11427f0be2835a9351d0b7ebbfc7b">resize</a>(resource_sets.size());</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>                std::transform(resource_sets.begin(), resource_sets.end(), sets.<a class="code hl_function" href="classtz_1_1_basic_list.html#a2e7b98d23d56f9370c54aabd4f402c4f">begin</a>(), [](<span class="keyword">const</span> <a class="code hl_class" href="classtz_1_1gl_1_1vk2_1_1_descriptor_set.html">vk2::DescriptorSet</a>&amp; set){return &amp;set;});</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>                recording.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#ac9e417b34e2a883b34ab2099a82acd54">bind_descriptor_sets</a></div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>                ({</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>                    .pipeline_layout = this-&gt;pipeline.get_pipeline().get_info().pipeline_layout,</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>                    .context = vk2::PipelineContext::Graphics,</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>                    .descriptor_sets = sets,</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>                    .first_set_id = 0</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>                });</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>            }</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>            recording.<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#acd2074bf1faa8b35502ec823cfde1abf">draw</a></div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>            ({</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>                .vertex_count = 3 * this-&gt;tri_count,</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>                .instance_count = 1,</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>                .first_vertex = 0,</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>                .first_instance = 0</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>            });</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>        });</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>    }</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span> </div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>    <span class="keywordtype">void</span> RendererVulkan::handle_resize(<span class="keyword">const</span> <a class="code hl_struct" href="structtz_1_1gl_1_1_renderer_resize_info_vulkan.html">RendererResizeInfoVulkan</a>&amp; resize_info)</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>    {</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>        <a class="code hl_define" href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a>(<span class="stringliteral">&quot;Vulkan Frontend - RendererVulkan Handle Resize&quot;</span>, <a class="code hl_define" href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a>);</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>        <span class="comment">// Context: The top-level gl::Device has just been told by the window that it has been resized, and has recreated a new swapchain. Our old pointer to the swapchain `maybe_swapchain` correctly points to the new swapchain already, so we just have to recreate all the new state.</span></div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>        this-&gt;command.wait_pending_commands_complete();</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>        this-&gt;output.create_output_resources(resize_info.new_output_images, this-&gt;output.has_depth_images());</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>        this-&gt;pipeline.recreate(this-&gt;output.get_render_pass(), resize_info.new_dimensions);</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>        this-&gt;setup_render_commands();</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>    }</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span> </div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>    std::size_t RendererVulkan::get_frame_in_flight_count(<span class="keyword">const</span> <a class="code hl_struct" href="structtz_1_1gl_1_1_renderer_device_info_vulkan.html">RendererDeviceInfoVulkan</a>&amp; device_info)<span class="keyword"> const</span></div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>        <span class="keywordflow">if</span>(device_info.<a class="code hl_variable" href="structtz_1_1gl_1_1_renderer_device_info_vulkan.html#af59c0fcd8d99355fc8f822274da28f00">device</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html#acda5876065dd357359b3528553dac464">get_hardware</a>().<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_physical_device.html#aa07d19e3e31cfd8d5d40ed83d01b4dcd">get_instance</a>().<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_vulkan_instance.html#af7077c12d2352dc9fb06ef6328b8cb30">is_headless</a>())</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>        {</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>        }</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>        std::uint32_t min = device_info.<a class="code hl_variable" href="structtz_1_1gl_1_1_renderer_device_info_vulkan.html#af59c0fcd8d99355fc8f822274da28f00">device</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html#acda5876065dd357359b3528553dac464">get_hardware</a>().get_surface_capabilities().min_image_count;</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>        std::uint32_t max = device_info.<a class="code hl_variable" href="structtz_1_1gl_1_1_renderer_device_info_vulkan.html#af59c0fcd8d99355fc8f822274da28f00">device</a>-&gt;<a class="code hl_function" href="classtz_1_1gl_1_1vk2_1_1_logical_device.html#acda5876065dd357359b3528553dac464">get_hardware</a>().get_surface_capabilities().max_image_count;</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>        <span class="keywordflow">return</span> std::clamp&lt;std::uint32_t&gt;(3u, min, max);</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>    }</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>}</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span> </div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span><span class="preprocessor">#endif </span><span class="comment">// TZ_VULKAN</span></div>
<div class="ttc" id="aclasstz_1_1_basic_list_html"><div class="ttname"><a href="classtz_1_1_basic_list.html">tz::BasicList</a></div><div class="ttdoc">Custom list, feature subset of std::vector.</div><div class="ttdef"><b>Definition:</b> <a href="basic__list_8hpp_source.html#l00020">basic_list.hpp:21</a></div></div>
<div class="ttc" id="aclasstz_1_1_basic_list_html_a2e7b98d23d56f9370c54aabd4f402c4f"><div class="ttname"><a href="classtz_1_1_basic_list.html#a2e7b98d23d56f9370c54aabd4f402c4f">tz::BasicList::begin</a></div><div class="ttdeci">Iterator begin()</div><div class="ttdoc">Retrieve an iterator to the beginning of the list.</div><div class="ttdef"><b>Definition:</b> <a href="basic__list_8hpp_source.html#l00143">basic_list.hpp:143</a></div></div>
<div class="ttc" id="aclasstz_1_1_basic_list_html_a5393f48f92124e56c6ba68418396c069"><div class="ttname"><a href="classtz_1_1_basic_list.html#a5393f48f92124e56c6ba68418396c069">tz::BasicList::add</a></div><div class="ttdeci">void add(const T &amp;element)</div><div class="ttdoc">Add a copy of the provided value to the back of the list.</div><div class="ttdef"><b>Definition:</b> <a href="basic__list_8hpp_source.html#l00088">basic_list.hpp:88</a></div></div>
<div class="ttc" id="aclasstz_1_1_basic_list_html_a96f11427f0be2835a9351d0b7ebbfc7b"><div class="ttname"><a href="classtz_1_1_basic_list.html#a96f11427f0be2835a9351d0b7ebbfc7b">tz::BasicList::resize</a></div><div class="ttdeci">void resize(std::size_t num_elements)</div><div class="ttdoc">Resize the list, matches the behaviour of std::vector&lt;T&gt;::erase(num_elements).</div><div class="ttdef"><b>Definition:</b> <a href="basic__list_8hpp_source.html#l00263">basic_list.hpp:263</a></div></div>
<div class="ttc" id="aclasstz_1_1_callback_html_a9d053c8675bb946ab7aaf10e54e4170b"><div class="ttname"><a href="classtz_1_1_callback.html#a9d053c8675bb946ab7aaf10e54e4170b">tz::Callback::add_callback</a></div><div class="ttdeci">CallbackHandle add_callback(tz::Action&lt; Args... &gt; auto &amp;&amp;callback_function)</div><div class="ttdoc">Register a new callable with this callback object.</div><div class="ttdef"><b>Definition:</b> <a href="callback_8hpp_source.html#l00042">callback.hpp:42</a></div></div>
<div class="ttc" id="aclasstz_1_1_callback_html_ab11b08a5ecee3a49c619aa18187cb6e8"><div class="ttname"><a href="classtz_1_1_callback.html#ab11b08a5ecee3a49c619aa18187cb6e8">tz::Callback::remove_callback</a></div><div class="ttdeci">void remove_callback(CallbackHandle handle)</div><div class="ttdoc">Deregister a callable that was registered by this callback object at some point in the past.</div><div class="ttdef"><b>Definition:</b> <a href="callback_8hpp_source.html#l00052">callback.hpp:52</a></div></div>
<div class="ttc" id="aclasstz_1_1_enum_field_html"><div class="ttname"><a href="classtz_1_1_enum_field.html">tz::EnumField&lt; DescriptorFlag &gt;</a></div></div>
<div class="ttc" id="aclasstz_1_1_handle_html"><div class="ttname"><a href="classtz_1_1_handle.html">tz::Handle&lt; IResource &gt;</a></div></div>
<div class="ttc" id="aclasstz_1_1_vector_html"><div class="ttname"><a href="classtz_1_1_vector.html">tz::Vector&lt; unsigned int, 2 &gt;</a></div></div>
<div class="ttc" id="aclasstz_1_1_window_html"><div class="ttname"><a href="classtz_1_1_window.html">tz::Window</a></div><div class="ttdoc">Represents an OS Window.</div><div class="ttdef"><b>Definition:</b> <a href="window_8hpp_source.html#l00046">window.hpp:47</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_asset_storage_common_html"><div class="ttname"><a href="classtz_1_1gl_1_1_asset_storage_common.html">tz::gl::AssetStorageCommon</a></div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2common_2renderer_8hpp_source.html#l00089">renderer.hpp:90</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_buffer_component_vulkan_html"><div class="ttname"><a href="classtz_1_1gl_1_1_buffer_component_vulkan.html">tz::gl::BufferComponentVulkan</a></div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2vk2_2component_8hpp_source.html#l00012">component.hpp:13</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_command_processor_html_a332f26f09b8abae2ca30c0a94e117c56"><div class="ttname"><a href="classtz_1_1gl_1_1_command_processor.html#a332f26f09b8abae2ca30c0a94e117c56">tz::gl::CommandProcessor::get_render_command_buffers</a></div><div class="ttdeci">std::span&lt; const vk2::CommandBuffer &gt; get_render_command_buffers() const</div><div class="ttdoc">Retrieve a list of all command buffers which will be used for rendering.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00748">renderer.cpp:748</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_command_processor_html_ab8cdf2464510579fe77d64cd437028be"><div class="ttname"><a href="classtz_1_1gl_1_1_command_processor.html#ab8cdf2464510579fe77d64cd437028be">tz::gl::CommandProcessor::CommandProcessor</a></div><div class="ttdeci">CommandProcessor(vk2::LogicalDevice &amp;ldev, std::size_t frame_in_flight_count, OutputTarget output_target, std::span&lt; vk2::Framebuffer &gt; output_framebuffers)</div><div class="ttdoc">Construct a command processor, which will render into the provided output framebuffers.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00712">renderer.cpp:712</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_command_processor_html_ad03bad20c91da8d9b203901b08cae4da"><div class="ttname"><a href="classtz_1_1gl_1_1_command_processor.html#ad03bad20c91da8d9b203901b08cae4da">tz::gl::CommandProcessor::do_render_work</a></div><div class="ttdeci">RenderWorkSubmitResult do_render_work(vk2::Swapchain *maybe_swapchain)</div><div class="ttdoc">Submit the next render command buffer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00758">renderer.cpp:758</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_graphics_pipeline_manager_html"><div class="ttname"><a href="classtz_1_1gl_1_1_graphics_pipeline_manager.html">tz::gl::GraphicsPipelineManager</a></div><div class="ttdoc">Retrieves the output and resource storage state and creates a shader and graphics pipeline to be used...</div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2vk2_2renderer_8hpp_source.html#l00173">renderer.hpp:174</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_graphics_pipeline_manager_html_ac1af9a276ec4d78aa302429e4e710abf"><div class="ttname"><a href="classtz_1_1gl_1_1_graphics_pipeline_manager.html#ac1af9a276ec4d78aa302429e4e710abf">tz::gl::GraphicsPipelineManager::GraphicsPipelineManager</a></div><div class="ttdeci">GraphicsPipelineManager(const ShaderInfo &amp;sinfo, const vk2::DescriptorLayout &amp;dlayout, const vk2::RenderPass &amp;render_pass, std::size_t frame_in_flight_count, tz::Vec2ui viewport_dimensions, bool depth_testing_enabled, bool alpha_blending_enabled)</div><div class="ttdoc">Construct the pipeline manager using all the necessary shader sources aswell as resource state and ou...</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00554">renderer.cpp:555</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_graphics_pipeline_manager_html_afd7746e0716cd251682e7d9f262d8913"><div class="ttname"><a href="classtz_1_1gl_1_1_graphics_pipeline_manager.html#afd7746e0716cd251682e7d9f262d8913">tz::gl::GraphicsPipelineManager::get_pipeline</a></div><div class="ttdeci">const vk2::GraphicsPipeline &amp; get_pipeline() const</div><div class="ttdoc">Retrieve the vulkan graphics pipeline which will be used for rendering.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00593">renderer.cpp:593</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_i_component_html"><div class="ttname"><a href="classtz_1_1gl_1_1_i_component.html">tz::gl::IComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2component_8hpp_source.html#l00008">component.hpp:9</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_i_output_html"><div class="ttname"><a href="classtz_1_1gl_1_1_i_output.html">tz::gl::IOutput</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2output_8hpp_source.html#l00013">output.hpp:14</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_i_resource_html"><div class="ttname"><a href="classtz_1_1gl_1_1_i_resource.html">tz::gl::IResource</a></div><div class="ttdoc">Interface for a Renderer or Processor resource.</div><div class="ttdef"><b>Definition:</b> <a href="api_2resource_8hpp_source.html#l00046">resource.hpp:47</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_i_resource_html_a30140461ed037030d6c549fed9353fe9"><div class="ttname"><a href="classtz_1_1gl_1_1_i_resource.html#a30140461ed037030d6c549fed9353fe9">tz::gl::IResource::get_access</a></div><div class="ttdeci">virtual ResourceAccess get_access() const =0</div><div class="ttdoc">Retrieve access information about this resource when used in a Renderer or Processor.</div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_i_resource_html_a37e79891f0c1e275cc8e52e5964dee00"><div class="ttname"><a href="classtz_1_1gl_1_1_i_resource.html#a37e79891f0c1e275cc8e52e5964dee00">tz::gl::IResource::get_type</a></div><div class="ttdeci">virtual ResourceType get_type() const =0</div><div class="ttdoc">Retrieve the type of the resource.</div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_i_resource_html_a9c27891c1f4be84fb4ec9d5f9c0fa469"><div class="ttname"><a href="classtz_1_1gl_1_1_i_resource.html#a9c27891c1f4be84fb4ec9d5f9c0fa469">tz::gl::IResource::data</a></div><div class="ttdeci">virtual std::span&lt; const std::byte &gt; data() const =0</div><div class="ttdoc">Retrieve a read-only view into the resource data.</div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_image_component_vulkan_html"><div class="ttname"><a href="classtz_1_1gl_1_1_image_component_vulkan.html">tz::gl::ImageComponentVulkan</a></div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2vk2_2component_8hpp_source.html#l00030">component.hpp:31</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_image_output_html"><div class="ttname"><a href="classtz_1_1gl_1_1_image_output.html">tz::gl::ImageOutput</a></div><div class="ttdef"><b>Definition:</b> <a href="output_8hpp_source.html#l00009">output.hpp:10</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_output_manager_html"><div class="ttname"><a href="classtz_1_1gl_1_1_output_manager.html">tz::gl::OutputManager</a></div><div class="ttdoc">Stores information about the output target, and a framebuffer which either points to an offscreen ima...</div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2ogl2_2renderer_8hpp_source.html#l00098">renderer.hpp:99</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_output_manager_html_a329f2c6f01274e8e7e2ee0d843180f11"><div class="ttname"><a href="classtz_1_1gl_1_1_output_manager.html#a329f2c6f01274e8e7e2ee0d843180f11">tz::gl::OutputManager::get_output_images</a></div><div class="ttdeci">std::span&lt; vk2::Image &gt; get_output_images()</div><div class="ttdoc">Retrieve a view into all of the output images.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00379">renderer.cpp:379</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_output_manager_html_a9c63508e58a76c0ea35b331710305eea"><div class="ttname"><a href="classtz_1_1gl_1_1_output_manager.html#a9c63508e58a76c0ea35b331710305eea">tz::gl::OutputManager::get_output_framebuffers</a></div><div class="ttdeci">std::span&lt; const vk2::Framebuffer &gt; get_output_framebuffers() const</div><div class="ttdoc">Retrieve a view (read-only) into all of the framebuffers.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00401">renderer.cpp:401</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_output_manager_html_aa3868005d4452edaecf7662f0c5abca1"><div class="ttname"><a href="classtz_1_1gl_1_1_output_manager.html#aa3868005d4452edaecf7662f0c5abca1">tz::gl::OutputManager::get_output_dimensions</a></div><div class="ttdeci">tz::Vec2ui get_output_dimensions() const</div><div class="ttdoc">Retrieve the dimensions of the output images.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00411">renderer.cpp:411</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_output_manager_html_ab54b9fbb26dbd8d10617b81ebe02e84b"><div class="ttname"><a href="classtz_1_1gl_1_1_output_manager.html#ab54b9fbb26dbd8d10617b81ebe02e84b">tz::gl::OutputManager::OutputManager</a></div><div class="ttdeci">OutputManager(IOutput *output)</div><div class="ttdoc">Create the output target based upon the renderer information.</div><div class="ttdef"><b>Definition:</b> <a href="ogl2_2renderer_8cpp_source.html#l00226">renderer.cpp:226</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_output_manager_html_ae06512762e0d178d753339b7bb5640a7"><div class="ttname"><a href="classtz_1_1gl_1_1_output_manager.html#ae06512762e0d178d753339b7bb5640a7">tz::gl::OutputManager::get_render_pass</a></div><div class="ttdeci">const vk2::RenderPass &amp; get_render_pass() const</div><div class="ttdoc">Retrieve the render pass used by the renderer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00374">renderer.cpp:374</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_renderer_info_common_html"><div class="ttname"><a href="classtz_1_1gl_1_1_renderer_info_common.html">tz::gl::RendererInfoCommon</a></div><div class="ttdoc">Helper struct which the user can use to specify which inputs, resources they want and where they want...</div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2common_2renderer_8hpp_source.html#l00012">renderer.hpp:13</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_renderer_vulkan_html"><div class="ttname"><a href="classtz_1_1gl_1_1_renderer_vulkan.html">tz::gl::RendererVulkan</a></div><div class="ttdoc">Renderer implementation which heavily calls into the backend at Vulkan Backend.</div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2vk2_2renderer_8hpp_source.html#l00312">renderer.hpp:313</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_renderer_vulkan_html_a4812c8aac2fe6dae638d8f61c9c6e1fb"><div class="ttname"><a href="classtz_1_1gl_1_1_renderer_vulkan.html#a4812c8aac2fe6dae638d8f61c9c6e1fb">tz::gl::RendererVulkan::resource_count</a></div><div class="ttdeci">unsigned int resource_count() const</div><div class="ttdoc">Retrieve the number of resources.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00894">renderer.cpp:894</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_renderer_vulkan_html_a5c356fc12c93eb44cc40f5e0676e4626"><div class="ttname"><a href="classtz_1_1gl_1_1_renderer_vulkan.html#a5c356fc12c93eb44cc40f5e0676e4626">tz::gl::RendererVulkan::get_component</a></div><div class="ttdeci">const IComponent * get_component(ResourceHandle handle) const</div><div class="ttdoc">Retrieve the component sourcing the resource (read-only) corresponding to the given handle.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00909">renderer.cpp:909</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_renderer_vulkan_html_a610cf9bae85091c03bd5b919b9ba113f"><div class="ttname"><a href="classtz_1_1gl_1_1_renderer_vulkan.html#a610cf9bae85091c03bd5b919b9ba113f">tz::gl::RendererVulkan::get_options</a></div><div class="ttdeci">const RendererOptions &amp; get_options() const</div><div class="ttdoc">Retrieve options denoting extra features used by the renderer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00919">renderer.cpp:919</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_renderer_vulkan_html_ac425ea8feccd0b4a9614f47fa251ca59"><div class="ttname"><a href="classtz_1_1gl_1_1_renderer_vulkan.html#ac425ea8feccd0b4a9614f47fa251ca59">tz::gl::RendererVulkan::get_resource</a></div><div class="ttdeci">const IResource * get_resource(ResourceHandle handle) const</div><div class="ttdoc">Retrieve the resource (read-only) corresponding to the given handle.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00899">renderer.cpp:899</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_renderer_vulkan_html_ac7d7ab5df374b27cf96175033e3add99"><div class="ttname"><a href="classtz_1_1gl_1_1_renderer_vulkan.html#ac7d7ab5df374b27cf96175033e3add99">tz::gl::RendererVulkan::edit</a></div><div class="ttdeci">void edit(const RendererEditRequest &amp;edit_request)</div><div class="ttdoc">Confirm changes to a renderer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00954">renderer.cpp:954</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_renderer_vulkan_html_ae865429cebe32bd6aab0c63b75d97f08"><div class="ttname"><a href="classtz_1_1gl_1_1_renderer_vulkan.html#ae865429cebe32bd6aab0c63b75d97f08">tz::gl::RendererVulkan::render</a></div><div class="ttdeci">void render()</div><div class="ttdoc">Invoke the renderer, emitting a single draw call of a set number of triangles.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00924">renderer.cpp:924</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_renderer_vulkan_html_af33af3704e58ef0587f4823682723d55"><div class="ttname"><a href="classtz_1_1gl_1_1_renderer_vulkan.html#af33af3704e58ef0587f4823682723d55">tz::gl::RendererVulkan::RendererVulkan</a></div><div class="ttdeci">RendererVulkan(const RendererInfoVulkan &amp;info, const RendererDeviceInfoVulkan &amp;device_info)</div><div class="ttdoc">Create a new Renderer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00825">renderer.cpp:825</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_resource_storage_html"><div class="ttname"><a href="classtz_1_1gl_1_1_resource_storage.html">tz::gl::ResourceStorage</a></div><div class="ttdoc">Copies all resource data from upon creation and handles resource and component lifetimes.</div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2ogl2_2renderer_8hpp_source.html#l00026">renderer.hpp:27</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_resource_storage_html_a0524a8fb3d8fd8c1c5735e89e06f4cc7"><div class="ttname"><a href="classtz_1_1gl_1_1_resource_storage.html#a0524a8fb3d8fd8c1c5735e89e06f4cc7">tz::gl::ResourceStorage::get_component</a></div><div class="ttdeci">const IComponent * get_component(ResourceHandle handle) const</div><div class="ttdoc">Retrieve the component (read-only) which stores the corresponding opengl backend objects for the reso...</div><div class="ttdef"><b>Definition:</b> <a href="ogl2_2renderer_8cpp_source.html#l00088">renderer.cpp:88</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_resource_storage_html_a1f73d126642a7fc8c2f0734d49e0e097"><div class="ttname"><a href="classtz_1_1gl_1_1_resource_storage.html#a1f73d126642a7fc8c2f0734d49e0e097">tz::gl::ResourceStorage::ResourceStorage</a></div><div class="ttdeci">ResourceStorage(std::span&lt; const IResource *const &gt; resources)</div><div class="ttdoc">Create storage for a set of existing resources.</div><div class="ttdef"><b>Definition:</b> <a href="ogl2_2renderer_8cpp_source.html#l00010">renderer.cpp:10</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_resource_storage_html_a3143c4d36dea17caa0dd161babdbdc11"><div class="ttname"><a href="classtz_1_1gl_1_1_resource_storage.html#a3143c4d36dea17caa0dd161babdbdc11">tz::gl::ResourceStorage::resource_count_of</a></div><div class="ttdeci">unsigned int resource_count_of(ResourceType type) const</div><div class="ttdoc">Retrieve the number of resources stored of the given type.</div><div class="ttdef"><b>Definition:</b> <a href="ogl2_2renderer_8cpp_source.html#l00098">renderer.cpp:98</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_resource_storage_html_a9becf5414f35a43f1df800c958d66f59"><div class="ttname"><a href="classtz_1_1gl_1_1_resource_storage.html#a9becf5414f35a43f1df800c958d66f59">tz::gl::ResourceStorage::get_descriptor_sets</a></div><div class="ttdeci">std::span&lt; const vk2::DescriptorSet &gt; get_descriptor_sets() const</div><div class="ttdoc">Retrieve a view into the array of descriptor sets.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00213">renderer.cpp:213</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_resource_storage_html_aee19c3bfdae5d18bdda04f68afea3565"><div class="ttname"><a href="classtz_1_1gl_1_1_resource_storage.html#aee19c3bfdae5d18bdda04f68afea3565">tz::gl::ResourceStorage::get_descriptor_layout</a></div><div class="ttdeci">const vk2::DescriptorLayout &amp; get_descriptor_layout() const</div><div class="ttdoc">Retrieve the descriptor layout representing the shader resources used by the renderer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2renderer_8cpp_source.html#l00208">renderer.cpp:208</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1_shader_info_html"><div class="ttname"><a href="classtz_1_1gl_1_1_shader_info.html">tz::gl::ShaderInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2common_2shader_8hpp_source.html#l00009">shader.hpp:10</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_buffer_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_buffer.html">tz::gl::vk2::Buffer</a></div><div class="ttdoc">Represents a linear array of data which can be used for various purposes.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2buffer_8hpp_source.html#l00054">buffer.hpp:55</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_buffer_html_a238ec50ea5cc40a351e1ebe487ce86db"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_buffer.html#a238ec50ea5cc40a351e1ebe487ce86db">tz::gl::vk2::Buffer::map_as</a></div><div class="ttdeci">std::span&lt; T &gt; map_as()</div><div class="ttdoc">Map the memory to a span of a given type.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2buffer_8hpp_source.html#l00088">buffer.hpp:88</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_buffer_html_a410043be11f04c500704a8fb0956d5cc"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_buffer.html#a410043be11f04c500704a8fb0956d5cc">tz::gl::vk2::Buffer::get_residency</a></div><div class="ttdeci">MemoryResidency get_residency() const</div><div class="ttdoc">Retrieve the residency of the buffer's memory.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2buffer_8cpp_source.html#l00117">buffer.cpp:117</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_buffer_html_ac84676ea5d9d5f459cb9c385a1032729"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_buffer.html#ac84676ea5d9d5f459cb9c385a1032729">tz::gl::vk2::Buffer::get_usage</a></div><div class="ttdeci">BufferUsageField get_usage() const</div><div class="ttdoc">Retrieve all usages of this buffer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2buffer_8cpp_source.html#l00112">buffer.cpp:112</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_buffer_html_ad3210893be0901d09f53d94648362b9b"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_buffer.html#ad3210893be0901d09f53d94648362b9b">tz::gl::vk2::Buffer::get_device</a></div><div class="ttdeci">const LogicalDevice &amp; get_device() const</div><div class="ttdoc">Retrieve the LogicalDevice used to create the buffer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2buffer_8cpp_source.html#l00106">buffer.cpp:106</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_1_1_render_pass_run_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording_1_1_render_pass_run.html">tz::gl::vk2::CommandBufferRecording::RenderPassRun</a></div><div class="ttdoc">Represents the full duration of an invocation of a RenderPass during a CommandBufferRecording.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00183">command.hpp:184</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html">tz::gl::vk2::CommandBufferRecording</a></div><div class="ttdoc">Represents the full duration of the recording process of an existing CommandBuffer.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00176">command.hpp:177</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_a245b299b9c5cf4248e7ae19c63f63a8d"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a245b299b9c5cf4248e7ae19c63f63a8d">tz::gl::vk2::CommandBufferRecording::buffer_copy_image</a></div><div class="ttdeci">void buffer_copy_image(VulkanCommand::BufferCopyImage command)</div><div class="ttdoc">Copy data from one Buffer to an Image.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00152">command.cpp:152</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_a42ed45f3524b6bfe1c98de341b8b88de"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a42ed45f3524b6bfe1c98de341b8b88de">tz::gl::vk2::CommandBufferRecording::buffer_copy_buffer</a></div><div class="ttdeci">void buffer_copy_buffer(VulkanCommand::BufferCopyBuffer command)</div><div class="ttdoc">Copy data from one Buffer to another.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00135">command.cpp:135</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_a8bbeeef67dcb9b04b17bf5abde907e01"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#a8bbeeef67dcb9b04b17bf5abde907e01">tz::gl::vk2::CommandBufferRecording::bind_pipeline</a></div><div class="ttdeci">void bind_pipeline(VulkanCommand::BindPipeline command)</div><div class="ttdoc">Bind an existing GraphicsPipeline to some context.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00112">command.cpp:112</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_ac9e417b34e2a883b34ab2099a82acd54"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#ac9e417b34e2a883b34ab2099a82acd54">tz::gl::vk2::CommandBufferRecording::bind_descriptor_sets</a></div><div class="ttdeci">void bind_descriptor_sets(VulkanCommand::BindDescriptorSets command)</div><div class="ttdoc">Bind a list of DescriptorSet.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00126">command.cpp:126</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_command_buffer_recording_html_acd2074bf1faa8b35502ec823cfde1abf"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_command_buffer_recording.html#acd2074bf1faa8b35502ec823cfde1abf">tz::gl::vk2::CommandBufferRecording::draw</a></div><div class="ttdeci">void draw(VulkanCommand::Draw draw)</div><div class="ttdoc">Perform a non-instanced draw.</div><div class="ttdef"><b>Definition:</b> <a href="command_8cpp_source.html#l00120">command.cpp:120</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_layout_builder_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout_builder.html">tz::gl::vk2::DescriptorLayoutBuilder</a></div><div class="ttdoc">Helper class to populate a DescriptorLayoutInfo.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8hpp_source.html#l00139">descriptors.hpp:140</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_layout_builder_html_a255b1e89de7ebac50241ccef4f995aba"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout_builder.html#a255b1e89de7ebac50241ccef4f995aba">tz::gl::vk2::DescriptorLayoutBuilder::build</a></div><div class="ttdeci">DescriptorLayout build() const</div><div class="ttdoc">Create a new DescriptorLayout based upon this builder.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cpp_source.html#l00086">descriptors.cpp:86</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_layout_builder_html_a35bee4b07c0c343b53520a5f9c693691"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout_builder.html#a35bee4b07c0c343b53520a5f9c693691">tz::gl::vk2::DescriptorLayoutBuilder::with_binding</a></div><div class="ttdeci">DescriptorLayoutBuilder &amp; with_binding(DescriptorLayoutInfo::BindingInfo binding)</div><div class="ttdoc">Add a new binding.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cpp_source.html#l00065">descriptors.cpp:65</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_layout_builder_html_a8718cf9f569caf8dac4d4a08741925d0"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout_builder.html#a8718cf9f569caf8dac4d4a08741925d0">tz::gl::vk2::DescriptorLayoutBuilder::set_device</a></div><div class="ttdeci">void set_device(const LogicalDevice &amp;device)</div><div class="ttdoc">Set which LogicalDevice will be used to construct the resultant layout.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cpp_source.html#l00076">descriptors.cpp:76</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_layout_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_layout.html">tz::gl::vk2::DescriptorLayout</a></div><div class="ttdoc">Specifies the types of resources that will be accessed by a graphics or compute pipeline via a Shader...</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8hpp_source.html#l00084">descriptors.hpp:85</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_update_request_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_update_request.html">tz::gl::vk2::DescriptorPool::UpdateRequest</a></div><div class="ttdoc">Specifies a requests to update zero or more DescriptorSets owned by an existing DescriptorPool.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8hpp_source.html#l00377">descriptors.hpp:378</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_update_request_html_a9eadabf90c16c3d2cc228868752da65a"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_update_request.html#a9eadabf90c16c3d2cc228868752da65a">tz::gl::vk2::DescriptorPool::UpdateRequest::add_set_edit</a></div><div class="ttdeci">void add_set_edit(DescriptorSet::EditRequest set_edit)</div><div class="ttdoc">Add an edit for a DescriptorSet.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cpp_source.html#l00376">descriptors.cpp:376</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_pool_html_a4b369fb5533bf5c1faccde6b2e4065fb"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_pool.html#a4b369fb5533bf5c1faccde6b2e4065fb">tz::gl::vk2::DescriptorPool::update_sets</a></div><div class="ttdeci">void update_sets(UpdateRequest update_request)</div><div class="ttdoc">Issue an update request to any DescriptorSets owned by this pool.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cpp_source.html#l00573">descriptors.cpp:573</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_pool_html_aa4ca5a9b707fa4a15e150105e7ce7d44"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_pool.html#aa4ca5a9b707fa4a15e150105e7ce7d44">tz::gl::vk2::DescriptorPool::make_update_request</a></div><div class="ttdeci">UpdateRequest make_update_request()</div><div class="ttdoc">Retrieve an empty update request for this pool.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cpp_source.html#l00568">descriptors.cpp:568</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_set_1_1_edit_request_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_set_1_1_edit_request.html">tz::gl::vk2::DescriptorSet::EditRequest</a></div><div class="ttdoc">Request structure representing zero or more descriptor changes for this set.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8hpp_source.html#l00272">descriptors.hpp:273</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_set_1_1_edit_request_html_a668978b923a9ae87def22035f27e86e8"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_set_1_1_edit_request.html#a668978b923a9ae87def22035f27e86e8">tz::gl::vk2::DescriptorSet::EditRequest::set_image</a></div><div class="ttdeci">void set_image(std::uint32_t binding_id, Write::ImageWriteInfo image_write, std::uint32_t array_index=0)</div><div class="ttdoc">Request that the image at the given binding at the provided array index refers to an existing Image.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cpp_source.html#l00305">descriptors.cpp:305</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_set_1_1_edit_request_html_af6639d543f2c4a73fca182ca2209c5c5"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_set_1_1_edit_request.html#af6639d543f2c4a73fca182ca2209c5c5">tz::gl::vk2::DescriptorSet::EditRequest::set_buffer</a></div><div class="ttdeci">void set_buffer(std::uint32_t binding_id, Write::BufferWriteInfo buffer_write, std::uint32_t array_index=0)</div><div class="ttdoc">Request that the buffer at the given binding at the provided array index refers to an existing Buffer...</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cpp_source.html#l00283">descriptors.cpp:283</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_set_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_set.html">tz::gl::vk2::DescriptorSet</a></div><div class="ttdoc">Represents a set of one or more descriptors.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8hpp_source.html#l00223">descriptors.hpp:224</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_descriptor_set_html_aad4dfda61c3b097013b675089501ddcb"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_descriptor_set.html#aad4dfda61c3b097013b675089501ddcb">tz::gl::vk2::DescriptorSet::make_edit_request</a></div><div class="ttdeci">EditRequest make_edit_request()</div><div class="ttdoc">Retrieve an empty request for this set.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cpp_source.html#l00360">descriptors.cpp:360</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_fence_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_fence.html">tz::gl::vk2::Fence</a></div><div class="ttdoc">Synchronisation primitive which is useful to detect completion of a GPU operation,...</div><div class="ttdef"><b>Definition:</b> <a href="fence_8hpp_source.html#l00024">fence.hpp:25</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_fence_html_a89b2a5c13856021cc045c2223d4d9539"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_fence.html#a89b2a5c13856021cc045c2223d4d9539">tz::gl::vk2::Fence::wait_until_signalled</a></div><div class="ttdeci">void wait_until_signalled() const</div><div class="ttdoc">Block the current thread until the Fence is signalled.</div><div class="ttdef"><b>Definition:</b> <a href="fence_8cpp_source.html#l00069">fence.cpp:69</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_graphics_pipeline_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_graphics_pipeline.html">tz::gl::vk2::GraphicsPipeline</a></div><div class="ttdoc">Represents the Graphics Pipeline.</div><div class="ttdef"><b>Definition:</b> <a href="graphics__pipeline_8hpp_source.html#l00045">graphics_pipeline.hpp:46</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_image_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_image.html">tz::gl::vk2::Image</a></div><div class="ttdoc">Represents an Image owned by the Vulkan API.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2image_8hpp_source.html#l00137">image.hpp:138</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_image_html_adbf0f890ba7447627ae6c9b2bb797f2e"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_image.html#adbf0f890ba7447627ae6c9b2bb797f2e">tz::gl::vk2::Image::get_dimensions</a></div><div class="ttdeci">Vec2ui get_dimensions() const</div><div class="ttdoc">Retrieve the dimensions of the image.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2image_8cpp_source.html#l00173">image.cpp:173</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_image_view_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_image_view.html">tz::gl::vk2::ImageView</a></div><div class="ttdef"><b>Definition:</b> <a href="image__view_8hpp_source.html#l00023">image_view.hpp:24</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_logical_device_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_logical_device.html">tz::gl::vk2::LogicalDevice</a></div><div class="ttdoc">Logical interface to an existing PhysicalDevice.</div><div class="ttdef"><b>Definition:</b> <a href="logical__device_8hpp_source.html#l00092">logical_device.hpp:93</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_logical_device_html_a467dc1131247e4bb9e97e5274e860bc7"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_logical_device.html#a467dc1131247e4bb9e97e5274e860bc7">tz::gl::vk2::LogicalDevice::wait_until_idle</a></div><div class="ttdeci">void wait_until_idle() const</div><div class="ttdoc">Block the current thread until all queues associated with this device have become idle.</div><div class="ttdef"><b>Definition:</b> <a href="logical__device_8cpp_source.html#l00333">logical_device.cpp:333</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_logical_device_html_acda5876065dd357359b3528553dac464"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_logical_device.html#acda5876065dd357359b3528553dac464">tz::gl::vk2::LogicalDevice::get_hardware</a></div><div class="ttdeci">const PhysicalDevice &amp; get_hardware() const</div><div class="ttdoc">Retrieve the PhysicalDevice that this LogicalDevice derives from.</div><div class="ttdef"><b>Definition:</b> <a href="logical__device_8cpp_source.html#l00318">logical_device.cpp:318</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_physical_device_html_aa07d19e3e31cfd8d5d40ed83d01b4dcd"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_physical_device.html#aa07d19e3e31cfd8d5d40ed83d01b4dcd">tz::gl::vk2::PhysicalDevice::get_instance</a></div><div class="ttdeci">const VulkanInstance &amp; get_instance() const</div><div class="ttdoc">Retrieve the VulkanInstance to which this physical device belongs.</div><div class="ttdef"><b>Definition:</b> <a href="physical__device_8cpp_source.html#l00229">physical_device.cpp:229</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_pipeline_layout_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_pipeline_layout.html">tz::gl::vk2::PipelineLayout</a></div><div class="ttdoc">Represents an interface between shader stages and shader resources in terms of the layout of a group ...</div><div class="ttdef"><b>Definition:</b> <a href="pipeline__layout_8hpp_source.html#l00024">pipeline_layout.hpp:25</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_render_pass_builder_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_render_pass_builder.html">tz::gl::vk2::RenderPassBuilder</a></div><div class="ttdoc">Helper class to create a RenderPass.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8hpp_source.html#l00274">render_pass.hpp:275</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_render_pass_builder_html_a2d7d398247571d6314e727923d8f7160"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_render_pass_builder.html#a2d7d398247571d6314e727923d8f7160">tz::gl::vk2::RenderPassBuilder::with_subpass</a></div><div class="ttdeci">RenderPassBuilder &amp; with_subpass(RenderPassInfo::Subpass subpass)</div><div class="ttdoc">Add a new subpass to the render pass.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8cpp_source.html#l00315">render_pass.cpp:315</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_render_pass_builder_html_aacae02f036f07e6f321ac35420819ffe"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_render_pass_builder.html#aacae02f036f07e6f321ac35420819ffe">tz::gl::vk2::RenderPassBuilder::with_attachment</a></div><div class="ttdeci">RenderPassBuilder &amp; with_attachment(Attachment attachment)</div><div class="ttdoc">Add a new attachment to the pass.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8cpp_source.html#l00309">render_pass.cpp:309</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_render_pass_builder_html_ab5db592cbee7e8e81892b8c46eaa1909"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_render_pass_builder.html#ab5db592cbee7e8e81892b8c46eaa1909">tz::gl::vk2::RenderPassBuilder::set_device</a></div><div class="ttdeci">void set_device(const LogicalDevice &amp;device)</div><div class="ttdoc">Set which LogicalDevice will be used to construct the RenderPass.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8cpp_source.html#l00326">render_pass.cpp:326</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_render_pass_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_render_pass.html">tz::gl::vk2::RenderPass</a></div><div class="ttdoc">Represents a collection of attachments and subpasses and describes how the attachments are used throu...</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8hpp_source.html#l00199">render_pass.hpp:200</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_shader_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_shader.html">tz::gl::vk2::Shader</a></div><div class="ttdoc">Represents a Shader program.</div><div class="ttdef"><b>Definition:</b> <a href="impl_2backend_2vk2_2shader_8hpp_source.html#l00089">shader.hpp:90</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_subpass_builder_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_subpass_builder.html">tz::gl::vk2::SubpassBuilder</a></div><div class="ttdoc">Helper class to create a RenderPassInfo::Subpass.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8hpp_source.html#l00232">render_pass.hpp:233</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_subpass_builder_html_a2f4293bd1783d6dd12a94126622d5f36"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_subpass_builder.html#a2f4293bd1783d6dd12a94126622d5f36">tz::gl::vk2::SubpassBuilder::build</a></div><div class="ttdeci">const RenderPassInfo::Subpass &amp; build() const</div><div class="ttdoc">Return a subpass info structure based upon this builder.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8cpp_source.html#l00304">render_pass.cpp:304</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_subpass_builder_html_ae944eb1b322cc08eb4a9f7105cdab265"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_subpass_builder.html#ae944eb1b322cc08eb4a9f7105cdab265">tz::gl::vk2::SubpassBuilder::with_colour_attachment</a></div><div class="ttdeci">SubpassBuilder &amp; with_colour_attachment(RenderPassInfo::AttachmentReference colour_attachment)</div><div class="ttdoc">Have the subpass reference an existing attachment as a colour attachment.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8cpp_source.html#l00282">render_pass.cpp:282</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_subpass_builder_html_aea69c768e6d657c9e4e25102c0031dec"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_subpass_builder.html#aea69c768e6d657c9e4e25102c0031dec">tz::gl::vk2::SubpassBuilder::set_pipeline_context</a></div><div class="ttdeci">void set_pipeline_context(PipelineContext context)</div><div class="ttdoc">Specify how the subpass binds to the graphics pipeline.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8cpp_source.html#l00294">render_pass.cpp:294</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_subpass_builder_html_af3b5e86fed158d329db4b084556eab85"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_subpass_builder.html#af3b5e86fed158d329db4b084556eab85">tz::gl::vk2::SubpassBuilder::with_depth_stencil_attachment</a></div><div class="ttdeci">SubpassBuilder &amp; with_depth_stencil_attachment(RenderPassInfo::AttachmentReference depth_stencil_attachment)</div><div class="ttdoc">Have the subpass reference an existing attachment as the depth-stencil attachment.</div><div class="ttdef"><b>Definition:</b> <a href="render__pass_8cpp_source.html#l00288">render_pass.cpp:288</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_swapchain_html"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_swapchain.html">tz::gl::vk2::Swapchain</a></div><div class="ttdoc">Swapchains are infrastructures which represent GPU images we will render to before they can be presen...</div><div class="ttdef"><b>Definition:</b> <a href="swapchain_8hpp_source.html#l00031">swapchain.hpp:32</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_swapchain_html_a96bd4cf27464216c5294b65c939ae525"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_swapchain.html#a96bd4cf27464216c5294b65c939ae525">tz::gl::vk2::Swapchain::acquire_image</a></div><div class="ttdeci">ImageAcquisitionResult acquire_image(const ImageAcquisition &amp;acquire)</div><div class="ttdoc">Retrieve a presentable image index.</div><div class="ttdef"><b>Definition:</b> <a href="swapchain_8cpp_source.html#l00145">swapchain.cpp:145</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1_vulkan_instance_html_af7077c12d2352dc9fb06ef6328b8cb30"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1_vulkan_instance.html#af7077c12d2352dc9fb06ef6328b8cb30">tz::gl::vk2::VulkanInstance::is_headless</a></div><div class="ttdeci">bool is_headless() const</div><div class="ttdoc">Query as to whether the instance is headless or not.</div><div class="ttdef"><b>Definition:</b> <a href="tz__vulkan_8cpp_source.html#l00343">tz_vulkan.cpp:343</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1hardware_1_1_queue_html_a85b458bfb664176d140abf3b6b627e67a2debf81c3d7e76f030f7d7577971f530"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1hardware_1_1_queue.html#a85b458bfb664176d140abf3b6b627e67a2debf81c3d7e76f030f7d7577971f530">tz::gl::vk2::hardware::Queue::PresentResult::Success_Suboptimal</a></div><div class="ttdeci">@ Success_Suboptimal</div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1hardware_1_1_queue_html_a85b458bfb664176d140abf3b6b627e67a505a83f220c02df2f85c3810cd9ceb38"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1hardware_1_1_queue.html#a85b458bfb664176d140abf3b6b627e67a505a83f220c02df2f85c3810cd9ceb38">tz::gl::vk2::hardware::Queue::PresentResult::Success</a></div><div class="ttdeci">@ Success</div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1hardware_1_1_queue_html_a85b458bfb664176d140abf3b6b627e67aca1a7c2d3dbabec931605566d7db0117"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1hardware_1_1_queue.html#a85b458bfb664176d140abf3b6b627e67aca1a7c2d3dbabec931605566d7db0117">tz::gl::vk2::hardware::Queue::PresentResult::Fail_FatalError</a></div><div class="ttdeci">@ Fail_FatalError</div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1hardware_1_1_queue_html_a8a26295a1157308783f3606ddd47922e"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1hardware_1_1_queue.html#a8a26295a1157308783f3606ddd47922e">tz::gl::vk2::hardware::Queue::submit</a></div><div class="ttdeci">void submit(SubmitInfo submit_info)</div><div class="ttdoc">Submit the queue, including any associated command buffers and perform necessary synchronisation.</div><div class="ttdef"><b>Definition:</b> <a href="queue_8cpp_source.html#l00035">queue.cpp:35</a></div></div>
<div class="ttc" id="aclasstz_1_1gl_1_1vk2_1_1hardware_1_1_queue_html_aa4f3d7a351fe699cd90ea6457c64caee"><div class="ttname"><a href="classtz_1_1gl_1_1vk2_1_1hardware_1_1_queue.html#aa4f3d7a351fe699cd90ea6457c64caee">tz::gl::vk2::hardware::Queue::present</a></div><div class="ttdeci">PresentResult present(PresentInfo present_info)</div><div class="ttdoc">Queue an image for presentation.</div><div class="ttdef"><b>Definition:</b> <a href="queue_8cpp_source.html#l00100">queue.cpp:100</a></div></div>
<div class="ttc" id="agroup__tz__core__profiling_html_ga1d7223b85e8e9351d9b9e1a76fa34c4d"><div class="ttname"><a href="group__tz__core__profiling.html#ga1d7223b85e8e9351d9b9e1a76fa34c4d">TZ_PROFCOL_YELLOW</a></div><div class="ttdeci">#define TZ_PROFCOL_YELLOW</div><div class="ttdoc">Golden-yellow zone.</div><div class="ttdef"><b>Definition:</b> <a href="zone_8hpp_source.html#l00041">zone.hpp:41</a></div></div>
<div class="ttc" id="agroup__tz__core__profiling_html_gad5160546a3d578b464c4e4098d409c66"><div class="ttname"><a href="group__tz__core__profiling.html#gad5160546a3d578b464c4e4098d409c66">TZ_PROFZONE</a></div><div class="ttdeci">#define TZ_PROFZONE(name, colour)</div><div class="ttdef"><b>Definition:</b> <a href="zone_8hpp_source.html#l00070">zone.hpp:70</a></div></div>
<div class="ttc" id="agroup__tz__core__utility_html_gac7ea0910b66986864e3463748d8bd94a"><div class="ttname"><a href="group__tz__core__utility.html#gac7ea0910b66986864e3463748d8bd94a">tz::nullhand</a></div><div class="ttdeci">constexpr nullhand_t nullhand</div><div class="ttdoc">Represents the null Handle.</div><div class="ttdef"><b>Definition:</b> <a href="handle_8hpp_source.html#l00018">handle.hpp:18</a></div></div>
<div class="ttc" id="agroup__tz__core_html_ga1c23fd5abac5ba889b9b62885e1d692f"><div class="ttname"><a href="group__tz__core.html#ga1c23fd5abac5ba889b9b62885e1d692f">tz_error</a></div><div class="ttdeci">#define tz_error(msg,...)</div><div class="ttdoc">Causes a debug-only runtime error.</div><div class="ttdef"><b>Definition:</b> <a href="assert_8hpp_source.html#l00045">assert.hpp:45</a></div></div>
<div class="ttc" id="agroup__tz__core_html_ga3cd9aafb91fe073ccf575281a4ed7acd"><div class="ttname"><a href="group__tz__core.html#ga3cd9aafb91fe073ccf575281a4ed7acd">tz_assert</a></div><div class="ttdeci">#define tz_assert(eval, msg,...)</div><div class="ttdoc">Debug-only assert on some condition.</div><div class="ttdef"><b>Definition:</b> <a href="assert_8hpp_source.html#l00057">assert.hpp:57</a></div></div>
<div class="ttc" id="agroup__tz__gl2__renderer_html_ga3f915e283a9998c54f738b2735c206ce"><div class="ttname"><a href="group__tz__gl2__renderer.html#ga3f915e283a9998c54f738b2735c206ce">tz::gl::RendererOption</a></div><div class="ttdeci">RendererOption</div><div class="ttdoc">Specifies options to enable extra functionality within Renderers.</div><div class="ttdef"><b>Definition:</b> <a href="api_2renderer_8hpp_source.html#l00020">renderer.hpp:21</a></div></div>
<div class="ttc" id="agroup__tz__gl2__renderer_html_gga3f915e283a9998c54f738b2735c206cea8bb7dc17a08b6afa19cc4c18c6334eee"><div class="ttname"><a href="group__tz__gl2__renderer.html#gga3f915e283a9998c54f738b2735c206cea8bb7dc17a08b6afa19cc4c18c6334eee">tz::gl::RendererOption::AlphaBlending</a></div><div class="ttdeci">@ AlphaBlending</div></div>
<div class="ttc" id="agroup__tz__gl2__renderer_html_gga3f915e283a9998c54f738b2735c206ceaae6026b17332e73cf67e9d0461759d00"><div class="ttname"><a href="group__tz__gl2__renderer.html#gga3f915e283a9998c54f738b2735c206ceaae6026b17332e73cf67e9d0461759d00">tz::gl::RendererOption::NoDepthTesting</a></div><div class="ttdeci">@ NoDepthTesting</div></div>
<div class="ttc" id="agroup__tz__gl2__res_html_gac6834632961a6223450b780b32ced684"><div class="ttname"><a href="group__tz__gl2__res.html#gac6834632961a6223450b780b32ced684">tz::gl::ResourceType</a></div><div class="ttdeci">ResourceType</div><div class="ttdoc">Specifies the type of the resource; which is how a Renderer or Processor will interpret the usage of ...</div><div class="ttdef"><b>Definition:</b> <a href="api_2resource_8hpp_source.html#l00014">resource.hpp:15</a></div></div>
<div class="ttc" id="agroup__tz__gl2__res_html_ggaac6c9b5f2142e64f58da44ba1b7dedcaa21f8913440ad1edc3ddaa47d14b54811"><div class="ttname"><a href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaa21f8913440ad1edc3ddaa47d14b54811">tz::gl::ResourceAccess::DynamicVariable</a></div><div class="ttdeci">@ DynamicVariable</div></div>
<div class="ttc" id="agroup__tz__gl2__res_html_ggaac6c9b5f2142e64f58da44ba1b7dedcaa423193eec104eaf530d2ff93fea39656"><div class="ttname"><a href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaa423193eec104eaf530d2ff93fea39656">tz::gl::ResourceAccess::DynamicFixed</a></div><div class="ttdeci">@ DynamicFixed</div></div>
<div class="ttc" id="agroup__tz__gl2__res_html_ggaac6c9b5f2142e64f58da44ba1b7dedcaab6808d7d17fa4d376d212668279ef514"><div class="ttname"><a href="group__tz__gl2__res.html#ggaac6c9b5f2142e64f58da44ba1b7dedcaab6808d7d17fa4d376d212668279ef514">tz::gl::ResourceAccess::StaticFixed</a></div><div class="ttdeci">@ StaticFixed</div></div>
<div class="ttc" id="agroup__tz__gl2__res_html_ggac6834632961a6223450b780b32ced684a7e62bc342f41c946868f0ea6f0b712d8"><div class="ttname"><a href="group__tz__gl2__res.html#ggac6834632961a6223450b780b32ced684a7e62bc342f41c946868f0ea6f0b712d8">tz::gl::ResourceType::Buffer</a></div><div class="ttdeci">@ Buffer</div></div>
<div class="ttc" id="agroup__tz__gl2__res_html_ggac6834632961a6223450b780b32ced684abe53a0541a6d36f6ecb879fa2c584b08"><div class="ttname"><a href="group__tz__gl2__res.html#ggac6834632961a6223450b780b32ced684abe53a0541a6d36f6ecb879fa2c584b08">tz::gl::ResourceType::Image</a></div><div class="ttdeci">@ Image</div></div>
<div class="ttc" id="agroup__tz__gl__ogl2__buffers_html_gadc71f031030e7f584e43416c367717fc"><div class="ttname"><a href="group__tz__gl__ogl2__buffers.html#gadc71f031030e7f584e43416c367717fc">tz::gl::ogl2::buffer::copy</a></div><div class="ttdeci">void copy(const Buffer &amp;source, Buffer &amp;destination)</div><div class="ttdoc">Copy the entire data store of a buffer to another.</div><div class="ttdef"><b>Definition:</b> <a href="ogl2_2buffer_8cpp_source.html#l00105">buffer.cpp:105</a></div></div>
<div class="ttc" id="agroup__tz__gl__vk__descriptors_html_ggaf15b5e240b6c64c9dad040171f553123a16d008687eb1211c484cfc25158d727d"><div class="ttname"><a href="group__tz__gl__vk__descriptors.html#ggaf15b5e240b6c64c9dad040171f553123a16d008687eb1211c484cfc25158d727d">tz::gl::vk2::DescriptorFlag::PartiallyBound</a></div><div class="ttdeci">@ PartiallyBound</div></div>
<div class="ttc" id="agroup__tz__gl__vk__descriptors_html_ggaf15b5e240b6c64c9dad040171f553123a4b8308424b6fb4b70803778cfc461015"><div class="ttname"><a href="group__tz__gl__vk__descriptors.html#ggaf15b5e240b6c64c9dad040171f553123a4b8308424b6fb4b70803778cfc461015">tz::gl::vk2::DescriptorFlag::UpdateAfterBind</a></div><div class="ttdeci">@ UpdateAfterBind</div></div>
<div class="ttc" id="agroup__tz__gl__vk__descriptors_html_ggaf15b5e240b6c64c9dad040171f553123a74985606c2a8d95e3aa784b1f882ba44"><div class="ttname"><a href="group__tz__gl__vk__descriptors.html#ggaf15b5e240b6c64c9dad040171f553123a74985606c2a8d95e3aa784b1f882ba44">tz::gl::vk2::DescriptorFlag::UpdateUnusedWhilePending</a></div><div class="ttdeci">@ UpdateUnusedWhilePending</div></div>
<div class="ttc" id="agroup__tz__gl__vk__graphics__pipeline__render__pass_html_ggab92f36711ba7bb90caf0e4a39748ed7da60a3629ef6a8f991f45d7a85f2458544"><div class="ttname"><a href="group__tz__gl__vk__graphics__pipeline__render__pass.html#ggab92f36711ba7bb90caf0e4a39748ed7da60a3629ef6a8f991f45d7a85f2458544">tz::gl::vk2::StoreOp::DontCare</a></div><div class="ttdeci">@ DontCare</div></div>
<div class="ttc" id="agroup__tz__gl__vk__graphics__pipeline__render__pass_html_ggab92f36711ba7bb90caf0e4a39748ed7dafdb0c388de01d545017cdf9ccf00eb72"><div class="ttname"><a href="group__tz__gl__vk__graphics__pipeline__render__pass.html#ggab92f36711ba7bb90caf0e4a39748ed7dafdb0c388de01d545017cdf9ccf00eb72">tz::gl::vk2::StoreOp::Store</a></div><div class="ttdeci">@ Store</div></div>
<div class="ttc" id="agroup__tz__gl__vk__graphics__pipeline_html_ggaa581c5a329a76e48f41ca02bd263251aaec356eeffd7d26280475eadca9140604"><div class="ttname"><a href="group__tz__gl__vk__graphics__pipeline.html#ggaa581c5a329a76e48f41ca02bd263251aaec356eeffd7d26280475eadca9140604">tz::gl::vk2::PipelineStage::ColourAttachmentOutput</a></div><div class="ttdeci">@ ColourAttachmentOutput</div></div>
<div class="ttc" id="agroup__tz__gl__vk__image_html_ga4ca55be3d1c101900d800a78deeb595f"><div class="ttname"><a href="group__tz__gl__vk__image.html#ga4ca55be3d1c101900d800a78deeb595f">tz::gl::vk2::ImageLayout</a></div><div class="ttdeci">ImageLayout</div><div class="ttdoc">Images are always in a layout.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2image_8hpp_source.html#l00017">image.hpp:18</a></div></div>
<div class="ttc" id="agroup__tz__gl__vk__image_html_gga4ca55be3d1c101900d800a78deeb595fa19c3378429e6e0fce64ea1de4290a6d5"><div class="ttname"><a href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595fa19c3378429e6e0fce64ea1de4290a6d5">tz::gl::vk2::ImageLayout::ColourAttachment</a></div><div class="ttdeci">@ ColourAttachment</div></div>
<div class="ttc" id="agroup__tz__gl__vk__image_html_gga4ca55be3d1c101900d800a78deeb595fa652fd1408b3de263e32147770a48931e"><div class="ttname"><a href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595fa652fd1408b3de263e32147770a48931e">tz::gl::vk2::ImageLayout::DepthStencilAttachment</a></div><div class="ttdeci">@ DepthStencilAttachment</div></div>
<div class="ttc" id="agroup__tz__gl__vk__image_html_gga4ca55be3d1c101900d800a78deeb595fadd058df87f5c88e3285a28ad7406a3c6"><div class="ttname"><a href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595fadd058df87f5c88e3285a28ad7406a3c6">tz::gl::vk2::ImageLayout::Present</a></div><div class="ttdeci">@ Present</div></div>
<div class="ttc" id="agroup__tz__gl__vk__image_html_gga4ca55be3d1c101900d800a78deeb595faec0fc0100c4fc1ce4eea230c3dc10360"><div class="ttname"><a href="group__tz__gl__vk__image.html#gga4ca55be3d1c101900d800a78deeb595faec0fc0100c4fc1ce4eea230c3dc10360">tz::gl::vk2::ImageLayout::Undefined</a></div><div class="ttdeci">@ Undefined</div></div>
<div class="ttc" id="agroup__tz__gl__vk__image_html_gga6ecb2d248a682aac08d93f4a7078161ea652fd1408b3de263e32147770a48931e"><div class="ttname"><a href="group__tz__gl__vk__image.html#gga6ecb2d248a682aac08d93f4a7078161ea652fd1408b3de263e32147770a48931e">tz::gl::vk2::ImageUsage::DepthStencilAttachment</a></div><div class="ttdeci">@ DepthStencilAttachment</div></div>
<div class="ttc" id="agroup__tz__gl__vk__image_html_gga8d6daa8ff20537f40f5e1145342c2d4da74556551231333c36debc3d373261134"><div class="ttname"><a href="group__tz__gl__vk__image.html#gga8d6daa8ff20537f40f5e1145342c2d4da74556551231333c36debc3d373261134">tz::gl::vk2::SamplerAddressMode::ClampToEdge</a></div><div class="ttdeci">@ ClampToEdge</div></div>
<div class="ttc" id="agroup__tz__gl__vk_html_ga6b2997a4d85a7a421f621c046553eb9e"><div class="ttname"><a href="group__tz__gl__vk.html#ga6b2997a4d85a7a421f621c046553eb9e">tz::gl::vk2::get</a></div><div class="ttdeci">const VulkanInstance &amp; get()</div><div class="ttdoc">Retrieve a reference to the current Vulkan Instance.</div><div class="ttdef"><b>Definition:</b> <a href="tz__vulkan_8cpp_source.html#l00039">tz_vulkan.cpp:39</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1_command_processor_1_1_render_work_submit_result_html"><div class="ttname"><a href="structtz_1_1gl_1_1_command_processor_1_1_render_work_submit_result.html">tz::gl::CommandProcessor::RenderWorkSubmitResult</a></div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2vk2_2renderer_8hpp_source.html#l00213">renderer.hpp:214</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1_renderer_device_info_vulkan_html"><div class="ttname"><a href="structtz_1_1gl_1_1_renderer_device_info_vulkan.html">tz::gl::RendererDeviceInfoVulkan</a></div><div class="ttdoc">When the Device wants to create a RendererVulkan, we need to know a little bit about the Device's int...</div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2vk2_2renderer_8hpp_source.html#l00296">renderer.hpp:297</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1_renderer_device_info_vulkan_html_a82ca49ea66db14a2b0e53d1a81fa042a"><div class="ttname"><a href="structtz_1_1gl_1_1_renderer_device_info_vulkan.html#a82ca49ea66db14a2b0e53d1a81fa042a">tz::gl::RendererDeviceInfoVulkan::resize_callback</a></div><div class="ttdeci">RendererResizeCallbackType * resize_callback</div><div class="ttdoc">Callback for resizing which the renderer subscribes to for the duration of its lifetime....</div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2vk2_2renderer_8hpp_source.html#l00305">renderer.hpp:305</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1_renderer_device_info_vulkan_html_af59c0fcd8d99355fc8f822274da28f00"><div class="ttname"><a href="structtz_1_1gl_1_1_renderer_device_info_vulkan.html#af59c0fcd8d99355fc8f822274da28f00">tz::gl::RendererDeviceInfoVulkan::device</a></div><div class="ttdeci">vk2::LogicalDevice * device</div><div class="ttdoc">LogicalDevice used to create VKAPI objects. Most likely comes from a DeviceVulkan.</div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2vk2_2renderer_8hpp_source.html#l00299">renderer.hpp:299</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1_renderer_edit_request_html"><div class="ttname"><a href="structtz_1_1gl_1_1_renderer_edit_request.html">tz::gl::RendererEditRequest</a></div><div class="ttdoc">Represents an edit to an existing renderer.</div><div class="ttdef"><b>Definition:</b> <a href="api_2renderer_8hpp_source.html#l00085">renderer.hpp:86</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1_renderer_edit_request_html_a1cd98819434d9cc853c7729a2c3aad83"><div class="ttname"><a href="structtz_1_1gl_1_1_renderer_edit_request.html#a1cd98819434d9cc853c7729a2c3aad83">tz::gl::RendererEditRequest::component_edits</a></div><div class="ttdeci">std::vector&lt; RendererComponentEditRequest &gt; component_edits</div><div class="ttdoc">List of edits to components owned by the renderer.</div><div class="ttdef"><b>Definition:</b> <a href="api_2renderer_8hpp_source.html#l00090">renderer.hpp:90</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1_renderer_resize_info_vulkan_html"><div class="ttname"><a href="structtz_1_1gl_1_1_renderer_resize_info_vulkan.html">tz::gl::RendererResizeInfoVulkan</a></div><div class="ttdef"><b>Definition:</b> <a href="impl_2frontend_2vk2_2renderer_8hpp_source.html#l00284">renderer.hpp:285</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result_html_a94d0ec11da42430225b873b63079c996"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_command_pool_1_1_allocation_result.html#a94d0ec11da42430225b873b63079c996">tz::gl::vk2::CommandPool::AllocationResult::buffers</a></div><div class="ttdeci">tz::BasicList&lt; CommandBuffer &gt; buffers</div><div class="ttdoc">List of newly-allocated buffers.</div><div class="ttdef"><b>Definition:</b> <a href="command_8hpp_source.html#l00338">command.hpp:338</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_depth_stencil_state_html_a6e3b509c9f2df1bd154f1e0f8b42ef41"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_depth_stencil_state.html#a6e3b509c9f2df1bd154f1e0f8b42ef41">tz::gl::vk2::DepthStencilState::depth_testing</a></div><div class="ttdeci">bool depth_testing</div><div class="ttdoc">Whether depth testing is enabled.</div><div class="ttdef"><b>Definition:</b> <a href="fixed__function_8hpp_source.html#l00184">fixed_function.hpp:184</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_allocation_result_html_a9447ec7a1213edb2943a983e8f01068b"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_1_1_allocation_result.html#a9447ec7a1213edb2943a983e8f01068b">tz::gl::vk2::DescriptorPool::AllocationResult::sets</a></div><div class="ttdeci">tz::BasicList&lt; DescriptorSet &gt; sets</div><div class="ttdoc">List of allocated sets. If type == AllocationResultType::Success, this contains a list of valid Descr...</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8hpp_source.html#l00367">descriptors.hpp:367</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_descriptor_pool_info_1_1_pool_limits_html_ab40cdfd71afa53843549b7d15a00487f"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_info_1_1_pool_limits.html#ab40cdfd71afa53843549b7d15a00487f">tz::gl::vk2::DescriptorPoolInfo::PoolLimits::limits</a></div><div class="ttdeci">std::unordered_map&lt; DescriptorType, std::uint32_t &gt; limits</div><div class="ttdoc">Map of the maximum number of descriptors for each type. If a type does not exist within the map,...</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8hpp_source.html#l00205">descriptors.hpp:205</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_descriptor_pool_info_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_info.html">tz::gl::vk2::DescriptorPoolInfo</a></div><div class="ttdoc">Specifies creation flags for a descriptor pool.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8hpp_source.html#l00186">descriptors.hpp:187</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_descriptor_pool_info_html_aa6f231bec37b767f12357542a86a99f6"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_descriptor_pool_info.html#aa6f231bec37b767f12357542a86a99f6">tz::gl::vk2::DescriptorPoolInfo::limits</a></div><div class="ttdeci">PoolLimits limits</div><div class="ttdoc">Specifies the limits for the created pool.</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8hpp_source.html#l00213">descriptors.hpp:213</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_fence_info_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_fence_info.html">tz::gl::vk2::FenceInfo</a></div><div class="ttdoc">Specifies creation flags for a Fence.</div><div class="ttdef"><b>Definition:</b> <a href="fence_8hpp_source.html#l00012">fence.hpp:13</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_fence_info_html_a18b3aa2916e1759baf8ec26eacacba2c"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_fence_info.html#a18b3aa2916e1759baf8ec26eacacba2c">tz::gl::vk2::FenceInfo::device</a></div><div class="ttdeci">const LogicalDevice * device</div><div class="ttdoc">Owning LogicalDevice. Must not be null.</div><div class="ttdef"><b>Definition:</b> <a href="fence_8hpp_source.html#l00015">fence.hpp:15</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_framebuffer_info_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_framebuffer_info.html">tz::gl::vk2::FramebufferInfo</a></div><div class="ttdoc">Specifies creation flags for a Framebuffer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2framebuffer_8hpp_source.html#l00014">framebuffer.hpp:15</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_framebuffer_info_html_ad7c9e83c24d89ff033a20bb08e07de8c"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_framebuffer_info.html#ad7c9e83c24d89ff033a20bb08e07de8c">tz::gl::vk2::FramebufferInfo::render_pass</a></div><div class="ttdeci">const RenderPass * render_pass</div><div class="ttdoc">RenderPass that will target the frame buffer.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2framebuffer_8hpp_source.html#l00020">framebuffer.hpp:20</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_graphics_pipeline_info_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_graphics_pipeline_info.html">tz::gl::vk2::GraphicsPipelineInfo</a></div><div class="ttdoc">Specifies creation flags for a GraphicsPipeline.</div><div class="ttdef"><b>Definition:</b> <a href="graphics__pipeline_8hpp_source.html#l00026">graphics_pipeline.hpp:27</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_image_info_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_image_info.html">tz::gl::vk2::ImageInfo</a></div><div class="ttdoc">Specifies creation flags for an Image.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2image_8hpp_source.html#l00111">image.hpp:112</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_image_info_html_afe7f9ff33dc26c2ace59e95993fbe513"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_image_info.html#afe7f9ff33dc26c2ace59e95993fbe513">tz::gl::vk2::ImageInfo::device</a></div><div class="ttdeci">const LogicalDevice * device</div><div class="ttdoc">LogicalDevice owning this image. Must not be null.</div><div class="ttdef"><b>Definition:</b> <a href="vk2_2image_8hpp_source.html#l00114">image.hpp:114</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_image_view_info_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_image_view_info.html">tz::gl::vk2::ImageViewInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="image__view_8hpp_source.html#l00014">image_view.hpp:15</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1_pipeline_state_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1_pipeline_state.html">tz::gl::vk2::PipelineState</a></div><div class="ttdef"><b>Definition:</b> <a href="graphics__pipeline_8hpp_source.html#l00012">graphics_pipeline.hpp:13</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1hardware_1_1_queue_1_1_submit_info_1_1_wait_info_html"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1hardware_1_1_queue_1_1_submit_info_1_1_wait_info.html">tz::gl::vk2::hardware::Queue::SubmitInfo::WaitInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="queue_8hpp_source.html#l00077">queue.hpp:78</a></div></div>
<div class="ttc" id="astructtz_1_1gl_1_1vk2_1_1hardware_1_1_queue_1_1_submit_info_1_1_wait_info_html_a0a4757e6b992ea078cad8039d08ec587"><div class="ttname"><a href="structtz_1_1gl_1_1vk2_1_1hardware_1_1_queue_1_1_submit_info_1_1_wait_info.html#a0a4757e6b992ea078cad8039d08ec587">tz::gl::vk2::hardware::Queue::SubmitInfo::WaitInfo::wait_semaphore</a></div><div class="ttdeci">const BinarySemaphore * wait_semaphore</div><div class="ttdoc">Semaphore which will be waited on.</div><div class="ttdef"><b>Definition:</b> <a href="queue_8hpp_source.html#l00080">queue.hpp:80</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_22ef2c5f6712ba0a0b99c741bcfb15fe.html">gl</a></li><li class="navelem"><a class="el" href="dir_294d689e10da81f00c081b036a1431d9.html">impl</a></li><li class="navelem"><a class="el" href="dir_5dc250fa98469894779c63cc5b44e532.html">frontend</a></li><li class="navelem"><a class="el" href="dir_d273f6e3d5c68647259c2df717fedc18.html">vk2</a></li><li class="navelem"><b>renderer.cpp</b></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
