shader(type = fragment);

import "texcount"

struct texture_t
{
	vec3 tint;
	uint texid;
};

output(id = 0) vec4 out::colour;
input(id = 0) vec2 in::texc;
input(id = 1, flat) texture_t in::textures[TEX_COUNT];
resource(id = 3) const texture textures[];

void main()
{
	out::colour = vec4(vec3(0.0f), 1.0f);
	for(uint i = 0; i < TEX_COUNT; i++)
	{
		texture_t this_tex = in::textures[i];
		out::colour.xyz += texture(textures[this_tex.texid], in::texc).xyz * this_tex.tint;
	}
}
